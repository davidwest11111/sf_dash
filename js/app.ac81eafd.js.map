{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../node_modules/moment/locale sync ^\\.\\/.*$","webpack:///./js/app/components/main_nav/index.jsx","webpack:///./js/app/utils/local_storage/index.js","webpack:///./js/app/integrations/nextbus/index.js","webpack:///./js/app/components/loader/index.jsx","webpack:///./js/app/components/time_since_last_updated/index.jsx","webpack:///./js/app/components/error_message/index.jsx","webpack:///./js/app/components/bus/stop_info/index.jsx","webpack:///./js/app/components/bus/predictions/times/index.jsx","webpack:///./js/app/components/bus/route_stop_card/index.jsx","webpack:///./js/app/components/bus/predictions/index.jsx","webpack:///./js/app/components/bus/add_stop_form/manual_add/index.jsx","webpack:///./js/app/components/bus/add_stop_form/geolocate_add/index.jsx","webpack:///./js/app/components/bus/add_stop_form/index.jsx","webpack:///./js/app/components/bus/edit_togglers/index.jsx","webpack:///./js/app/components/bus/route_stop_removal/index.jsx","webpack:///./js/app/components/bus/index.jsx","webpack:///./js/app/integrations/darksky/index.js","webpack:///./js/app/components/weather/side_panel/todays_rain_forecast/index.jsx","webpack:///./js/app/constants/index.js","webpack:///./js/app/components/weather/icon/index.jsx","webpack:///./js/app/components/weather/side_panel/todays_forecast_overview/index.jsx","webpack:///./js/app/components/weather/side_panel/alerts/index.jsx","webpack:///./js/app/components/weather/side_panel/index.jsx","webpack:///./js/app/components/weather/hourly_forecast/index.jsx","webpack:///./js/app/components/weather/three_day_forecast/index.jsx","webpack:///./js/app/components/weather/index.jsx","webpack:///./js/app/components/main_page/current_datetime_header/index.jsx","webpack:///./js/app/components/main_page/index.jsx","webpack:///./js/app/components/settings_page/dark_light_mode_selector/index.jsx","webpack:///./js/app/components/settings_page/display_local_storage_data/index.jsx","webpack:///./js/app/components/settings_page/set_sample_local_storage_data/index.jsx","webpack:///./js/app/components/settings_page/index.jsx","webpack:///./js/app/index.jsx","webpack:///./index.jsx"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","map","webpackContext","req","id","webpackContextResolve","e","Error","code","keys","resolve","MainNav","className","this","props","classNames","to","PureComponent","T","string","WEATHER_KEY_KEY","WEATHER_UNITS_KEY","BUS_ROUTE_STOP_TAGS_KEY","HTML_CLASS_KEY","ALL_SETTINGS_KEYS","reduce","fullArray","SAMPLE_DATA","LocalStorage","JSON","parse","localStorage","getItem","val","setItem","stringify","dispatchEvent","Event","set","forEach","removeItem","routeStopTag","routeStopTags","getBusStopsFromLocalStorage","Set","filter","tag","URL","getUserPosition","options","Promise","reject","navigator","geolocation","getCurrentPosition","NextBus","axios","params","command","a","stops","useShortTitles","paramsSerializer","qs","arrayFormat","response","parsePredictionsXMLResponse","errorText","body","__text","parseRouteConfigXMLResponse","mergeRouteData","route","meters","all","getRouteConfig","responses","geoLocation","routeConfig","currPosition","google","maps","LatLng","coords","latitude","longitude","stopResults","direction","stop","stopLatLng","_lat","_lon","geometry","spherical","computeDistanceBetween","_tag","title","_title","directionName","_name","directionTitle","latLng","stopId","_stopId","stopTag","stopTitle","getPredictions","predictions","xmlString","X2JS","arrayAccessFormPaths","xml2js","routeTag","split","routeData","stopTags","idx","Loader","loading","small","bool","TimeSinceLastUpdated","timeAgo","lastUpdated","preciseDiff","moment","msUntilWarning","diff","interval","setInterval","forceUpdate","clearInterval","overdue","isOverdue","getReadableTime","number","ErrorMessage","children","node","StopInfo","prediction","_dirTitleBecauseNoPredictions","_stopTitle","shape","Times","predictionTimes","time","_tripTag","_affectedByLayover","_minutes","arrayOf","RouteStopCard","Card","CardBody","isRequired","Predictions","_routeTag","_stopTag","ManualAdd","event","field","setState","target","preventDefault","onAddOrRemoveStop","state","getRouteStopTag","stopIsValid","undefined","isValidStop","addBusStopToLocalStorage","Form","onSubmit","validateAndAddStop","Row","Col","xs","FormGroup","Label","for","Input","type","onChange","placeholder","Button","color","func","GeolocateAdd","getStopsNearMe","nearbyStops","errMsg","console","error","message","Alert","fade","href","rel","inline","getNearbyStops","Table","striped","hover","nearbyStop","onClick","addStop","AddStopForm","tab","activeTab","toggleAddStopForm","Nav","tabs","NavItem","NavLink","active","toggle","TabContent","TabPane","tabId","buttonProps","size","outline","EditTogglers","showBusRemove","toggleShowBusRemove","RouteStopRemoval","removeBusStopFromLocalStorage","splitRouteStopTag","removeStop","sortPredictions","sortedList","indexOf","Bus","showAddStopForm","updateBusPredictions","predictionResponse","CALL_INTERVAL","DarkSky","lat","long","units","getUrl","adapter","jsonpAdapter","locations","darkSkyUnits","convertUnitsForDarkSky","fetchWeatherData","base","exclude","lang","TodaysRainForecast","hourlyForecasts","find","hourlyForecast","precipProbability","firstRainForecast","getFirstRainForecast","toFixed","format","DARK_SKY_ICON_MAP","cloudy","fog","rain","sleet","snow","wind","WeatherIcon","iconName","icon","src","alt","cToF","celsius","fToC","fahrenheit","TodaysForecastOverview","weatherUnits","todaysForecast","temperatureMin","temperatureMax","fn","summary","getAltHighLow","Alerts","alerts","alert","SidePanel","dailyForecasts","array","HourlyForecast","data-toggle","temperature","uvIndex","humidity","apparentTemperature","ThreeDayForecast","dailyForecast","sm","LOCATIONS","readable","Weather","fetchAllLocationsWeatherData","locationsResponses","locationResponse","hourly","daily","fetchError","updateWeatherLocations","location","CardHeader","md","CardFooter","CurrentDateTimeHeader","now","date","MainPage","lg","MODES","DarkLightModeSelector","document","documentElement","setMode","isDarkModeSelected","ButtonGroup","DisplayLocalStorageData","show","addEventListener","rerender","removeEventListener","localStorageKey","codeString","getLocalStorageData","toggleShow","language","style","monokai","oneOf","SetSampleLocalStorageData","setSampleData","Settings","weatherKeyIsValid","weatherKeyValue","isValidKey","getInitialState","dump","dumpLocalStorageAndResetState","validateAndSetKey","onWeatherKeyChange","setWeatherUnits","App","Container","path","ReactDOM","render","getElementById"],"mappings":"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","file":"js/app.ac81eafd.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([515,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var map = {\n\t\"./af\": 40,\n\t\"./af.js\": 40,\n\t\"./ar\": 41,\n\t\"./ar-dz\": 42,\n\t\"./ar-dz.js\": 42,\n\t\"./ar-kw\": 43,\n\t\"./ar-kw.js\": 43,\n\t\"./ar-ly\": 44,\n\t\"./ar-ly.js\": 44,\n\t\"./ar-ma\": 45,\n\t\"./ar-ma.js\": 45,\n\t\"./ar-sa\": 46,\n\t\"./ar-sa.js\": 46,\n\t\"./ar-tn\": 47,\n\t\"./ar-tn.js\": 47,\n\t\"./ar.js\": 41,\n\t\"./az\": 48,\n\t\"./az.js\": 48,\n\t\"./be\": 49,\n\t\"./be.js\": 49,\n\t\"./bg\": 50,\n\t\"./bg.js\": 50,\n\t\"./bm\": 51,\n\t\"./bm.js\": 51,\n\t\"./bn\": 52,\n\t\"./bn.js\": 52,\n\t\"./bo\": 53,\n\t\"./bo.js\": 53,\n\t\"./br\": 54,\n\t\"./br.js\": 54,\n\t\"./bs\": 55,\n\t\"./bs.js\": 55,\n\t\"./ca\": 56,\n\t\"./ca.js\": 56,\n\t\"./cs\": 57,\n\t\"./cs.js\": 57,\n\t\"./cv\": 58,\n\t\"./cv.js\": 58,\n\t\"./cy\": 59,\n\t\"./cy.js\": 59,\n\t\"./da\": 60,\n\t\"./da.js\": 60,\n\t\"./de\": 61,\n\t\"./de-at\": 62,\n\t\"./de-at.js\": 62,\n\t\"./de-ch\": 63,\n\t\"./de-ch.js\": 63,\n\t\"./de.js\": 61,\n\t\"./dv\": 64,\n\t\"./dv.js\": 64,\n\t\"./el\": 65,\n\t\"./el.js\": 65,\n\t\"./en-SG\": 66,\n\t\"./en-SG.js\": 66,\n\t\"./en-au\": 67,\n\t\"./en-au.js\": 67,\n\t\"./en-ca\": 68,\n\t\"./en-ca.js\": 68,\n\t\"./en-gb\": 69,\n\t\"./en-gb.js\": 69,\n\t\"./en-ie\": 70,\n\t\"./en-ie.js\": 70,\n\t\"./en-il\": 71,\n\t\"./en-il.js\": 71,\n\t\"./en-nz\": 72,\n\t\"./en-nz.js\": 72,\n\t\"./eo\": 73,\n\t\"./eo.js\": 73,\n\t\"./es\": 74,\n\t\"./es-do\": 75,\n\t\"./es-do.js\": 75,\n\t\"./es-us\": 76,\n\t\"./es-us.js\": 76,\n\t\"./es.js\": 74,\n\t\"./et\": 77,\n\t\"./et.js\": 77,\n\t\"./eu\": 78,\n\t\"./eu.js\": 78,\n\t\"./fa\": 79,\n\t\"./fa.js\": 79,\n\t\"./fi\": 80,\n\t\"./fi.js\": 80,\n\t\"./fo\": 81,\n\t\"./fo.js\": 81,\n\t\"./fr\": 82,\n\t\"./fr-ca\": 83,\n\t\"./fr-ca.js\": 83,\n\t\"./fr-ch\": 84,\n\t\"./fr-ch.js\": 84,\n\t\"./fr.js\": 82,\n\t\"./fy\": 85,\n\t\"./fy.js\": 85,\n\t\"./ga\": 86,\n\t\"./ga.js\": 86,\n\t\"./gd\": 87,\n\t\"./gd.js\": 87,\n\t\"./gl\": 88,\n\t\"./gl.js\": 88,\n\t\"./gom-latn\": 89,\n\t\"./gom-latn.js\": 89,\n\t\"./gu\": 90,\n\t\"./gu.js\": 90,\n\t\"./he\": 91,\n\t\"./he.js\": 91,\n\t\"./hi\": 92,\n\t\"./hi.js\": 92,\n\t\"./hr\": 93,\n\t\"./hr.js\": 93,\n\t\"./hu\": 94,\n\t\"./hu.js\": 94,\n\t\"./hy-am\": 95,\n\t\"./hy-am.js\": 95,\n\t\"./id\": 96,\n\t\"./id.js\": 96,\n\t\"./is\": 97,\n\t\"./is.js\": 97,\n\t\"./it\": 98,\n\t\"./it-ch\": 99,\n\t\"./it-ch.js\": 99,\n\t\"./it.js\": 98,\n\t\"./ja\": 100,\n\t\"./ja.js\": 100,\n\t\"./jv\": 101,\n\t\"./jv.js\": 101,\n\t\"./ka\": 102,\n\t\"./ka.js\": 102,\n\t\"./kk\": 103,\n\t\"./kk.js\": 103,\n\t\"./km\": 104,\n\t\"./km.js\": 104,\n\t\"./kn\": 105,\n\t\"./kn.js\": 105,\n\t\"./ko\": 106,\n\t\"./ko.js\": 106,\n\t\"./ku\": 107,\n\t\"./ku.js\": 107,\n\t\"./ky\": 108,\n\t\"./ky.js\": 108,\n\t\"./lb\": 109,\n\t\"./lb.js\": 109,\n\t\"./lo\": 110,\n\t\"./lo.js\": 110,\n\t\"./lt\": 111,\n\t\"./lt.js\": 111,\n\t\"./lv\": 112,\n\t\"./lv.js\": 112,\n\t\"./me\": 113,\n\t\"./me.js\": 113,\n\t\"./mi\": 114,\n\t\"./mi.js\": 114,\n\t\"./mk\": 115,\n\t\"./mk.js\": 115,\n\t\"./ml\": 116,\n\t\"./ml.js\": 116,\n\t\"./mn\": 117,\n\t\"./mn.js\": 117,\n\t\"./mr\": 118,\n\t\"./mr.js\": 118,\n\t\"./ms\": 119,\n\t\"./ms-my\": 120,\n\t\"./ms-my.js\": 120,\n\t\"./ms.js\": 119,\n\t\"./mt\": 121,\n\t\"./mt.js\": 121,\n\t\"./my\": 122,\n\t\"./my.js\": 122,\n\t\"./nb\": 123,\n\t\"./nb.js\": 123,\n\t\"./ne\": 124,\n\t\"./ne.js\": 124,\n\t\"./nl\": 125,\n\t\"./nl-be\": 126,\n\t\"./nl-be.js\": 126,\n\t\"./nl.js\": 125,\n\t\"./nn\": 127,\n\t\"./nn.js\": 127,\n\t\"./pa-in\": 128,\n\t\"./pa-in.js\": 128,\n\t\"./pl\": 129,\n\t\"./pl.js\": 129,\n\t\"./pt\": 130,\n\t\"./pt-br\": 131,\n\t\"./pt-br.js\": 131,\n\t\"./pt.js\": 130,\n\t\"./ro\": 132,\n\t\"./ro.js\": 132,\n\t\"./ru\": 133,\n\t\"./ru.js\": 133,\n\t\"./sd\": 134,\n\t\"./sd.js\": 134,\n\t\"./se\": 135,\n\t\"./se.js\": 135,\n\t\"./si\": 136,\n\t\"./si.js\": 136,\n\t\"./sk\": 137,\n\t\"./sk.js\": 137,\n\t\"./sl\": 138,\n\t\"./sl.js\": 138,\n\t\"./sq\": 139,\n\t\"./sq.js\": 139,\n\t\"./sr\": 140,\n\t\"./sr-cyrl\": 141,\n\t\"./sr-cyrl.js\": 141,\n\t\"./sr.js\": 140,\n\t\"./ss\": 142,\n\t\"./ss.js\": 142,\n\t\"./sv\": 143,\n\t\"./sv.js\": 143,\n\t\"./sw\": 144,\n\t\"./sw.js\": 144,\n\t\"./ta\": 145,\n\t\"./ta.js\": 145,\n\t\"./te\": 146,\n\t\"./te.js\": 146,\n\t\"./tet\": 147,\n\t\"./tet.js\": 147,\n\t\"./tg\": 148,\n\t\"./tg.js\": 148,\n\t\"./th\": 149,\n\t\"./th.js\": 149,\n\t\"./tl-ph\": 150,\n\t\"./tl-ph.js\": 150,\n\t\"./tlh\": 151,\n\t\"./tlh.js\": 151,\n\t\"./tr\": 152,\n\t\"./tr.js\": 152,\n\t\"./tzl\": 153,\n\t\"./tzl.js\": 153,\n\t\"./tzm\": 154,\n\t\"./tzm-latn\": 155,\n\t\"./tzm-latn.js\": 155,\n\t\"./tzm.js\": 154,\n\t\"./ug-cn\": 156,\n\t\"./ug-cn.js\": 156,\n\t\"./uk\": 157,\n\t\"./uk.js\": 157,\n\t\"./ur\": 158,\n\t\"./ur.js\": 158,\n\t\"./uz\": 159,\n\t\"./uz-latn\": 160,\n\t\"./uz-latn.js\": 160,\n\t\"./uz.js\": 159,\n\t\"./vi\": 161,\n\t\"./vi.js\": 161,\n\t\"./x-pseudo\": 162,\n\t\"./x-pseudo.js\": 162,\n\t\"./yo\": 163,\n\t\"./yo.js\": 163,\n\t\"./zh-cn\": 164,\n\t\"./zh-cn.js\": 164,\n\t\"./zh-hk\": 165,\n\t\"./zh-hk.js\": 165,\n\t\"./zh-tw\": 166,\n\t\"./zh-tw.js\": 166\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 204;","import React, { PureComponent } from 'react';\nimport { Link } from 'react-router-dom';\nimport { PropTypes as T } from 'prop-types';\nimport classNames from 'classnames';\n\n\nexport default class MainNav extends PureComponent {\n  static propTypes = {\n    className: T.string,\n  };\n\n  static defaultProps = {\n    className: '',\n  }\n\n  render() {\n    const { className } = this.props;\n    return (\n      <div className={classNames(className, 'header')}>\n        <Link to=\"/\"><span className=\"fas fa-home\" /></Link>\n        <Link to=\"/settings\"><span className=\"fas fa-cog\" /></Link>\n      </div>\n\n    );\n  }\n}\n","export const ANGULAR_LOCAL_STORAGE_PREFIX = 'ngStorage-';\nexport const WEATHER_KEY_KEY = 'weatherKey';\nexport const WEATHER_UNITS_KEY = 'weatherUnits';\nexport const BUS_ROUTE_STOP_TAGS_KEY = 'routeStopTags';\nexport const HTML_CLASS_KEY = 'htmlClass';\nexport const ALL_SETTINGS_KEYS = [\n  WEATHER_KEY_KEY,\n  WEATHER_UNITS_KEY,\n  BUS_ROUTE_STOP_TAGS_KEY,\n  HTML_CLASS_KEY,\n].reduce(\n  // include legacy keys\n  (fullArray, key) => ([...fullArray, key, `${ANGULAR_LOCAL_STORAGE_PREFIX}${key}`]),\n  [],\n);\n\nexport const SAMPLE_DATA = {\n  [BUS_ROUTE_STOP_TAGS_KEY]: ['14|5565', '67|6208', '27|3930', '12|7552'],\n};\n\nexport default class LocalStorage {\n  static get(key) {\n    return JSON.parse((\n      window.localStorage.getItem(key) ||\n      // legacy support\n      window.localStorage.getItem(`${ANGULAR_LOCAL_STORAGE_PREFIX}${key}`)\n    )) || '';\n  }\n\n  static set(key, val) {\n    window.localStorage.setItem(key, JSON.stringify(val));\n\n    // window.addEventListener('storage') doesn't fire on the current tab by default. make it.\n    // https://gist.github.com/TakashiSasaki/4282903\n    window.dispatchEvent(new Event('storage'));\n  }\n\n  static setSampleData(key) {\n    this.set(key, SAMPLE_DATA[key]);\n  }\n\n  static dump() {\n    ALL_SETTINGS_KEYS.forEach(key => window.localStorage.removeItem(key));\n  }\n\n  static getBusStopsFromLocalStorage() {\n    return this.get(BUS_ROUTE_STOP_TAGS_KEY) || [];\n  }\n\n  static addBusStopToLocalStorage(routeStopTag) {\n    const routeStopTags = this.getBusStopsFromLocalStorage();\n    this.set(\n      BUS_ROUTE_STOP_TAGS_KEY,\n      [...new Set([...routeStopTags, routeStopTag])], // no duplicates\n    );\n  }\n\n  static removeBusStopFromLocalStorage(routeStopTag) {\n    const routeStopTags = this.getBusStopsFromLocalStorage();\n    this.set(\n      BUS_ROUTE_STOP_TAGS_KEY,\n      routeStopTags.filter(tag => tag !== routeStopTag),\n    );\n  }\n}\n","import axios from 'axios';\nimport X2JS from 'x2js';\nimport qs from 'qs';\n\n\nexport const URL = 'http://webservices.nextbus.com/service/publicXMLFeed';\n\nexport const getUserPosition = options => (\n  new Promise((resolve, reject) => {\n    navigator.geolocation.getCurrentPosition(resolve, reject, options);\n  })\n);\n\nexport default class NextBus {\n  static async getPredictions(routeStopTags) {\n    const response = await axios.get(URL, {\n      params: {\n        command: 'predictionsForMultiStops',\n        a: 'sf-muni',\n        stops: routeStopTags,\n        useShortTitles: true,\n      },\n      paramsSerializer: params => qs.stringify(params, { arrayFormat: 'repeat' }),\n    });\n\n    const data = this.parsePredictionsXMLResponse(response.data);\n\n    return new Promise((resolve, reject) => {\n      const errorText = data?.body?.Error?.__text;\n      if (errorText) { reject(new Error(errorText)); }\n\n      resolve(data);\n    });\n  }\n\n  static async getRouteConfig() {\n    const response = await axios.get(URL, {\n      params: {\n        command: 'routeConfig',\n        a: 'sf-muni',\n        useShortTitles: true,\n      },\n    });\n\n    const data = this.parseRouteConfigXMLResponse(response.data);\n\n    return new Promise((resolve, reject) => {\n      const errorText = data?.body?.Error?.__text;\n      if (errorText) { reject(new Error(errorText)); }\n\n      resolve(this.mergeRouteData(data.body.route));\n    });\n  }\n\n  static async getStopsNearMe(meters) {\n    const responses = await axios.all([\n      getUserPosition(),\n      this.getRouteConfig(),\n    ]);\n\n    const [geoLocation, routeConfig] = responses;\n\n    const currPosition = new google.maps.LatLng(\n      geoLocation.coords.latitude,\n      geoLocation.coords.longitude,\n    );\n\n    const stopResults = [];\n    routeConfig.forEach(route => {\n      route.direction.forEach(direction => {\n        direction.stop.forEach(stop => {\n          // Find stops that are within [meters] of the users position\n          const stopLatLng = new google.maps.LatLng(stop._lat, stop._lon);\n          const distance = google.maps.geometry.spherical\n            .computeDistanceBetween(currPosition, stopLatLng);\n\n          if (distance <= meters) {\n            stopResults.push({\n              tag: route._tag,\n              title: route._title,\n\n              directionName: direction._name,\n              directionTitle: direction._title,\n\n              latLng: stopLatLng,\n\n              stopId: stop._stopId,\n              stopTag: stop._tag,\n              stopTitle: stop._title,\n            });\n          }\n        });\n      });\n    });\n\n    return stopResults;\n  }\n\n  static mergeRouteData = routeData => {\n    // The purpose of this fn is to merge stop data into direction data. this is necessary because\n    // the stops are direction unaware (inbound/outbound):\n    //\n    // routeData[0].direction[0].stop[0] = {\n    //   _tag: \"6932\"\n    // }\n    //\n    // becomes\n    //\n    // routeData[0].direction[0].stop[0] = {\n    //   _tag: \"6932\", _lat: \"37.123\", _stopId: \"12789\", _title: \"Mission\"\n    // }\n\n    routeData.forEach(route => {\n      // map the stop tags\n      const stopTags = {};\n      route.stop.forEach(stop => {\n        stopTags[stop._tag] = stop;\n      });\n\n      // there should be only 2 directions. inbound/outbound\n      route.direction.forEach(direction => {\n        direction.stop.forEach((stop, idx) => {\n          // replace the object with the one that has the full data\n          direction.stop[idx] = stopTags[stop._tag];\n        });\n      });\n    });\n    return routeData;\n  }\n\n  static async isValidStop(routeStopTag) {\n    try {\n      const response = await this.getPredictions([routeStopTag]);\n      return !!response?.body?.predictions;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  static parsePredictionsXMLResponse(xmlString) {\n    return new X2JS({\n      arrayAccessFormPaths: [\n        'body.predictions',\n        'body.predictions.direction.prediction',\n      ],\n    }).xml2js(xmlString);\n  }\n\n  static parseRouteConfigXMLResponse(xmlString) {\n    return new X2JS({\n      arrayAccessFormPaths: [\n        'body.route',\n      ],\n    }).xml2js(xmlString);\n  }\n\n  static getRouteStopTag(routeTag, stopTag) {\n    return `${routeTag}|${stopTag}`;\n  }\n\n  static splitRouteStopTag(routeStopTag) {\n    return routeStopTag.split('|');\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { PropTypes as T } from 'prop-types';\nimport classNames from 'classnames';\n\n\nexport default class Loader extends PureComponent {\n  static propTypes = {\n    className: T.string,\n    loading: T.bool,\n    small: T.bool,\n  };\n\n  static defaultProps = {\n    className: '',\n    loading: false,\n    small: false,\n  }\n\n  render() {\n    const { className, loading, small } = this.props;\n\n    if (!loading) { return null; }\n\n    return (\n      <div className={classNames(className, 'spinner', { 'spinner-small': small })}>\n        <div className=\"bounce1\" />\n        <div className=\"bounce2\" />\n        <div className=\"bounce3\" />\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { PropTypes as T } from 'prop-types';\nimport moment from 'moment';\nimport 'moment-precise-range-plugin';\nimport classNames from 'classnames';\n\nimport Loader from '../loader';\n\n\nexport const INTERVAL_MS = 1000;\n\nexport default class TimeSinceLastUpdated extends PureComponent {\n  static propTypes = {\n    className: T.string,\n    lastUpdated: T.object, // a moment object\n    msUntilWarning: T.number,\n    loading: T.bool,\n  };\n\n  static defaultProps = {\n    className: '',\n    lastUpdated: null,\n    msUntilWarning: 60000, // 1min\n    loading: false,\n  }\n\n  componentDidMount() {\n    this.interval = setInterval(() => this.forceUpdate(), INTERVAL_MS);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n  getReadableTime = () => {\n    const { lastUpdated } = this.props;\n\n    const timeAgo = lastUpdated.preciseDiff(moment());\n\n    if (!timeAgo) { // timeText is empty if diff is 0\n      return 'Just now.';\n    }\n    return `${timeAgo} ago.`;\n  }\n\n  isOverdue = () => {\n    const { lastUpdated, msUntilWarning } = this.props;\n    return moment().diff(lastUpdated) >= msUntilWarning;\n  }\n\n  render() {\n    const { className, lastUpdated, loading } = this.props;\n\n    const overdue = this.isOverdue();\n\n    return (\n      <div className={classNames(className, 'time-since-last-updated')}>\n        <span className={classNames({ overdue })}>\n          {lastUpdated && this.getReadableTime()}\n        </span>\n        <Loader className=\"my-1 ml-auto\" loading={loading} small />\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { PropTypes as T } from 'prop-types';\nimport classNames from 'classnames';\n\n\nexport default class ErrorMessage extends PureComponent {\n  static propTypes = {\n    className: T.string,\n    children: T.node,\n  };\n\n  static defaultProps = {\n    className: '',\n  }\n\n  render() {\n    const { className, children } = this.props;\n\n    if (!children) { return null; }\n\n    return (\n      <div className={classNames(className, 'error-message')}>\n        <span className=\"fas fa-exclamation-circle mr-1\" />\n        <span>\n          {children}\n        </span>\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { PropTypes as T } from 'prop-types';\nimport classNames from 'classnames';\n\n\nexport default class StopInfo extends PureComponent {\n  static propTypes = {\n    className: T.string,\n    prediction: T.shape({\n      direction: T.shape({\n        _title: T.string,\n      }),\n      _stopTitle: T.string,\n      _dirTitleBecauseNoPredictions: T.string,\n    }),\n  };\n\n  static defaultProps = {\n    className: '',\n    prediction: {},\n  }\n\n  render() {\n    const { className, prediction } = this.props;\n    const { direction, _dirTitleBecauseNoPredictions, _stopTitle } = prediction;\n\n    return (\n      <div className={classNames(className)}>\n        <div className=\"font-weight-bold\">\n          {direction?._title || _dirTitleBecauseNoPredictions}\n        </div>\n        <div>\n          @{_stopTitle}\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { PropTypes as T } from 'prop-types';\nimport classNames from 'classnames';\n\n\nexport default class Times extends PureComponent {\n  static propTypes = {\n    className: T.string,\n    predictionTimes: T.arrayOf(\n      T.shape({\n        _tripTag: T.string, // used to generate react `key`s\n        _affectedByLayover: T.string,\n        _minutes: T.string,\n      }),\n    ),\n  };\n\n  static defaultProps = {\n    className: '',\n    predictionTimes: [],\n  }\n\n  render() {\n    const { className, predictionTimes } = this.props;\n\n    return (\n      <div className={classNames(className, 'prediction-times')}>\n        {predictionTimes.length ? (\n          <>\n            {predictionTimes.slice(0, 4).map((time, idx) => (\n              <span key={`${time._tripTag}`}>\n                <span\n                  className={classNames(\n                    'prediction-time',\n                    {\n                      'not-affected-by-layover': !time._affectedByLayover,\n                      'next-time': idx === 0,\n                      'other-time': idx !== 0,\n                    },\n                  )}\n                >\n                  {time._minutes === '0' ? 'Now' : time._minutes}\n                </span>\n                {idx !== (predictionTimes.length - 1) && ', '}\n              </span>\n            ))}\n          </>\n        ) : (\n          <span className=\"no-prediction-time\">None</span>\n        )}\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { PropTypes as T } from 'prop-types';\nimport { Card, CardBody } from 'reactstrap';\nimport classNames from 'classnames';\n\n\nexport default class RouteStopCard extends PureComponent {\n  static propTypes = {\n    className: T.string,\n    routeTag: T.string.isRequired,\n    children: T.node.isRequired,\n  };\n\n  static defaultProps = {\n    className: '',\n  }\n\n  render() {\n    const { className, routeTag, children } = this.props;\n\n    return (\n      <Card className={classNames(className, 'mb-2')}>\n        <CardBody className=\"d-flex align-items-center justify-content-between\">\n          <div className=\"route-tag\">\n            {routeTag}\n          </div>\n\n          <div className=\"route-tag-details\">\n            {children}\n          </div>\n        </CardBody>\n      </Card>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { PropTypes as T } from 'prop-types';\nimport classNames from 'classnames';\n\nimport StopInfo from '../stop_info';\nimport Times from './times';\nimport RouteStopCard from '../route_stop_card';\n\n\nexport default class Predictions extends PureComponent {\n  static propTypes = {\n    className: T.string,\n    predictions: T.arrayOf(\n      T.shape({\n        _routeTag: T.string,\n        _stopTag: T.string, // used to generate react `key`s\n        direction: T.shape({\n          prediction: T.arrayOf(\n            T.shape({\n              _tripTag: T.string, // used to generate react `key`s\n              _affectedByLayover: T.string,\n              _minutes: T.string,\n            }),\n          ),\n        }),\n      }),\n    ),\n  };\n\n  static defaultProps = {\n    className: '',\n    predictions: [],\n  }\n\n  render() {\n    const { className, predictions } = this.props;\n\n    return (\n      <div className={classNames(className)}>\n        {predictions.map(prediction => {\n          const { _routeTag, _stopTag, direction } = prediction;\n          return (\n            <RouteStopCard routeTag={_routeTag} key={`${_routeTag}-${_stopTag}`}>\n              <Times predictionTimes={direction?.prediction} />\n              <StopInfo prediction={prediction} />\n            </RouteStopCard>\n          );\n        })}\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { PropTypes as T } from 'prop-types';\nimport { Form, FormGroup, Row, Col, Button, Input, Label } from 'reactstrap';\nimport classNames from 'classnames';\n\nimport NextBus from 'app/integrations/nextbus';\nimport LocalStorage from 'app/utils/local_storage';\n\n\nexport default class ManualAdd extends PureComponent {\n  static propTypes = {\n    className: T.string,\n    onAddOrRemoveStop: T.func.isRequired,\n  };\n\n  static defaultProps = {\n    className: '',\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      routeTag: '',\n      stopTag: '',\n      stopIsValid: undefined,\n    };\n  }\n\n  onChange = (event, field) => {\n    this.setState({ [field]: event.target.value });\n  }\n\n  validateAndAddStop = async event => {\n    event.preventDefault();\n    const { onAddOrRemoveStop } = this.props;\n    const { routeTag, stopTag } = this.state;\n    const routeStopTag = NextBus.getRouteStopTag(routeTag, stopTag);\n    this.setState({ stopIsValid: undefined });\n\n    if (await NextBus.isValidStop(routeStopTag)) {\n      this.setState({ stopIsValid: true });\n      LocalStorage.addBusStopToLocalStorage(routeStopTag);\n      onAddOrRemoveStop();\n      return;\n    }\n\n    this.setState({ stopIsValid: false });\n  }\n\n  render() {\n    const { className } = this.props;\n    const { routeTag, stopTag, stopIsValid } = this.state;\n\n    return (\n      <Form onSubmit={this.validateAndAddStop} className={classNames(className)}>\n        <Row>\n          <Col xs=\"6\">\n            <FormGroup>\n              <Label for=\"manual-add-route-tag\">Route Tag:</Label>\n              <Input\n                type=\"text\"\n                id=\"manual-add-route-tag\"\n                className={classNames(\n                  {\n                    'is-valid': stopIsValid,\n                    'is-invalid': stopIsValid === false,\n                  },\n                )}\n                onChange={e => this.onChange(e, 'routeTag')}\n                placeholder=\"12\"\n                value={routeTag}\n              />\n            </FormGroup>\n          </Col>\n          <Col xs=\"6\">\n            <FormGroup>\n              <Label for=\"manual-add-route-stop\">Stop Tag:</Label>\n              <Input\n                type=\"text\"\n                id=\"manual-add-route-stop\"\n                className={classNames(\n                  {\n                    'is-valid': stopIsValid,\n                    'is-invalid': stopIsValid === false,\n                  },\n                )}\n                onChange={e => this.onChange(e, 'stopTag')}\n                placeholder=\"5837\"\n                value={stopTag}\n              />\n            </FormGroup>\n          </Col>\n        </Row>\n        <div>\n          <Button color=\"primary\" type=\"submit\">Validate & Add Stop</Button>\n        </div>\n      </Form>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { PropTypes as T } from 'prop-types';\nimport { Alert, Form, Input, Label, Table } from 'reactstrap';\nimport classNames from 'classnames';\n\nimport NextBus from 'app/integrations/nextbus';\nimport LocalStorage from 'app/utils/local_storage';\nimport Loader from 'app/components/loader';\nimport ErrorMessage from 'app/components/error_message';\n\n\nexport default class GeolocateAdd extends PureComponent {\n  static propTypes = {\n    className: T.string,\n    onAddOrRemoveStop: T.func.isRequired,\n  };\n\n  static defaultProps = {\n    className: '',\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n      errMsg: undefined,\n      nearbyStops: [],\n    };\n  }\n\n  getNearbyStops = async event => {\n    const meters = event.target.value;\n    if (!meters) { return; }\n\n    this.setState({ loading: true });\n    try {\n      const nearbyStops = await NextBus.getStopsNearMe(meters);\n      this.setState({\n        loading: false,\n        errMsg: undefined,\n        nearbyStops,\n      });\n    } catch (e) {\n      console.error(e.message);\n      this.setState({\n        loading: false,\n        errMsg: e.message,\n      });\n    }\n  }\n\n  addStop = routeStopTag => {\n    const { onAddOrRemoveStop } = this.props;\n\n    LocalStorage.addBusStopToLocalStorage(routeStopTag);\n    onAddOrRemoveStop();\n  }\n\n  render() {\n    const { className } = this.props;\n    const { loading, errMsg, nearbyStops } = this.state;\n\n    return (\n      <>\n        <Alert color=\"danger\" fade={false}>\n          Warning: This {'won\\'t'} work if this app is hosted on http. See{' '}\n          <a\n            href=\"https://developers.google.com/web/updates/2016/04/geolocation-on-secure-contexts-only\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Geolocation API Removed from Unsecured Origins in Chrome 50\n          </a>. However, hosting this app on https causes a Mixed Content issue (https site\n          requesting {'NextBus\\'s'} http-only traffic).\n        </Alert>\n\n        <Form className={classNames(className, 'mb-2')} inline>\n          <Label className=\"mr-2\">Find stops within</Label>\n          <Input type=\"select\" onChange={this.getNearbyStops}>\n            {/* Values are in meters */}\n            <option value=\"\">--Choose One--</option>\n            <option value=\"322\">1/5 mile</option>\n            <option value=\"402\">1/4 mile</option>\n            <option value=\"804\">1/2 mile</option>\n          </Input>\n          <Loader className=\"ml-3\" loading={loading} />\n        </Form>\n\n        <ErrorMessage>{errMsg}</ErrorMessage>\n\n        {!!nearbyStops.length && (\n          <Table striped hover className=\"mt-4\">\n            <thead>\n              <tr>\n                <th>Route</th>\n                <th>Direction</th>\n                <th>Stop</th>\n              </tr>\n            </thead>\n            <tbody>\n              {nearbyStops.map(nearbyStop => {\n                const { tag, stopTag, title, directionTitle, stopTitle } = nearbyStop;\n                const routeStopTag = NextBus.getRouteStopTag(tag, stopTag);\n\n                return (\n                  <tr\n                    className=\"clickable\"\n                    key={routeStopTag}\n                    onClick={() => this.addStop(routeStopTag)}\n                  >\n                    <td>{title}</td>\n                    <td>{directionTitle}</td>\n                    <td>{stopTitle}</td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </Table>\n        )}\n      </>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { PropTypes as T } from 'prop-types';\nimport { Nav, NavItem, NavLink, TabContent, TabPane } from 'reactstrap';\nimport classNames from 'classnames';\n\nimport ManualAdd from './manual_add';\nimport GeolocateAdd from './geolocate_add';\n\n\nexport default class AddStopForm extends PureComponent {\n  static propTypes = {\n    className: T.string,\n    toggleAddStopForm: T.func.isRequired,\n    onAddOrRemoveStop: T.func.isRequired,\n  };\n\n  static defaultProps = {\n    className: '',\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTab: '1',\n    };\n  }\n\n  toggle = tab => {\n    const { activeTab } = this.state;\n    if (activeTab !== tab) {\n      this.setState({\n        activeTab: tab,\n      });\n    }\n  }\n\n  render() {\n    const { className, toggleAddStopForm, onAddOrRemoveStop } = this.props;\n    const { activeTab } = this.state;\n\n    return (\n      <div className={classNames(className, 'add-form', 'mb-2')}>\n        <Nav tabs>\n          <NavItem>\n            <NavLink\n              className={classNames('clickable', { active: activeTab === '1' })}\n              onClick={() => this.toggle('1')}\n            >\n              Geolocation\n            </NavLink>\n          </NavItem>\n          <NavItem>\n            <NavLink\n              className={classNames('clickable', { active: activeTab === '2' })}\n              onClick={() => this.toggle('2')}\n            >\n              Manual Input\n            </NavLink>\n          </NavItem>\n          <button type=\"button\" className=\"btn close-form\" onClick={toggleAddStopForm}>\n            <span className=\"fas fa-times\" />\n          </button>\n        </Nav>\n        <TabContent activeTab={activeTab}>\n          <TabPane tabId=\"1\">\n            <GeolocateAdd onAddOrRemoveStop={onAddOrRemoveStop} />\n          </TabPane>\n          <TabPane tabId=\"2\">\n            <ManualAdd onAddOrRemoveStop={onAddOrRemoveStop} />\n          </TabPane>\n        </TabContent>\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { PropTypes as T } from 'prop-types';\nimport { Button } from 'reactstrap';\nimport classNames from 'classnames';\n\nimport LocalStorage from 'app/utils/local_storage';\n\n\nconst buttonProps = {\n  className: 'mr-1',\n  size: 'xs',\n  color: 'secondary',\n  outline: true,\n};\n\nexport default class EditTogglers extends PureComponent {\n  static propTypes = {\n    className: T.string,\n    showBusRemove: T.bool.isRequired,\n    toggleShowBusRemove: T.func.isRequired,\n    toggleAddStopForm: T.func.isRequired,\n  };\n\n  static defaultProps = {\n    className: '',\n  }\n\n  render() {\n    const {\n      className,\n      showBusRemove,\n      toggleShowBusRemove,\n      toggleAddStopForm,\n    } = this.props;\n    const routeStopTags = LocalStorage.getBusStopsFromLocalStorage();\n\n    return (\n      <div className={classNames(className, 'mb-2')}>\n        {!showBusRemove && (\n          <Button {...buttonProps} onClick={toggleAddStopForm}>\n            <span className=\"fas fa-plus\" />\n          </Button>\n        )}\n        {!!routeStopTags.length && (\n          <Button {...buttonProps} onClick={toggleShowBusRemove}>\n            <span className=\"fas fa-pen\" />\n          </Button>\n        )}\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { PropTypes as T } from 'prop-types';\nimport { Button } from 'reactstrap';\nimport classNames from 'classnames';\n\nimport NextBus from 'app/integrations/nextbus';\nimport LocalStorage from 'app/utils/local_storage';\nimport RouteStopCard from '../route_stop_card';\n\n\nexport default class RouteStopRemoval extends PureComponent {\n  static propTypes = {\n    className: T.string,\n    onAddOrRemoveStop: T.func.isRequired,\n  };\n\n  removeStop = (routeTag, stopTag) => {\n    const routeStopTag = NextBus.getRouteStopTag(routeTag, stopTag);\n    const { onAddOrRemoveStop } = this.props;\n\n    LocalStorage.removeBusStopFromLocalStorage(routeStopTag);\n    onAddOrRemoveStop();\n    this.forceUpdate();\n  }\n\n\n  render() {\n    const { className } = this.props;\n    const routeStopTags = LocalStorage.getBusStopsFromLocalStorage();\n\n    return (\n      <div className={classNames(className)}>\n        {routeStopTags.map(routeStopTag => {\n          const [routeTag, stopTag] = NextBus.splitRouteStopTag(routeStopTag);\n\n          return (\n            <RouteStopCard routeTag={routeTag} key={routeStopTag}>\n              <Button\n                color=\"danger\"\n                size=\"lg\"\n                onClick={() => this.removeStop(routeTag, stopTag)}\n              >\n                Remove Stop\n              </Button>\n            </RouteStopCard>\n          );\n        })}\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { PropTypes as T } from 'prop-types';\nimport { Card, CardBody } from 'reactstrap';\nimport moment from 'moment';\nimport classNames from 'classnames';\n\nimport LocalStorage from 'app/utils/local_storage';\nimport { WARNING_AFTER_N_MISSED_CALLS } from 'app/constants';\nimport NextBus from 'app/integrations/nextbus';\nimport TimeSinceLastUpdated from 'app/components/time_since_last_updated';\nimport ErrorMessage from 'app/components/error_message';\n\nimport Predictions from './predictions';\nimport AddStopForm from './add_stop_form';\nimport EditTogglers from './edit_togglers';\nimport RouteStopRemoval from './route_stop_removal';\n\n\nexport const CALL_INTERVAL = 10 * 1000;\nexport const MS_UNTIL_WARNING = CALL_INTERVAL * WARNING_AFTER_N_MISSED_CALLS;\n\nexport const sortPredictions = (routeStopTags, predictions = []) => {\n  const sortedList = [];\n  predictions.forEach(prediction => {\n    const routeStopTag = `${prediction._routeTag}|${prediction._stopTag}`;\n    sortedList[routeStopTags.indexOf(routeStopTag)] = prediction;\n  });\n  return sortedList;\n};\n\nexport default class Bus extends PureComponent {\n  static propTypes = {\n    className: T.string,\n  };\n\n  static defaultProps = {\n    className: '',\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      predictions: [],\n      lastUpdated: undefined,\n      showAddStopForm: false,\n      showBusRemove: false,\n      loading: false,\n      errMsg: undefined,\n    };\n  }\n\n  async componentDidMount() {\n    await this.updateBusPredictions();\n    this.interval = setInterval(() => this.updateBusPredictions(), CALL_INTERVAL);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n  toggleAddStopForm = () => {\n    const { showAddStopForm } = this.state;\n    this.setState({ showAddStopForm: !showAddStopForm });\n  }\n\n  onAddOrRemoveStop = async () => {\n    clearInterval(this.interval);\n    await this.updateBusPredictions();\n    this.interval = setInterval(this.updateBusPredictions, CALL_INTERVAL);\n  }\n\n  toggleShowBusRemove = () => {\n    const { showBusRemove } = this.state;\n    this.setState({ showBusRemove: !showBusRemove });\n  }\n\n  updateBusPredictions = async () => {\n    const routeStopTags = LocalStorage.getBusStopsFromLocalStorage();\n\n    // Don't send an empty request\n    if (!routeStopTags.length) { return; }\n\n    this.setState({ loading: true });\n    try {\n      const predictionResponse = await NextBus.getPredictions(routeStopTags);\n\n      this.setState({\n        predictions: sortPredictions(routeStopTags, predictionResponse.body.predictions),\n        loading: false,\n        lastUpdated: moment(),\n        errMsg: undefined,\n      });\n    } catch (e) {\n      console.error(e.message);\n      this.setState({\n        loading: false,\n        errMsg: e.message,\n        lastUpdated: moment(),\n      });\n    }\n  }\n\n  render() {\n    const { className } = this.props;\n    const {\n      predictions,\n      lastUpdated,\n      showAddStopForm,\n      showBusRemove,\n      loading,\n      errMsg,\n    } = this.state;\n\n    return (\n      <div className={classNames(className, 'bus')}>\n        {!errMsg && !predictions.length && (\n          <Card className=\"mb-2\">\n            <CardBody>\n              No bus stops added.\n            </CardBody>\n          </Card>\n        )}\n\n        {showBusRemove ? (\n          <RouteStopRemoval onAddOrRemoveStop={this.onAddOrRemoveStop} />\n        ) : (\n          <Predictions\n            predictions={predictions}\n          />\n        )}\n\n        {showAddStopForm && (\n          <AddStopForm\n            toggleAddStopForm={this.toggleAddStopForm}\n            onAddOrRemoveStop={this.onAddOrRemoveStop}\n          />\n        )}\n\n        {!showAddStopForm && (\n          <div className=\"d-flex align-items-start justify-content-between\">\n            <EditTogglers\n              toggleAddStopForm={this.toggleAddStopForm}\n              showBusRemove={showBusRemove}\n              toggleShowBusRemove={this.toggleShowBusRemove}\n            />\n\n            <TimeSinceLastUpdated\n              lastUpdated={lastUpdated}\n              msUntilWarning={MS_UNTIL_WARNING}\n              loading={loading}\n            />\n          </div>\n        )}\n\n        <ErrorMessage>{errMsg}</ErrorMessage>\n      </div>\n    );\n  }\n}\n","import axios from 'axios';\nimport jsonpAdapter from 'axios-jsonp';\n\n\nexport const URL_BASE = 'https://api.darksky.net/forecast';\n\nexport default class DarkSky {\n  static getUrl = ({\n    // all params required\n    base = URL_BASE,\n    key,\n    lat,\n    long,\n    exclude = 'minutely,flags,currently',\n    lang = 'en',\n    units = 'auto',\n  }) => `${base}/${key}/${lat},${long}?exclude=${exclude}&lang=${lang}&units=${units}`;\n\n  static async fetchWeatherData({ lat, long, key, units }) {\n    // NOTE: this is a jsonp call. there are no status codes or errors to parse like with XHR\n    // try/catch errors in components that call this, so just return the response as-is\n    const response = await axios.get(this.getUrl({ lat, long, key, units }), {\n      adapter: jsonpAdapter, // gets around CORS\n    });\n    return response;\n  }\n\n  static async fetchAllLocationsWeatherData(locations, key, units) {\n    const darkSkyUnits = this.convertUnitsForDarkSky(units);\n    const responses = await axios.all(\n      locations.map(({ lat, long }) => (\n        this.fetchWeatherData({ lat, long, key, units: darkSkyUnits })\n      )),\n    );\n    return responses;\n  }\n\n  static isValidKey = async key => {\n    const response = await this.fetchWeatherData({ lat: 38, long: -122, key });\n    return !!response?.data;\n  }\n\n  static convertUnitsForDarkSky = (units = 'auto') => {\n    switch (units) {\n      case ('f'):\n        return 'us';\n      case ('c'):\n        return 'si';\n      case (''):\n      case ('auto'):\n        return 'auto';\n      default:\n        throw new Error(`Invalid Unit type: ${units}`);\n    }\n  };\n}\n","import React, { PureComponent } from 'react';\nimport { PropTypes as T } from 'prop-types';\nimport moment from 'moment';\nimport classNames from 'classnames';\n\nimport { MIN_CHANCE_OF_RAIN } from 'app/constants';\n\n\nexport const PRECIP_HOUR_LIMIT = 23;\n\nexport default class TodaysRainForecast extends PureComponent {\n  static propTypes = {\n    className: T.string,\n    hourlyForecasts: T.arrayOf(\n      T.shape({\n        precipProbability: T.number,\n        time: T.number,\n      }),\n    ),\n  };\n\n  static defaultProps = {\n    className: '',\n    hourlyForecasts: [],\n  }\n\n  getFirstRainForecast = () => {\n    const { hourlyForecasts } = this.props;\n    return hourlyForecasts\n      .slice(0, PRECIP_HOUR_LIMIT)\n      .find(hourlyForecast => (\n        hourlyForecast.precipProbability >= MIN_CHANCE_OF_RAIN\n      )) || {};\n  }\n\n  render() {\n    const { className } = this.props;\n    const firstRainForecast = this.getFirstRainForecast();\n    const { precipProbability, time } = firstRainForecast;\n\n    return (\n      <div className={classNames(className, 'rain-chance', 'mb-3')}>\n        { precipProbability ? (\n          <>\n            <div className=\"umbrella bring-umbrella\" />\n            <span className=\"pop text-info\">\n              {(precipProbability * 100).toFixed(0)}%\n            </span>\n            <sup className=\"at mx-1\">@</sup>\n            <span className=\"time\">{moment(time * 1000).format('hA')}</span>\n          </>\n        ) : (\n          <>\n            <div className=\"umbrella no-umbrella\" />\n            <div className=\"no-rain\">No rain in 24hr.</div>\n          </>\n        )}\n        <div className=\"text-muted\">\n          Based on a {(MIN_CHANCE_OF_RAIN * 100).toFixed(0)}% chance threshold.\n        </div>\n      </div>\n    );\n  }\n}\n","export const WARNING_AFTER_N_MISSED_CALLS = 2;\n\nexport const MIN_CHANCE_OF_RAIN = 0.30; // 30% chance\n","import React, { PureComponent } from 'react';\nimport { PropTypes as T } from 'prop-types';\nimport classNames from 'classnames';\n\n\n// July 2019: DarkSky's icon mapping is pretty dumb right now:\n// \"The only case where a daily icon will show a *-night value is partly-cloudy-night\"\n\nconst DARK_SKY_ICON_MAP = {\n  'clear-day': 'clear',\n  'clear-night': 'clear',\n  cloudy: 'cloudy',\n  fog: 'fog',\n  'partly-cloudy-day': 'partlycloudy',\n  'partly-cloudy-night': 'partlycloudy',\n  rain: 'rain',\n  sleet: 'sleet',\n  snow: 'snow',\n  wind: 'wind',\n};\n\nexport const getIcon = iconName => (\n  `./images/weather-icons/${DARK_SKY_ICON_MAP[iconName] || 'unknown'}.svg`\n);\n\n\nexport default class WeatherIcon extends PureComponent {\n  static propTypes = {\n    className: T.string,\n    icon: T.string,\n  };\n\n  static defaultProps = {\n    className: '',\n    icon: '',\n  }\n\n  render() {\n    const { className, icon } = this.props;\n\n    if (!icon) { return null; }\n\n    return (\n      <img className={classNames(className)} src={getIcon(icon)} alt=\"\" />\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { PropTypes as T } from 'prop-types';\nimport classNames from 'classnames';\n\nimport LocalStorage, { WEATHER_UNITS_KEY } from 'app/utils/local_storage';\n\nimport WeatherIcon from '../../icon';\n\n\nexport const cToF = celsius => ((celsius * 9) / 5) + 32;\nexport const fToC = fahrenheit => ((fahrenheit - 32) * 5) / 9;\n\n\nexport default class TodaysForecastOverview extends PureComponent {\n  static propTypes = {\n    className: T.string,\n    todaysForecast: T.shape({\n      icon: T.string,\n      summary: T.string,\n      temperatureMin: T.number,\n      temperatureMax: T.number,\n    }),\n  };\n\n  static defaultProps = {\n    className: '',\n    todaysForecast: {},\n  }\n\n  constructor(props) {\n    super(props);\n    this.weatherUnits = LocalStorage.get(WEATHER_UNITS_KEY);\n  }\n\n  getAltHighLow = () => {\n    const { weatherUnits, props } = this;\n    const { temperatureMin, temperatureMax } = props.todaysForecast;\n\n    if (!weatherUnits) { return null; }\n\n    const fn = weatherUnits === 'f' ? fToC : cToF;\n\n    return (\n      <div className=\"high-low-alt text-muted\">\n        {fn(temperatureMin).toFixed(0)}\n        /\n        {fn(temperatureMax).toFixed(0)}\n        &deg;\n        {weatherUnits === 'f' ? 'C' : 'F'}\n      </div>\n    );\n  }\n\n  render() {\n    const { className, todaysForecast } = this.props;\n    const { icon, summary, temperatureMin, temperatureMax } = todaysForecast;\n\n    return (\n      <div\n        className={classNames(\n          className, 'forecast', 'mb-3', 'd-flex', 'align-items-center', 'justify-content-center',\n        )}\n      >\n        <WeatherIcon icon={icon} />\n        <div className=\"text-truncate\">\n          <div className=\"conditions text-truncate\">\n            {summary}\n          </div>\n\n          <div className=\"high-low\">\n            {temperatureMin.toFixed(0)}\n            <span className=\"text-muted px-1\">/</span>\n            {temperatureMax.toFixed(0)}\n            &deg;\n          </div>\n\n          {this.getAltHighLow()}\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { PropTypes as T } from 'prop-types';\nimport classNames from 'classnames';\n\n\nexport default class Alerts extends PureComponent {\n  static propTypes = {\n    className: T.string,\n    alerts: T.arrayOf(\n      T.shape({\n        title: T.string,\n      }),\n    ),\n  };\n\n  static defaultProps = {\n    className: '',\n    alerts: [],\n  }\n\n  render() {\n    const { className, alerts } = this.props;\n\n    if (!alerts.length) { return null; }\n\n    return (\n      <div className={classNames(className, 'alerts')}>\n        <ul>\n          {alerts.map(alert => (\n            <li key={alert.title}>{alert.title}</li>\n          ))}\n        </ul>\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { PropTypes as T } from 'prop-types';\nimport classNames from 'classnames';\n\nimport TodaysRainForecast from './todays_rain_forecast';\nimport TodaysForecastOverview from './todays_forecast_overview';\nimport Alerts from './alerts';\n\n\nexport default class SidePanel extends PureComponent {\n  static propTypes = {\n    className: T.string,\n    dailyForecasts: T.array,\n    hourlyForecasts: T.array,\n    alerts: T.array,\n  };\n\n  static defaultProps = {\n    className: '',\n    dailyForecasts: [],\n    hourlyForecasts: [],\n    alerts: [],\n  }\n\n  render() {\n    const { className, dailyForecasts, hourlyForecasts, alerts } = this.props;\n\n    return (\n      <div className={classNames(className, 'side-panel px-3')}>\n        <TodaysForecastOverview todaysForecast={dailyForecasts[0]} />\n        <TodaysRainForecast hourlyForecasts={hourlyForecasts} />\n        <Alerts alerts={alerts} />\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { PropTypes as T } from 'prop-types';\nimport { Table } from 'reactstrap';\nimport moment from 'moment';\nimport classNames from 'classnames';\n\nimport { MIN_CHANCE_OF_RAIN } from 'app/constants';\n\nimport WeatherIcon from '../icon';\n\n\nexport default class HourlyForecast extends PureComponent {\n  static propTypes = {\n    className: T.string,\n    hourlyForecasts: T.arrayOf(\n      T.shape({\n        time: T.number,\n        temperature: T.number,\n        uvIndex: T.number,\n        humidity: T.number,\n        precipProbability: T.number,\n        apparentTemperature: T.number,\n        icon: T.string,\n        summary: T.string,\n      }),\n    ),\n  };\n\n  static defaultProps = {\n    className: '',\n    hourlyForecasts: [],\n  }\n\n  render() {\n    const { className, hourlyForecasts } = this.props;\n\n    return (\n      <Table className=\"mb-0\">\n        <thead>\n          <tr>\n            <th>Time</th>\n            <th>Condition</th>\n            <th data-toggle=\"tooltip\" title=\"Temp/Feels Like\">Temp/FL</th>\n            <th>UVI</th>\n            <th>POP</th>\n            <th>Humid</th>\n          </tr>\n        </thead>\n        <tbody>\n          {hourlyForecasts.slice(0, 12).map(hourlyForecast => {\n            const {\n              time,\n              temperature,\n              uvIndex,\n              humidity,\n              precipProbability,\n              apparentTemperature,\n              icon,\n              summary,\n            } = hourlyForecast;\n\n            return (\n              <tr key={`hourly-forecast-${time}`}>\n                <td>\n                  {moment(time * 1000).format('hA')}\n                </td>\n                <td>\n                  <WeatherIcon icon={icon} /> {summary}\n                </td>\n                <td>\n                  {temperature.toFixed(0)}/{apparentTemperature.toFixed(0)}&deg;\n                </td>\n                <td>\n                  {uvIndex}\n                </td>\n                <td\n                  className={classNames(\n                    className, { 'text-info': precipProbability >= MIN_CHANCE_OF_RAIN },\n                  )}\n                >\n                  {(precipProbability * 100).toFixed(0)}%\n                </td>\n                <td>\n                  {(humidity * 100).toFixed(0)}%\n                </td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </Table>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { PropTypes as T } from 'prop-types';\nimport { Row, Col } from 'reactstrap';\nimport moment from 'moment';\nimport classNames from 'classnames';\n\nimport WeatherIcon from '../icon';\n\n\nexport default class ThreeDayForecast extends PureComponent {\n  static propTypes = {\n    className: T.string,\n    dailyForecasts: T.arrayOf(\n      T.shape({\n        icon: T.string,\n        summary: T.string,\n        temperatureMin: T.number,\n        temperatureMax: T.number,\n        time: T.number,\n      }),\n    ),\n  };\n\n  static defaultProps = {\n    className: '',\n    dailyForecasts: [],\n  }\n\n  render() {\n    const { className, dailyForecasts } = this.props;\n\n    return (\n      <Row className={classNames(className, 'slim-gutters', 'forecasts')}>\n        {/* gets indexes 1, 2, 3 of the array */}\n        {dailyForecasts.slice(1, 4).map(dailyForecast => {\n          const { summary, temperatureMin, temperatureMax, time, icon } = dailyForecast;\n\n          return (\n            <Col sm=\"4\" key={`daily-forecast-${time}`}>\n              <div className=\"p-3 forecast d-flex align-items-center justify-content-center\">\n                <WeatherIcon icon={icon} />\n                <div className=\"text-truncate\">\n                  <div className=\"conditions text-truncate\">\n                    {summary}\n                  </div>\n                  <div className=\"high-low\">\n                    {temperatureMin.toFixed(0)}\n                    <span className=\"text-muted px-1\">/</span>\n                    {temperatureMax.toFixed(0)}\n                  </div>\n                  <div className=\"date\">\n                    {moment(time * 1000).format('dddd, MMM D')}\n                  </div>\n                </div>\n              </div>\n            </Col>\n          );\n        })}\n      </Row>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { PropTypes as T } from 'prop-types';\nimport { Row, Col, Card, CardHeader, CardBody, CardFooter } from 'reactstrap';\nimport classNames from 'classnames';\nimport moment from 'moment';\n\nimport LocalStorage, { WEATHER_KEY_KEY, WEATHER_UNITS_KEY } from 'app/utils/local_storage';\nimport { WARNING_AFTER_N_MISSED_CALLS } from 'app/constants';\nimport DarkSky from 'app/integrations/darksky';\nimport TimeSinceLastUpdated from 'app/components/time_since_last_updated';\nimport ErrorMessage from 'app/components/error_message';\n\nimport SidePanel from './side_panel';\nimport HourlyForecast from './hourly_forecast';\nimport ThreeDayForecast from './three_day_forecast';\n\n\nexport const CALL_INTERVAL = 15 * 60 * 1000;\nexport const MS_UNTIL_WARNING = CALL_INTERVAL * WARNING_AFTER_N_MISSED_CALLS;\nexport const LOCATIONS = [\n  { readable: 'Bernal Heights', lat: 37.7448205, long: -122.4100494 },\n];\n\nexport default class Weather extends PureComponent {\n  static propTypes = {\n    className: T.string,\n  };\n\n  static defaultProps = {\n    className: '',\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      locations: [],\n      fetchError: false,\n      lastUpdated: undefined,\n      loading: false,\n    };\n  }\n\n  async componentDidMount() {\n    await this.updateWeatherLocations();\n    this.interval = setInterval(this.updateWeatherLocations, CALL_INTERVAL);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n  updateWeatherLocations = async () => {\n    const key = LocalStorage.get(WEATHER_KEY_KEY);\n    const units = LocalStorage.get(WEATHER_UNITS_KEY);\n    try {\n      const locationsResponses = await DarkSky.fetchAllLocationsWeatherData(LOCATIONS, key, units);\n\n      this.setState({ loading: true });\n      this.setState({\n        locations: locationsResponses.map((locationResponse, idx) => {\n          const { hourly, daily, alerts } = locationResponse.data;\n\n          return {\n            dailyForecasts: daily.data,\n            hourlyForecasts: hourly.data,\n            alerts,\n            ...LOCATIONS[idx],\n          };\n        }),\n        lastUpdated: moment(),\n        fetchError: false,\n        loading: false,\n      });\n    } catch (e) {\n      console.error(e);\n      // jsonp makes error handling difficult. just assume it was user error\n      this.setState({\n        fetchError: true,\n        loading: false,\n        lastUpdated: moment(),\n      });\n    }\n  }\n\n  render() {\n    const { className } = this.props;\n    const { locations, lastUpdated, fetchError, loading } = this.state;\n\n    return (\n      <div className={classNames(className, 'weather')}>\n        {fetchError && (\n          <ErrorMessage>\n            Weather request failed. Make sure {'you\\'ve'} supplied an API Key in the{' '}\n            <a href=\"#/settings\">settings</a>.\n          </ErrorMessage>\n        )}\n\n        {locations.map(location => {\n          const {\n            hourlyForecasts,\n            dailyForecasts,\n            alerts,\n            readable,\n            lat,\n            long,\n          } = location;\n\n          return (\n            <Card className=\"mb-2\" key={`${lat},${long}`}>\n              <CardHeader className=\"text-center py-1 text-uppercase\">\n                {readable}\n              </CardHeader>\n\n              <CardBody>\n                <Row className=\"slim-gutters\">\n                  <Col md=\"5\">\n                    <SidePanel\n                      dailyForecasts={dailyForecasts}\n                      hourlyForecasts={hourlyForecasts}\n                      alerts={alerts}\n                    />\n                  </Col>\n                  <Col md=\"7\">\n                    <HourlyForecast\n                      hourlyForecasts={hourlyForecasts}\n                    />\n                  </Col>\n                </Row>\n              </CardBody>\n              <CardFooter className=\"bg-transparent py-0\">\n                <ThreeDayForecast dailyForecasts={dailyForecasts} />\n              </CardFooter>\n            </Card>\n          );\n        })}\n\n        <div className=\"d-flex justify-content-end\">\n          <TimeSinceLastUpdated\n            lastUpdated={lastUpdated}\n            msUntilWarning={MS_UNTIL_WARNING}\n            loading={loading}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { PropTypes as T } from 'prop-types';\nimport { Row, Col } from 'reactstrap';\nimport moment from 'moment';\nimport 'moment-precise-range-plugin';\nimport classNames from 'classnames';\n\n\nexport const INTERVAL_MS = 1000;\n\nexport default class CurrentDateTimeHeader extends PureComponent {\n  static propTypes = {\n    className: T.string,\n  };\n\n  static defaultProps = {\n    className: '',\n  }\n\n  componentDidMount() {\n    this.interval = setInterval(() => this.forceUpdate(), INTERVAL_MS);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n  render() {\n    const { className } = this.props;\n\n    const now = moment();\n    const date = now.format('MMMM Do, YYYY');\n    const time = now.format('h:mm');\n\n    return (\n      <Row className={classNames(className, 'current-time', 'py-3', 'py-md-1', 'align-items-baseline')}>\n        <Col xs=\"6\" className=\"time\">\n          {time}\n        </Col>\n        <Col xs=\"6\" className=\"date\">\n          {date}\n        </Col>\n      </Row>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { PropTypes as T } from 'prop-types';\nimport { Row, Col } from 'reactstrap';\nimport classNames from 'classnames';\n\nimport Bus from 'app/components/bus';\nimport Weather from 'app/components/weather';\n\nimport CurrentDateTimeHeader from './current_datetime_header';\n\n\nexport default class MainPage extends PureComponent {\n  static propTypes = {\n    className: T.string,\n  };\n\n  static defaultProps = {\n    className: '',\n  }\n\n  render() {\n    const { className } = this.props;\n\n    return (\n      <div className={classNames(className)}>\n        <CurrentDateTimeHeader />\n        <Row className=\"slim-gutters\">\n          <Col lg=\"5\" className=\"mb-4\">\n            <Bus />\n          </Col>\n          <Col lg=\"7\" className=\"mb-4\">\n            <Weather />\n          </Col>\n        </Row>\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { PropTypes as T } from 'prop-types';\nimport { Button, ButtonGroup, Label } from 'reactstrap';\nimport classNames from 'classnames';\n\nimport LocalStorage, { HTML_CLASS_KEY } from 'app/utils/local_storage';\n\n\nexport const MODES = {\n  DARK: 'dark-mode',\n  LIGHT: 'light-mode',\n};\n\nexport default class DarkLightModeSelector extends PureComponent {\n  static propTypes = {\n    className: T.string,\n  };\n\n  static defaultProps = {\n    className: '',\n  }\n\n  constructor(props) {\n    super(props);\n    this.setMode = this.setMode.bind(this);\n  }\n\n  setMode = mode => {\n    document.documentElement.className = mode;\n    LocalStorage.set(HTML_CLASS_KEY, mode);\n    // this is because we aren't using state to determine if we are in dark mode\n    this.forceUpdate();\n  }\n\n  isDarkModeSelected = () => (\n    document.documentElement.className === MODES.DARK\n  )\n\n  render() {\n    const { className } = this.props;\n\n    const isDarkModeSelected = this.isDarkModeSelected();\n\n    return (\n      <>\n        <Label className=\"mr-2\">Theme:</Label>\n        <ButtonGroup className={classNames(className)}>\n          <Button\n            onClick={() => this.setMode(MODES.DARK)}\n            color={isDarkModeSelected ? 'primary' : 'secondary'}\n          >\n            Dark\n          </Button>\n          <Button\n            onClick={() => this.setMode(MODES.LIGHT)}\n            color={isDarkModeSelected ? 'secondary' : 'primary'}\n          >\n            Light\n          </Button>\n        </ButtonGroup>\n      </>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { PropTypes as T } from 'prop-types';\nimport classNames from 'classnames';\nimport { Button } from 'reactstrap';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nimport { monokai } from 'react-syntax-highlighter/dist/cjs/styles/hljs';\n\nimport LocalStorage, { ALL_SETTINGS_KEYS } from 'app/utils/local_storage';\n\n\nexport default class DisplayLocalStorageData extends PureComponent {\n  static propTypes = {\n    className: T.string,\n    localStorageKey: T.oneOf(ALL_SETTINGS_KEYS).isRequired,\n  };\n\n  static defaultProps = {\n    className: '',\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      show: false,\n    };\n  }\n\n  componentDidMount() {\n    window.addEventListener('storage', this.rerender);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('storage', this.rerender);\n  }\n\n  // this only exists for the event listeners above to have a single fn to point to\n  rerender = () => this.forceUpdate();\n\n  getLocalStorageData = key => (\n    LocalStorage.get(key)\n  )\n\n  toggleShow = () => {\n    const { show } = this.state;\n    this.setState({ show: !show });\n  }\n\n  render() {\n    const { className, localStorageKey } = this.props;\n    const { show } = this.state;\n    const codeString = JSON.stringify(this.getLocalStorageData(localStorageKey));\n\n    return (\n      <div className={classNames(className)}>\n        <p>\n          <Button color=\"primary\" onClick={this.toggleShow}>\n            {!show ? 'Show' : 'Hide'} LocalStorage Data\n          </Button>\n        </p>\n        <p className=\"small\">JSON representation of the stored data.</p>\n        {show && (\n          <SyntaxHighlighter language=\"json\" style={monokai} className=\"my-3\">\n            {codeString}\n          </SyntaxHighlighter>\n        )}\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { PropTypes as T } from 'prop-types';\nimport classNames from 'classnames';\nimport { Button } from 'reactstrap';\n\nimport LocalStorage, { SAMPLE_DATA } from 'app/utils/local_storage';\n\n\nexport default class SetSampleLocalStorageData extends PureComponent {\n  static propTypes = {\n    className: T.string,\n    localStorageKey: T.oneOf(Object.keys(SAMPLE_DATA)).isRequired,\n  };\n\n  static defaultProps = {\n    className: '',\n  }\n\n  setSampleData = () => {\n    const { localStorageKey } = this.props;\n    LocalStorage.setSampleData(localStorageKey);\n  }\n\n  render() {\n    const { className } = this.props;\n\n    return (\n      <div className={classNames(className)}>\n        <p>\n          <Button color=\"primary\" onClick={this.setSampleData}>\n            Set Sample LocalStorage Data\n          </Button>\n        </p>\n        <p className=\"small\">Replace stored data with sample data.</p>\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { PropTypes as T } from 'prop-types';\nimport {\n  Row,\n  Col,\n  Card,\n  CardHeader,\n  CardBody,\n  Form,\n  FormGroup,\n  Label,\n  Input,\n  ButtonGroup,\n  Button,\n} from 'reactstrap';\nimport classNames from 'classnames';\n\nimport LocalStorage, {\n  BUS_ROUTE_STOP_TAGS_KEY,\n  WEATHER_KEY_KEY,\n  WEATHER_UNITS_KEY,\n} from 'app/utils/local_storage';\nimport DarkSky from 'app/integrations/darksky';\n\nimport DarkLightModeSelector from './dark_light_mode_selector';\nimport DisplayLocalStorageData from './display_local_storage_data';\nimport SetSampleLocalStorageData from './set_sample_local_storage_data';\n\n\nexport default class Settings extends PureComponent {\n  static propTypes = {\n    className: T.string,\n  };\n\n  static defaultProps = {\n    className: '',\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = this.getInitialState();\n  }\n\n  getInitialState = () => ({\n    weatherKeyIsValid: undefined,\n    weatherKeyValue: LocalStorage.get(WEATHER_KEY_KEY),\n    weatherUnits: LocalStorage.get(WEATHER_UNITS_KEY),\n  })\n\n  onWeatherKeyChange = event => {\n    this.setState({ weatherKeyValue: event.target.value });\n  }\n\n  validateAndSetKey = async event => {\n    event.preventDefault();\n    const { weatherKeyValue } = this.state;\n\n    try {\n      if (await DarkSky.isValidKey(weatherKeyValue)) {\n        this.setState({ weatherKeyIsValid: true });\n        LocalStorage.set(WEATHER_KEY_KEY, weatherKeyValue);\n        return;\n      }\n      this.setState({ weatherKeyIsValid: false });\n    } catch (e) {\n      this.setState({ weatherKeyIsValid: false });\n    }\n  }\n\n  setWeatherUnits = units => {\n    this.setState({ weatherUnits: units });\n    LocalStorage.set(WEATHER_UNITS_KEY, units);\n  }\n\n  dumpLocalStorageAndResetState = () => {\n    this.setState(this.getInitialState());\n    LocalStorage.dump();\n  }\n\n  render() {\n    const { className } = this.props;\n    const { weatherKeyIsValid, weatherKeyValue, weatherUnits } = this.state;\n\n    return (\n      <div className={classNames(className)}>\n        <h1>Settings</h1>\n\n        <Row>\n          <Col xs=\"6\">\n            <Card className=\"mb-4\">\n              <CardHeader>\n                <h3 className=\"m-0\">Global</h3>\n              </CardHeader>\n              <CardBody>\n                <DarkLightModeSelector />\n\n                <hr />\n\n                <p>\n                  <Button\n                    color=\"danger\"\n                    onClick={this.dumpLocalStorageAndResetState}\n                  >\n                    Dump All Local Storage\n                  </Button>\n                </p>\n                <p className=\"small\">\n                  This will remove stored bus stops, your DarkSky key, and the weather units.\n                </p>\n              </CardBody>\n            </Card>\n          </Col>\n        </Row>\n\n        <Row>\n          <Col xs=\"6\">\n            <Card className=\"mb-4\">\n              <CardHeader>\n                <h3 className=\"m-0\">Bus</h3>\n              </CardHeader>\n              <CardBody>\n                <DisplayLocalStorageData localStorageKey={BUS_ROUTE_STOP_TAGS_KEY} />\n\n                <hr />\n\n                <SetSampleLocalStorageData localStorageKey={BUS_ROUTE_STOP_TAGS_KEY} />\n              </CardBody>\n            </Card>\n          </Col>\n\n          <Col xs=\"6\">\n            <Card className=\"mb-4\">\n              <CardHeader>\n                <h3 className=\"m-0\">Weather</h3>\n              </CardHeader>\n              <CardBody>\n                <Form onSubmit={this.validateAndSetKey}>\n                  <FormGroup>\n                    <Label for=\"weather-key\">DarkSky API Key:</Label>\n                    <Input\n                      type=\"text\"\n                      id=\"weather-key\"\n                      className={classNames(\n                        {\n                          'is-valid': weatherKeyIsValid,\n                          'is-invalid': weatherKeyIsValid === false,\n                        },\n                      )}\n                      onChange={this.onWeatherKeyChange}\n                      value={weatherKeyValue}\n                    />\n                  </FormGroup>\n                  <Button color=\"primary\" type=\"submit\">Validate & Store Key</Button>\n                </Form>\n\n                <hr />\n\n                <FormGroup>\n                  <Label className=\"mr-2\">Weather Units:</Label>\n                  <ButtonGroup>\n                    <Button\n                      color={weatherUnits === '' ? 'primary' : 'secondary'}\n                      onClick={() => this.setWeatherUnits('')}\n                    >\n                      Auto\n                    </Button>\n                    <Button\n                      color={weatherUnits === 'f' ? 'primary' : 'secondary'}\n                      onClick={() => this.setWeatherUnits('f')}\n                    >\n                      F\n                    </Button>\n                    <Button\n                      color={weatherUnits === 'c' ? 'primary' : 'secondary'}\n                      onClick={() => this.setWeatherUnits('c')}\n                    >\n                      C\n                    </Button>\n                  </ButtonGroup>\n                </FormGroup>\n              </CardBody>\n            </Card>\n          </Col>\n        </Row>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { HashRouter, Switch, Route } from 'react-router-dom';\nimport { Container } from 'reactstrap';\n\nimport MainNav from 'app/components/main_nav';\nimport MainPage from 'app/components/main_page';\nimport SettingsPage from 'app/components/settings_page';\n\n\nexport default function App() {\n  return (\n    <HashRouter>\n      <Container>\n        <MainNav />\n\n        <Switch>\n          <Route path=\"/settings\">\n            <SettingsPage />\n          </Route>\n          <Route path=\"/\">\n            <MainPage />\n          </Route>\n        </Switch>\n      </Container>\n    </HashRouter>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './styles/index.scss';\n\nimport App from 'app';\n\n\nconst DOM_ID = 'react-app';\n\nReactDOM.render(\n  <App />,\n  document.getElementById(DOM_ID),\n);\n"],"sourceRoot":""}