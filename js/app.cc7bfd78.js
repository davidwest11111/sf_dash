!function(e){function t(t){for(var a,c,s=t[0],l=t[1],i=t[2],p=0,f=[];p<s.length;p++)c=s[p],Object.prototype.hasOwnProperty.call(n,c)&&n[c]&&f.push(n[c][0]),n[c]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(u&&u(t);f.length;)f.shift()();return o.push.apply(o,i||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],a=!0,s=1;s<r.length;s++){var l=r[s];0!==n[l]&&(a=!1)}a&&(o.splice(t--,1),e=c(c.s=r[0]))}return e}var a={},n={0:0},o=[];function c(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=a,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(r,a,function(t){return e[t]}.bind(null,a));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var i=0;i<s.length;i++)t(s[i]);var u=l;o.push([390,1]),r()}({390:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(29),c=r.n(o),s=(r(71),r(26)),l=r(24),i=r(410),u=r(6),p=r.n(u),f=r(7),m=r.n(f),d=r(9),y=r.n(d),h=r(10),v=r.n(h),g=r(4),E=r.n(g),P=r(2),R=r.n(P),N=r(1),S=r(3),T=r.n(S);function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var w=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(b()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props.className;return n.a.createElement("div",{className:T()(e,"header")},n.a.createElement(s.b,{to:"/"},n.a.createElement("span",{className:"fas fa-home"})),n.a.createElement(s.b,{to:"/settings"},n.a.createElement("span",{className:"fas fa-cog"})))}}]),a}(a.PureComponent);R()(w,"propTypes",{className:N.PropTypes.string}),R()(w,"defaultProps",{className:""});var k=r(395),x=r(396),D=r(13),F=r.n(D),O=r(16),C=r.n(O),A=r(12),M=r.n(A),L=r(392),U=r(393),_=r(34),I=r.n(_),B="weatherKey",j="weatherUnits",W="routeStopTags",K="htmlClass",V=[B,j,W,K].reduce((function(e,t){return[].concat(I()(e),[t,"".concat("ngStorage-").concat(t)])}),[]),q=R()({},W,["14|5565","67|6208","27|3930","12|7552"]),J=function(){function e(){p()(this,e)}return m()(e,null,[{key:"get",value:function(e){return JSON.parse(window.localStorage.getItem(e)||window.localStorage.getItem("".concat("ngStorage-").concat(e)))||""}},{key:"set",value:function(e,t){window.localStorage.setItem(e,JSON.stringify(t)),window.dispatchEvent(new Event("storage"))}},{key:"setSampleData",value:function(e){this.set(e,q[e])}},{key:"dump",value:function(){V.forEach((function(e){return window.localStorage.removeItem(e)}))}},{key:"getBusStopsFromLocalStorage",value:function(){return this.get(W)||[]}},{key:"addBusStopToLocalStorage",value:function(e){var t=this.getBusStopsFromLocalStorage();this.set(W,I()(new Set([].concat(I()(t),[e]))))}},{key:"removeBusStopFromLocalStorage",value:function(e){var t=this.getBusStopsFromLocalStorage();this.set(W,t.filter((function(t){return t!==e})))}}]),e}(),H=r(31),X=r.n(H),z=r(25),G=r.n(z),Q=r(41),Y=r.n(Q),Z=r(61),$=r.n(Z),ee="http://webservices.nextbus.com/service/publicXMLFeed",te=function(e){return new Promise((function(t,r){navigator.geolocation.getCurrentPosition(t,r,e)}))},re=function(){function e(){p()(this,e)}var t,r,a,n;return m()(e,null,[{key:"getPredictions",value:(n=C()(F.a.mark((function e(t){var r,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.get(ee,{params:{command:"predictionsForMultiStops",a:"sf-muni",stops:t,useShortTitles:!0},paramsSerializer:function(e){return $.a.stringify(e,{arrayFormat:"repeat"})}});case 2:return r=e.sent,a=this.parsePredictionsXMLResponse(r.data),e.abrupt("return",new Promise((function(e,t){var r,n,o=null==a||null===(r=a.body)||void 0===r||null===(n=r.Error)||void 0===n?void 0:n.__text;o&&t(new Error(o)),e(a)})));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getRouteConfig",value:(a=C()(F.a.mark((function e(){var t,r,a=this;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.get(ee,{params:{command:"routeConfig",a:"sf-muni",useShortTitles:!0}});case 2:return t=e.sent,r=this.parseRouteConfigXMLResponse(t.data),e.abrupt("return",new Promise((function(e,t){var n,o,c=null==r||null===(n=r.body)||void 0===n||null===(o=n.Error)||void 0===o?void 0:o.__text;c&&t(new Error(c)),e(a.mergeRouteData(r.body.route))})));case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getStopsNearMe",value:(r=C()(F.a.mark((function e(t){var r,a,n,o,c,s;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.all([te(),this.getRouteConfig()]);case 2:return r=e.sent,a=X()(r,2),n=a[0],o=a[1],c=new google.maps.LatLng(n.coords.latitude,n.coords.longitude),s=[],o.forEach((function(e){e.direction.forEach((function(r){r.stop.forEach((function(a){var n=new google.maps.LatLng(a._lat,a._lon);google.maps.geometry.spherical.computeDistanceBetween(c,n)<=t&&s.push({tag:e._tag,title:e._title,directionName:r._name,directionTitle:r._title,latLng:n,stopId:a._stopId,stopTag:a._tag,stopTitle:a._title})}))}))})),e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"isValidStop",value:(t=C()(F.a.mark((function e(t){var r,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getPredictions([t]);case 3:return a=e.sent,e.abrupt("return",!!(null==a||null===(r=a.body)||void 0===r?void 0:r.predictions));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return t.apply(this,arguments)})},{key:"parsePredictionsXMLResponse",value:function(e){return new Y.a({arrayAccessFormPaths:["body.predictions","body.predictions.direction.prediction"]}).xml2js(e)}},{key:"parseRouteConfigXMLResponse",value:function(e){return new Y.a({arrayAccessFormPaths:["body.route"]}).xml2js(e)}},{key:"getRouteStopTag",value:function(e,t){return"".concat(e,"|").concat(t)}},{key:"splitRouteStopTag",value:function(e){return e.split("|")}}]),e}();R()(re,"mergeRouteData",(function(e){return e.forEach((function(e){var t={};e.stop.forEach((function(e){t[e._tag]=e})),e.direction.forEach((function(e){e.stop.forEach((function(r,a){e.stop[a]=t[r._tag]}))}))})),e}));var ae=r(412),ne=r(62);function oe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ce=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(oe()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.loading,a=e.small;return r?n.a.createElement("div",{className:T()(t,"spinner",{"spinner-small":a})},n.a.createElement("div",{className:"bounce1"}),n.a.createElement("div",{className:"bounce2"}),n.a.createElement("div",{className:"bounce3"})):null}}]),a}(a.PureComponent);function se(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}R()(ce,"propTypes",{className:N.PropTypes.string,loading:N.PropTypes.bool,small:N.PropTypes.bool}),R()(ce,"defaultProps",{className:"",loading:!1,small:!1});var le=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(se()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){var e;p()(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=r.call.apply(r,[this].concat(n)),R()(M()(e),"getReadableTime",(function(){var t=e.props.lastUpdated,r=Object(ae.a)(t,new Date,{roundingMethod:"round"});return"0 seconds"===r?"Just now.":"".concat(r," ago.")})),R()(M()(e),"isOverdue",(function(){var t=e.props,r=t.lastUpdated,a=t.msUntilWarning;return!!r&&Object(ne.a)(new Date,r)>=a})),e}return m()(a,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){return e.forceUpdate()}),250)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.lastUpdated,a=e.loading,o=this.isOverdue();return n.a.createElement("div",{className:T()(t,"time-since-last-updated")},n.a.createElement("span",{className:T()({overdue:o})},r&&this.getReadableTime()),n.a.createElement(ce,{className:"my-1 ml-auto",loading:a,small:!0}))}}]),a}(a.PureComponent);function ie(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}R()(le,"propTypes",{className:N.PropTypes.string,lastUpdated:N.PropTypes.object,msUntilWarning:N.PropTypes.number,loading:N.PropTypes.bool}),R()(le,"defaultProps",{className:"",lastUpdated:null,msUntilWarning:6e4,loading:!1});var ue=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(ie()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.children;return r?n.a.createElement("div",{className:T()(t,"error-message")},n.a.createElement("span",{className:"fas fa-exclamation-circle mr-1"}),n.a.createElement("span",null,r)):null}}]),a}(a.PureComponent);function pe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}R()(ue,"propTypes",{className:N.PropTypes.string,children:N.PropTypes.node}),R()(ue,"defaultProps",{className:""});var fe=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(pe()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.prediction,a=r.direction,o=r._dirTitleBecauseNoPredictions,c=r._stopTitle;return n.a.createElement("div",{className:T()(t)},n.a.createElement("div",{className:"font-weight-bold"},(null==a?void 0:a._title)||o),n.a.createElement("div",null,"@",c))}}]),a}(a.PureComponent);function me(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}R()(fe,"propTypes",{className:N.PropTypes.string,prediction:N.PropTypes.shape({direction:N.PropTypes.shape({_title:N.PropTypes.string}),_stopTitle:N.PropTypes.string,_dirTitleBecauseNoPredictions:N.PropTypes.string})}),R()(fe,"defaultProps",{className:"",prediction:{}});var de=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(me()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.predictionTimes;return n.a.createElement("div",{className:T()(t,"prediction-times")},r.length?n.a.createElement(n.a.Fragment,null,r.slice(0,4).map((function(e,t){return n.a.createElement("span",{key:"".concat(e._tripTag)},n.a.createElement("span",{className:T()("prediction-time",{"not-affected-by-layover":!e._affectedByLayover,"next-time":0===t,"other-time":0!==t})},"0"===e._minutes?"Now":e._minutes),t!==r.length-1&&", ")}))):n.a.createElement("span",{className:"no-prediction-time"},"None"))}}]),a}(a.PureComponent);function ye(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}R()(de,"propTypes",{className:N.PropTypes.string,predictionTimes:N.PropTypes.arrayOf(N.PropTypes.shape({_tripTag:N.PropTypes.string,_affectedByLayover:N.PropTypes.string,_minutes:N.PropTypes.string}))}),R()(de,"defaultProps",{className:"",predictionTimes:[]});var he=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(ye()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.routeTag,a=e.children;return n.a.createElement(L.a,{className:T()(t,"mb-2")},n.a.createElement(U.a,{className:"d-flex align-items-center justify-content-between"},n.a.createElement("div",{className:"route-tag"},r),n.a.createElement("div",{className:"route-tag-details"},a)))}}]),a}(a.PureComponent);function ve(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}R()(he,"propTypes",{className:N.PropTypes.string,routeTag:N.PropTypes.string.isRequired,children:N.PropTypes.node.isRequired}),R()(he,"defaultProps",{className:""});var ge=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(ve()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.predictions;return n.a.createElement("div",{className:T()(t)},r.map((function(e){var t=e._routeTag,r=e._stopTag,a=e.direction;return n.a.createElement(he,{routeTag:t,key:"".concat(t,"-").concat(r)},n.a.createElement(de,{predictionTimes:null==a?void 0:a.prediction}),n.a.createElement(fe,{prediction:e}))})))}}]),a}(a.PureComponent);R()(ge,"propTypes",{className:N.PropTypes.string,predictions:N.PropTypes.arrayOf(N.PropTypes.shape({_routeTag:N.PropTypes.string,_stopTag:N.PropTypes.string,direction:N.PropTypes.shape({prediction:N.PropTypes.arrayOf(N.PropTypes.shape({_tripTag:N.PropTypes.string,_affectedByLayover:N.PropTypes.string,_minutes:N.PropTypes.string}))})}))}),R()(ge,"defaultProps",{className:"",predictions:[]});var Ee=r(402),Pe=r(403),Re=r(404),Ne=r(405),Se=r(406),Te=r(394),be=r(397),we=r(398),ke=r(399),xe=r(400);function De(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Fe=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(De()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(e){var t;return p()(this,a),t=r.call(this,e),R()(M()(t),"onChange",(function(e,r){t.setState(R()({},r,e.target.value))})),R()(M()(t),"validateAndAddStop",function(){var e=C()(F.a.mark((function e(r){var a,n,o,c,s;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),a=t.props.onAddOrRemoveStop,n=t.state,o=n.routeTag,c=n.stopTag,s=re.getRouteStopTag(o,c),t.setState({stopIsValid:void 0}),e.next=7,re.isValidStop(s);case 7:if(!e.sent){e.next=12;break}return t.setState({stopIsValid:!0}),J.addBusStopToLocalStorage(s),a(),e.abrupt("return");case 12:t.setState({stopIsValid:!1});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.state={routeTag:"",stopTag:"",stopIsValid:void 0},t}return m()(a,[{key:"render",value:function(){var e=this,t=this.props.className,r=this.state,a=r.routeTag,o=r.stopTag,c=r.stopIsValid;return n.a.createElement(Te.a,{onSubmit:this.validateAndAddStop,className:T()(t)},n.a.createElement(k.a,null,n.a.createElement(x.a,{xs:"6"},n.a.createElement(be.a,null,n.a.createElement(we.a,{for:"manual-add-route-tag"},"Route Tag:"),n.a.createElement(ke.a,{type:"text",id:"manual-add-route-tag",className:T()({"is-valid":c,"is-invalid":!1===c}),onChange:function(t){return e.onChange(t,"routeTag")},placeholder:"12",value:a}))),n.a.createElement(x.a,{xs:"6"},n.a.createElement(be.a,null,n.a.createElement(we.a,{for:"manual-add-route-stop"},"Stop Tag:"),n.a.createElement(ke.a,{type:"text",id:"manual-add-route-stop",className:T()({"is-valid":c,"is-invalid":!1===c}),onChange:function(t){return e.onChange(t,"stopTag")},placeholder:"5837",value:o})))),n.a.createElement("div",null,n.a.createElement(xe.a,{color:"primary",type:"submit"},"Validate & Add Stop")))}}]),a}(a.PureComponent);R()(Fe,"propTypes",{className:N.PropTypes.string,onAddOrRemoveStop:N.PropTypes.func.isRequired}),R()(Fe,"defaultProps",{className:""});var Oe=r(414),Ce=r(401);function Ae(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Me=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(Ae()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(e){var t;return p()(this,a),t=r.call(this,e),R()(M()(t),"getNearbyStops",function(){var e=C()(F.a.mark((function e(r){var a,n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.target.value){e.next=3;break}return e.abrupt("return");case 3:return t.setState({loading:!0}),e.prev=4,e.next=7,re.getStopsNearMe(a);case 7:n=e.sent,t.setState({loading:!1,errMsg:void 0,nearbyStops:n}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.error(e.t0.message),t.setState({loading:!1,errMsg:e.t0.message});case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}()),R()(M()(t),"addStop",(function(e){var r=t.props.onAddOrRemoveStop;J.addBusStopToLocalStorage(e),r()})),t.state={loading:!1,errMsg:void 0,nearbyStops:[]},t}return m()(a,[{key:"render",value:function(){var e=this,t=this.props.className,r=this.state,a=r.loading,o=r.errMsg,c=r.nearbyStops;return n.a.createElement(n.a.Fragment,null,n.a.createElement(Oe.a,{color:"danger",fade:!1},"Warning: This ","won't"," work if this app is hosted on http. See"," ",n.a.createElement("a",{href:"https://developers.google.com/web/updates/2016/04/geolocation-on-secure-contexts-only",target:"_blank",rel:"noopener noreferrer"},"Geolocation API Removed from Unsecured Origins in Chrome 50"),". However, hosting this app on https causes a Mixed Content issue (https site requesting ","NextBus's"," http-only traffic)."),n.a.createElement(Te.a,{className:T()(t,"mb-2"),inline:!0},n.a.createElement(we.a,{className:"mr-2"},"Find stops within"),n.a.createElement(ke.a,{type:"select",onChange:this.getNearbyStops},n.a.createElement("option",{value:""},"--Choose One--"),n.a.createElement("option",{value:"322"},"1/5 mile"),n.a.createElement("option",{value:"402"},"1/4 mile"),n.a.createElement("option",{value:"804"},"1/2 mile")),n.a.createElement(ce,{className:"ml-3",loading:a})),n.a.createElement(ue,null,o),!!c.length&&n.a.createElement(Ce.a,{striped:!0,hover:!0,className:"mt-4"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Route"),n.a.createElement("th",null,"Direction"),n.a.createElement("th",null,"Stop"))),n.a.createElement("tbody",null,c.map((function(t){var r=t.tag,a=t.stopTag,o=t.title,c=t.directionTitle,s=t.stopTitle,l=re.getRouteStopTag(r,a);return n.a.createElement("tr",{className:"clickable",key:l,onClick:function(){return e.addStop(l)}},n.a.createElement("td",null,o),n.a.createElement("td",null,c),n.a.createElement("td",null,s))})))))}}]),a}(a.PureComponent);function Le(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}R()(Me,"propTypes",{className:N.PropTypes.string,onAddOrRemoveStop:N.PropTypes.func.isRequired}),R()(Me,"defaultProps",{className:""});var Ue=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(Le()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(e){var t;return p()(this,a),t=r.call(this,e),R()(M()(t),"toggle",(function(e){t.state.activeTab!==e&&t.setState({activeTab:e})})),t.state={activeTab:"1"},t}return m()(a,[{key:"render",value:function(){var e=this,t=this.props,r=t.className,a=t.toggleAddStopForm,o=t.onAddOrRemoveStop,c=this.state.activeTab;return n.a.createElement("div",{className:T()(r,"add-form","mb-2")},n.a.createElement(Ee.a,{tabs:!0},n.a.createElement(Pe.a,null,n.a.createElement(Re.a,{className:T()("clickable",{active:"1"===c}),onClick:function(){return e.toggle("1")}},"Geolocation")),n.a.createElement(Pe.a,null,n.a.createElement(Re.a,{className:T()("clickable",{active:"2"===c}),onClick:function(){return e.toggle("2")}},"Manual Input")),n.a.createElement("button",{type:"button",className:"btn close-form",onClick:a},n.a.createElement("span",{className:"fas fa-times"}))),n.a.createElement(Ne.a,{activeTab:c},n.a.createElement(Se.a,{tabId:"1"},n.a.createElement(Me,{onAddOrRemoveStop:o})),n.a.createElement(Se.a,{tabId:"2"},n.a.createElement(Fe,{onAddOrRemoveStop:o}))))}}]),a}(a.PureComponent);R()(Ue,"propTypes",{className:N.PropTypes.string,toggleAddStopForm:N.PropTypes.func.isRequired,onAddOrRemoveStop:N.PropTypes.func.isRequired}),R()(Ue,"defaultProps",{className:""});var _e=r(23),Ie=r.n(_e);function Be(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var je={className:"mr-1",size:"xs",color:"secondary",outline:!0},We=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(Be()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.showBusRemove,a=e.toggleShowBusRemove,o=e.toggleAddStopForm,c=J.getBusStopsFromLocalStorage();return n.a.createElement("div",{className:T()(t,"mb-2")},!r&&n.a.createElement(xe.a,Ie()({},je,{onClick:o}),n.a.createElement("span",{className:"fas fa-plus"})),!!c.length&&n.a.createElement(xe.a,Ie()({},je,{onClick:a}),n.a.createElement("span",{className:"fas fa-pen"})))}}]),a}(a.PureComponent);function Ke(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}R()(We,"propTypes",{className:N.PropTypes.string,showBusRemove:N.PropTypes.bool.isRequired,toggleShowBusRemove:N.PropTypes.func.isRequired,toggleAddStopForm:N.PropTypes.func.isRequired}),R()(We,"defaultProps",{className:""});var Ve=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(Ke()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){var e;p()(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=r.call.apply(r,[this].concat(n)),R()(M()(e),"removeStop",(function(t,r){var a=re.getRouteStopTag(t,r),n=e.props.onAddOrRemoveStop;J.removeBusStopFromLocalStorage(a),n(),e.forceUpdate()})),e}return m()(a,[{key:"render",value:function(){var e=this,t=this.props.className,r=J.getBusStopsFromLocalStorage();return n.a.createElement("div",{className:T()(t)},r.map((function(t){var r=re.splitRouteStopTag(t),a=X()(r,2),o=a[0],c=a[1];return n.a.createElement(he,{routeTag:o,key:t},n.a.createElement(xe.a,{color:"danger",size:"lg",onClick:function(){return e.removeStop(o,c)}},"Remove Stop"))})))}}]),a}(a.PureComponent);function qe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}R()(Ve,"propTypes",{className:N.PropTypes.string,onAddOrRemoveStop:N.PropTypes.func.isRequired});var Je=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];return t.forEach((function(t){var a="".concat(t._routeTag,"|").concat(t._stopTag);r[e.indexOf(a)]=t})),r},He=function(e){y()(o,e);var t,r,a=(t=o,function(){var e,r=E()(t);if(qe()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function o(e){var t;return p()(this,o),t=a.call(this,e),R()(M()(t),"toggleAddStopForm",(function(){var e=t.state.showAddStopForm;t.setState({showAddStopForm:!e})})),R()(M()(t),"onAddOrRemoveStop",C()(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return clearInterval(t.interval),e.next=3,t.updateBusPredictions();case 3:t.interval=setInterval(t.updateBusPredictions,1e4);case 4:case"end":return e.stop()}}),e)})))),R()(M()(t),"toggleShowBusRemove",(function(){var e=t.state.showBusRemove;t.setState({showBusRemove:!e})})),R()(M()(t),"updateBusPredictions",C()(F.a.mark((function e(){var r,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=J.getBusStopsFromLocalStorage()).length){e.next=3;break}return e.abrupt("return");case 3:return t.setState({loading:!0}),e.prev=4,e.next=7,re.getPredictions(r);case 7:a=e.sent,t.setState({predictions:Je(r,a.body.predictions),loading:!1,lastUpdated:new Date,errMsg:void 0}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.error(e.t0.message),t.setState({loading:!1,errMsg:e.t0.message});case 15:case"end":return e.stop()}}),e,null,[[4,11]])})))),t.state={predictions:[],lastUpdated:void 0,showAddStopForm:!1,showBusRemove:!1,loading:!1,errMsg:void 0},t}return m()(o,[{key:"componentDidMount",value:(r=C()(F.a.mark((function e(){var t=this;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateBusPredictions();case 2:this.interval=setInterval((function(){return t.updateBusPredictions()}),1e4);case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props.className,t=this.state,r=t.predictions,a=t.lastUpdated,o=t.showAddStopForm,c=t.showBusRemove,s=t.loading,l=t.errMsg;return n.a.createElement("div",{className:T()(e,"bus")},!l&&!r.length&&n.a.createElement(L.a,{className:"mb-2"},n.a.createElement(U.a,null,"No bus stops added.")),c?n.a.createElement(Ve,{onAddOrRemoveStop:this.onAddOrRemoveStop}):n.a.createElement(ge,{predictions:r}),o&&n.a.createElement(Ue,{toggleAddStopForm:this.toggleAddStopForm,onAddOrRemoveStop:this.onAddOrRemoveStop}),!o&&n.a.createElement("div",{className:"d-flex align-items-start justify-content-between"},n.a.createElement(We,{toggleAddStopForm:this.toggleAddStopForm,showBusRemove:c,toggleShowBusRemove:this.toggleShowBusRemove}),n.a.createElement(le,{lastUpdated:a,msUntilWarning:2e4,loading:s})),n.a.createElement(ue,null,l))}}]),o}(a.PureComponent);R()(He,"propTypes",{className:N.PropTypes.string}),R()(He,"defaultProps",{className:""});var Xe=r(407),ze=r(408),Ge=r(63),Qe=r.n(Ge),Ye=function(){function e(){p()(this,e)}var t,r;return m()(e,null,[{key:"fetchWeatherData",value:(r=C()(F.a.mark((function e(t){var r,a,n,o,c;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.lat,a=t.long,n=t.key,o=t.units,e.next=3,G.a.get(this.getUrl({lat:r,long:a,key:n,units:o}),{adapter:Qe.a});case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"fetchAllLocationsWeatherData",value:(t=C()(F.a.mark((function e(t,r,a){var n,o,c=this;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.convertUnitsForDarkSky(a),e.next=3,G.a.all(t.map((function(e){var t=e.lat,a=e.long;return c.fetchWeatherData({lat:t,long:a,key:r,units:n})})));case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e,this)}))),function(e,r,a){return t.apply(this,arguments)})}]),e}();R()(Ye,"getUrl",(function(e){var t=e.base,r=void 0===t?"https://api.darksky.net/forecast":t,a=e.key,n=e.lat,o=e.long,c=e.exclude,s=void 0===c?"minutely,flags,currently":c,l=e.lang,i=void 0===l?"en":l,u=e.units,p=void 0===u?"auto":u;return"".concat(r,"/").concat(a,"/").concat(n,",").concat(o,"?exclude=").concat(s,"&lang=").concat(i,"&units=").concat(p)})),R()(Ye,"isValidKey",function(){var e=C()(F.a.mark((function e(t){var r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye.fetchWeatherData({lat:38,long:-122,key:t});case 2:return r=e.sent,e.abrupt("return",!!(null==r?void 0:r.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),R()(Ye,"convertUnitsForDarkSky",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auto";switch(e){case"f":return"us";case"c":return"si";case"":case"auto":return"auto";default:throw new Error("Invalid Unit type: ".concat(e))}}));var Ze=r(411);function $e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var et=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if($e()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){var e;p()(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=r.call.apply(r,[this].concat(n)),R()(M()(e),"getFirstRainForecast",(function(){return e.props.hourlyForecasts.slice(0,23).find((function(e){return e.precipProbability>=.3}))||{}})),e}return m()(a,[{key:"render",value:function(){var e=this.props.className,t=this.getFirstRainForecast(),r=t.precipProbability,a=t.time;return n.a.createElement("div",{className:T()(e,"rain-chance","mb-3")},r?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"umbrella bring-umbrella"}),n.a.createElement("span",{className:"pop text-info"},(100*r).toFixed(0),"%"),n.a.createElement("sup",{className:"at mx-1"},"@"),n.a.createElement("span",{className:"time"},Object(Ze.a)(new Date(1e3*a),"ha"))):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"umbrella no-umbrella"}),n.a.createElement("div",{className:"no-rain"},"No rain in 24hr.")),n.a.createElement("div",{className:"text-muted"},"Based on a ",30..toFixed(0),"% chance threshold."))}}]),a}(a.PureComponent);function tt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}R()(et,"propTypes",{className:N.PropTypes.string,hourlyForecasts:N.PropTypes.arrayOf(N.PropTypes.shape({precipProbability:N.PropTypes.number,time:N.PropTypes.number}))}),R()(et,"defaultProps",{className:"",hourlyForecasts:[]});var rt={"clear-day":"clear","clear-night":"clear",cloudy:"cloudy",fog:"fog","partly-cloudy-day":"partlycloudy","partly-cloudy-night":"partlycloudy",rain:"rain",sleet:"sleet",snow:"snow",wind:"wind"},at=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(tt()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e,t=this.props,r=t.className,a=t.icon;return a?n.a.createElement("img",{className:T()(r),src:(e=a,"./images/weather-icons/".concat(rt[e]||"unknown",".svg")),alt:""}):null}}]),a}(a.PureComponent);function nt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}R()(at,"propTypes",{className:N.PropTypes.string,icon:N.PropTypes.string}),R()(at,"defaultProps",{className:"",icon:""});var ot=function(e){return 9*e/5+32},ct=function(e){return 5*(e-32)/9},st=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(nt()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(e){var t;return p()(this,a),t=r.call(this,e),R()(M()(t),"getAltHighLow",(function(){var e=M()(t),r=e.weatherUnits,a=e.props.todaysForecast,o=a.temperatureMin,c=a.temperatureMax;if(!r)return null;var s="f"===r?ct:ot;return n.a.createElement("div",{className:"high-low-alt text-muted"},s(o).toFixed(0),"/",s(c).toFixed(0),"°","f"===r?"C":"F")})),t.weatherUnits=J.get(j),t}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.todaysForecast,a=r.icon,o=r.summary,c=r.temperatureMin,s=r.temperatureMax;return n.a.createElement("div",{className:T()(t,"forecast","mb-3","d-flex","align-items-center","justify-content-center")},n.a.createElement(at,{icon:a}),n.a.createElement("div",{className:"text-truncate"},n.a.createElement("div",{className:"conditions text-truncate"},o),n.a.createElement("div",{className:"high-low"},c.toFixed(0),n.a.createElement("span",{className:"text-muted px-1"},"/"),s.toFixed(0),"°"),this.getAltHighLow()))}}]),a}(a.PureComponent);function lt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}R()(st,"propTypes",{className:N.PropTypes.string,todaysForecast:N.PropTypes.shape({icon:N.PropTypes.string,summary:N.PropTypes.string,temperatureMin:N.PropTypes.number,temperatureMax:N.PropTypes.number})}),R()(st,"defaultProps",{className:"",todaysForecast:{}});var it=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(lt()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.alerts;return r.length?n.a.createElement("div",{className:T()(t,"alerts")},n.a.createElement("ul",null,r.map((function(e){return n.a.createElement("li",{key:e.title},e.title)})))):null}}]),a}(a.PureComponent);function ut(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}R()(it,"propTypes",{className:N.PropTypes.string,alerts:N.PropTypes.arrayOf(N.PropTypes.shape({title:N.PropTypes.string}))}),R()(it,"defaultProps",{className:"",alerts:[]});var pt=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(ut()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.dailyForecasts,a=e.hourlyForecasts,o=e.alerts;return n.a.createElement("div",{className:T()(t,"side-panel px-3")},n.a.createElement(st,{todaysForecast:r[0]}),n.a.createElement(et,{hourlyForecasts:a}),n.a.createElement(it,{alerts:o}))}}]),a}(a.PureComponent);function ft(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}R()(pt,"propTypes",{className:N.PropTypes.string,dailyForecasts:N.PropTypes.array,hourlyForecasts:N.PropTypes.array,alerts:N.PropTypes.array}),R()(pt,"defaultProps",{className:"",dailyForecasts:[],hourlyForecasts:[],alerts:[]});var mt=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(ft()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.hourlyForecasts;return n.a.createElement(Ce.a,{className:"mb-0"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Time"),n.a.createElement("th",null,"Condition"),n.a.createElement("th",{"data-toggle":"tooltip",title:"Temp/Feels Like"},"Temp/FL"),n.a.createElement("th",null,"UVI"),n.a.createElement("th",null,"POP"),n.a.createElement("th",null,"Humid"))),n.a.createElement("tbody",null,r.slice(0,12).map((function(e){var r=e.time,a=e.temperature,o=e.uvIndex,c=e.humidity,s=e.precipProbability,l=e.apparentTemperature,i=e.icon,u=e.summary;return n.a.createElement("tr",{key:"hourly-forecast-".concat(r)},n.a.createElement("td",null,Object(Ze.a)(new Date(1e3*r),"ha")),n.a.createElement("td",null,n.a.createElement(at,{icon:i})," ",u),n.a.createElement("td",null,a.toFixed(0),"/",l.toFixed(0),"°"),n.a.createElement("td",null,o),n.a.createElement("td",{className:T()(t,{"text-info":s>=.3})},(100*s).toFixed(0),"%"),n.a.createElement("td",null,(100*c).toFixed(0),"%"))}))))}}]),a}(a.PureComponent);function dt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}R()(mt,"propTypes",{className:N.PropTypes.string,hourlyForecasts:N.PropTypes.arrayOf(N.PropTypes.shape({time:N.PropTypes.number,temperature:N.PropTypes.number,uvIndex:N.PropTypes.number,humidity:N.PropTypes.number,precipProbability:N.PropTypes.number,apparentTemperature:N.PropTypes.number,icon:N.PropTypes.string,summary:N.PropTypes.string}))}),R()(mt,"defaultProps",{className:"",hourlyForecasts:[]});var yt=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(dt()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.dailyForecasts;return n.a.createElement(k.a,{className:T()(t,"slim-gutters","forecasts")},r.slice(1,4).map((function(e){var t=e.summary,r=e.temperatureMin,a=e.temperatureMax,o=e.time,c=e.icon;return n.a.createElement(x.a,{sm:"4",key:"daily-forecast-".concat(o)},n.a.createElement("div",{className:"p-3 forecast d-flex align-items-center justify-content-center"},n.a.createElement(at,{icon:c}),n.a.createElement("div",{className:"text-truncate"},n.a.createElement("div",{className:"conditions text-truncate"},t),n.a.createElement("div",{className:"high-low"},r.toFixed(0),n.a.createElement("span",{className:"text-muted px-1"},"/"),a.toFixed(0)),n.a.createElement("div",{className:"date"},Object(Ze.a)(new Date(1e3*o),"EEEE, LLL d")))))})))}}]),a}(a.PureComponent);function ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function vt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(r),!0).forEach((function(t){R()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}R()(yt,"propTypes",{className:N.PropTypes.string,dailyForecasts:N.PropTypes.arrayOf(N.PropTypes.shape({icon:N.PropTypes.string,summary:N.PropTypes.string,temperatureMin:N.PropTypes.number,temperatureMax:N.PropTypes.number,time:N.PropTypes.number}))}),R()(yt,"defaultProps",{className:"",dailyForecasts:[]});var Et=[{readable:"Bernal Heights",lat:37.7448205,long:-122.4100494}],Pt=function(e){y()(o,e);var t,r,a=(t=o,function(){var e,r=E()(t);if(gt()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function o(e){var t;return p()(this,o),t=a.call(this,e),R()(M()(t),"updateWeatherLocations",C()(F.a.mark((function e(){var r,a,n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=J.get(B),a=J.get(j),e.prev=2,e.next=5,Ye.fetchAllLocationsWeatherData(Et,r,a);case 5:n=e.sent,t.setState({loading:!0}),t.setState({locations:n.map((function(e,t){var r=e.data,a=r.hourly,n=r.daily,o=r.alerts;return vt({dailyForecasts:n.data,hourlyForecasts:a.data,alerts:o},Et[t])})),lastUpdated:new Date,fetchError:!1,loading:!1}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0),t.setState({fetchError:!0,loading:!1});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))),t.state={locations:[],fetchError:!1,lastUpdated:void 0,loading:!1},t}return m()(o,[{key:"componentDidMount",value:(r=C()(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateWeatherLocations();case 2:this.interval=setInterval(this.updateWeatherLocations,9e5);case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props.className,t=this.state,r=t.locations,a=t.lastUpdated,o=t.fetchError,c=t.loading;return n.a.createElement("div",{className:T()(e,"weather")},o&&n.a.createElement(ue,null,"Weather request failed. Make sure ","you've"," supplied an API Key in the"," ",n.a.createElement("a",{href:"#/settings"},"settings"),"."),r.map((function(e){var t=e.hourlyForecasts,r=e.dailyForecasts,a=e.alerts,o=e.readable,c=e.lat,s=e.long;return n.a.createElement(L.a,{className:"mb-2",key:"".concat(c,",").concat(s)},n.a.createElement(Xe.a,{className:"text-center py-1 text-uppercase"},o),n.a.createElement(U.a,null,n.a.createElement(k.a,{className:"slim-gutters"},n.a.createElement(x.a,{md:"5"},n.a.createElement(pt,{dailyForecasts:r,hourlyForecasts:t,alerts:a})),n.a.createElement(x.a,{md:"7"},n.a.createElement(mt,{hourlyForecasts:t})))),n.a.createElement(ze.a,{className:"bg-transparent py-0"},n.a.createElement(yt,{dailyForecasts:r})))})),n.a.createElement("div",{className:"d-flex justify-content-end"},n.a.createElement(le,{lastUpdated:a,msUntilWarning:18e5,loading:c})))}}]),o}(a.PureComponent);function Rt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}R()(Pt,"propTypes",{className:N.PropTypes.string}),R()(Pt,"defaultProps",{className:""});var Nt=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(Rt()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){return e.forceUpdate()}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props.className,t=new Date,r=Object(Ze.a)(t,"MMMM do, yyy"),a=Object(Ze.a)(t,"h:mm");return n.a.createElement(k.a,{className:T()(e,"current-time","py-3","py-md-1","align-items-baseline")},n.a.createElement(x.a,{xs:"6",className:"time"},a),n.a.createElement(x.a,{xs:"6",className:"date"},r))}}]),a}(a.PureComponent);function St(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}R()(Nt,"propTypes",{className:N.PropTypes.string}),R()(Nt,"defaultProps",{className:""});var Tt=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(St()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props.className;return n.a.createElement("div",{className:T()(e)},n.a.createElement(Nt,null),n.a.createElement(k.a,{className:"slim-gutters"},n.a.createElement(x.a,{lg:"5",className:"mb-4"},n.a.createElement(He,null)),n.a.createElement(x.a,{lg:"7",className:"mb-4"},n.a.createElement(Pt,null))))}}]),a}(a.PureComponent);R()(Tt,"propTypes",{className:N.PropTypes.string}),R()(Tt,"defaultProps",{className:""});var bt=r(409);function wt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var kt="dark-mode",xt="light-mode",Dt=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(wt()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(e){var t;return p()(this,a),t=r.call(this,e),R()(M()(t),"setMode",(function(e){document.documentElement.className=e,J.set(K,e),t.forceUpdate()})),R()(M()(t),"isDarkModeSelected",(function(){return document.documentElement.className===kt})),t.setMode=t.setMode.bind(M()(t)),t}return m()(a,[{key:"render",value:function(){var e=this,t=this.props.className,r=this.isDarkModeSelected();return n.a.createElement(n.a.Fragment,null,n.a.createElement(we.a,{className:"mr-2"},"Theme:"),n.a.createElement(bt.a,{className:T()(t)},n.a.createElement(xe.a,{onClick:function(){return e.setMode(kt)},color:r?"primary":"secondary"},"Dark"),n.a.createElement(xe.a,{onClick:function(){return e.setMode(xt)},color:r?"secondary":"primary"},"Light")))}}]),a}(a.PureComponent);R()(Dt,"propTypes",{className:N.PropTypes.string}),R()(Dt,"defaultProps",{className:""});var Ft=r(413),Ot=r(66);function Ct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var At=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(Ct()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(e){var t;return p()(this,a),t=r.call(this,e),R()(M()(t),"rerender",(function(){return t.forceUpdate()})),R()(M()(t),"getLocalStorageData",(function(e){return J.get(e)})),R()(M()(t),"toggleShow",(function(){var e=t.state.show;t.setState({show:!e})})),t.state={show:!1},t}return m()(a,[{key:"componentDidMount",value:function(){window.addEventListener("storage",this.rerender)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("storage",this.rerender)}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.localStorageKey,a=this.state.show,o=JSON.stringify(this.getLocalStorageData(r));return n.a.createElement("div",{className:T()(t)},n.a.createElement("p",null,n.a.createElement(xe.a,{color:"primary",onClick:this.toggleShow},a?"Hide":"Show"," LocalStorage Data")),n.a.createElement("p",{className:"small"},"JSON representation of the stored data."),a&&n.a.createElement(Ft.a,{language:"json",style:Ot.monokai,className:"my-3"},o))}}]),a}(a.PureComponent);function Mt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}R()(At,"propTypes",{className:N.PropTypes.string,localStorageKey:N.PropTypes.oneOf(V).isRequired}),R()(At,"defaultProps",{className:""});var Lt=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(Mt()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){var e;p()(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=r.call.apply(r,[this].concat(n)),R()(M()(e),"setSampleData",(function(){var t=e.props.localStorageKey;J.setSampleData(t)})),e}return m()(a,[{key:"render",value:function(){var e=this.props.className;return n.a.createElement("div",{className:T()(e)},n.a.createElement("p",null,n.a.createElement(xe.a,{color:"primary",onClick:this.setSampleData},"Set Sample LocalStorage Data")),n.a.createElement("p",{className:"small"},"Replace stored data with sample data."))}}]),a}(a.PureComponent);function Ut(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}R()(Lt,"propTypes",{className:N.PropTypes.string,localStorageKey:N.PropTypes.oneOf(Object.keys(q)).isRequired}),R()(Lt,"defaultProps",{className:""});var _t=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(Ut()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(e){var t;return p()(this,a),t=r.call(this,e),R()(M()(t),"getInitialState",(function(){return{weatherKeyIsValid:void 0,weatherKeyValue:J.get(B),weatherUnits:J.get(j)}})),R()(M()(t),"onWeatherKeyChange",(function(e){t.setState({weatherKeyValue:e.target.value})})),R()(M()(t),"validateAndSetKey",function(){var e=C()(F.a.mark((function e(r){var a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),a=t.state.weatherKeyValue,e.prev=2,e.next=5,Ye.isValidKey(a);case 5:if(!e.sent){e.next=9;break}return t.setState({weatherKeyIsValid:!0}),J.set(B,a),e.abrupt("return");case 9:t.setState({weatherKeyIsValid:!1}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),t.setState({weatherKeyIsValid:!1});case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}()),R()(M()(t),"setWeatherUnits",(function(e){t.setState({weatherUnits:e}),J.set(j,e)})),R()(M()(t),"dumpLocalStorageAndResetState",(function(){t.setState(t.getInitialState()),J.dump()})),t.state=t.getInitialState(),t}return m()(a,[{key:"render",value:function(){var e=this,t=this.props.className,r=this.state,a=r.weatherKeyIsValid,o=r.weatherKeyValue,c=r.weatherUnits;return n.a.createElement("div",{className:T()(t)},n.a.createElement("h1",null,"Settings"),n.a.createElement(k.a,null,n.a.createElement(x.a,{xs:"6"},n.a.createElement(L.a,{className:"mb-4"},n.a.createElement(Xe.a,null,n.a.createElement("h3",{className:"m-0"},"Global")),n.a.createElement(U.a,null,n.a.createElement(Dt,null),n.a.createElement("hr",null),n.a.createElement("p",null,n.a.createElement(xe.a,{color:"danger",onClick:this.dumpLocalStorageAndResetState},"Dump All Local Storage")),n.a.createElement("p",{className:"small"},"This will remove stored bus stops, your DarkSky key, and the weather units."))))),n.a.createElement(k.a,null,n.a.createElement(x.a,{xs:"6"},n.a.createElement(L.a,{className:"mb-4"},n.a.createElement(Xe.a,null,n.a.createElement("h3",{className:"m-0"},"Bus")),n.a.createElement(U.a,null,n.a.createElement(At,{localStorageKey:W}),n.a.createElement("hr",null),n.a.createElement(Lt,{localStorageKey:W})))),n.a.createElement(x.a,{xs:"6"},n.a.createElement(L.a,{className:"mb-4"},n.a.createElement(Xe.a,null,n.a.createElement("h3",{className:"m-0"},"Weather")),n.a.createElement(U.a,null,n.a.createElement(Te.a,{onSubmit:this.validateAndSetKey},n.a.createElement(be.a,null,n.a.createElement(we.a,{for:"weather-key"},"DarkSky API Key:"),n.a.createElement(ke.a,{type:"text",id:"weather-key",className:T()({"is-valid":a,"is-invalid":!1===a}),onChange:this.onWeatherKeyChange,value:o})),n.a.createElement(xe.a,{color:"primary",type:"submit"},"Validate & Store Key")),n.a.createElement("hr",null),n.a.createElement(be.a,null,n.a.createElement(we.a,{className:"mr-2"},"Weather Units:"),n.a.createElement(bt.a,null,n.a.createElement(xe.a,{color:""===c?"primary":"secondary",onClick:function(){return e.setWeatherUnits("")}},"Auto"),n.a.createElement(xe.a,{color:"f"===c?"primary":"secondary",onClick:function(){return e.setWeatherUnits("f")}},"F"),n.a.createElement(xe.a,{color:"c"===c?"primary":"secondary",onClick:function(){return e.setWeatherUnits("c")}},"C"))))))))}}]),a}(a.PureComponent);function It(){return n.a.createElement(s.a,null,n.a.createElement(i.a,null,n.a.createElement(w,null),n.a.createElement(l.c,null,n.a.createElement(l.a,{path:"/settings"},n.a.createElement(_t,null)),n.a.createElement(l.a,{path:"/"},n.a.createElement(Tt,null)))))}R()(_t,"propTypes",{className:N.PropTypes.string}),R()(_t,"defaultProps",{className:""});c.a.render(n.a.createElement(It,null),document.getElementById("react-app"))},71:function(e,t,r){}});
//# sourceMappingURL=app.cc7bfd78.js.map