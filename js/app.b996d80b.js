!function(e){function t(t){for(var a,o,c=t[0],l=t[1],i=t[2],p=0,f=[];p<c.length;p++)o=c[p],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&f.push(n[o][0]),n[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(u&&u(t);f.length;)f.shift()();return s.push.apply(s,i||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,c=1;c<r.length;c++){var l=r[c];0!==n[l]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},n={0:0},s=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var i=0;i<c.length;i++)t(c[i]);var u=l;s.push([515,1]),r()}({194:function(e,t,r){},204:function(e,t,r){var a={"./af":40,"./af.js":40,"./ar":41,"./ar-dz":42,"./ar-dz.js":42,"./ar-kw":43,"./ar-kw.js":43,"./ar-ly":44,"./ar-ly.js":44,"./ar-ma":45,"./ar-ma.js":45,"./ar-sa":46,"./ar-sa.js":46,"./ar-tn":47,"./ar-tn.js":47,"./ar.js":41,"./az":48,"./az.js":48,"./be":49,"./be.js":49,"./bg":50,"./bg.js":50,"./bm":51,"./bm.js":51,"./bn":52,"./bn.js":52,"./bo":53,"./bo.js":53,"./br":54,"./br.js":54,"./bs":55,"./bs.js":55,"./ca":56,"./ca.js":56,"./cs":57,"./cs.js":57,"./cv":58,"./cv.js":58,"./cy":59,"./cy.js":59,"./da":60,"./da.js":60,"./de":61,"./de-at":62,"./de-at.js":62,"./de-ch":63,"./de-ch.js":63,"./de.js":61,"./dv":64,"./dv.js":64,"./el":65,"./el.js":65,"./en-SG":66,"./en-SG.js":66,"./en-au":67,"./en-au.js":67,"./en-ca":68,"./en-ca.js":68,"./en-gb":69,"./en-gb.js":69,"./en-ie":70,"./en-ie.js":70,"./en-il":71,"./en-il.js":71,"./en-nz":72,"./en-nz.js":72,"./eo":73,"./eo.js":73,"./es":74,"./es-do":75,"./es-do.js":75,"./es-us":76,"./es-us.js":76,"./es.js":74,"./et":77,"./et.js":77,"./eu":78,"./eu.js":78,"./fa":79,"./fa.js":79,"./fi":80,"./fi.js":80,"./fo":81,"./fo.js":81,"./fr":82,"./fr-ca":83,"./fr-ca.js":83,"./fr-ch":84,"./fr-ch.js":84,"./fr.js":82,"./fy":85,"./fy.js":85,"./ga":86,"./ga.js":86,"./gd":87,"./gd.js":87,"./gl":88,"./gl.js":88,"./gom-latn":89,"./gom-latn.js":89,"./gu":90,"./gu.js":90,"./he":91,"./he.js":91,"./hi":92,"./hi.js":92,"./hr":93,"./hr.js":93,"./hu":94,"./hu.js":94,"./hy-am":95,"./hy-am.js":95,"./id":96,"./id.js":96,"./is":97,"./is.js":97,"./it":98,"./it-ch":99,"./it-ch.js":99,"./it.js":98,"./ja":100,"./ja.js":100,"./jv":101,"./jv.js":101,"./ka":102,"./ka.js":102,"./kk":103,"./kk.js":103,"./km":104,"./km.js":104,"./kn":105,"./kn.js":105,"./ko":106,"./ko.js":106,"./ku":107,"./ku.js":107,"./ky":108,"./ky.js":108,"./lb":109,"./lb.js":109,"./lo":110,"./lo.js":110,"./lt":111,"./lt.js":111,"./lv":112,"./lv.js":112,"./me":113,"./me.js":113,"./mi":114,"./mi.js":114,"./mk":115,"./mk.js":115,"./ml":116,"./ml.js":116,"./mn":117,"./mn.js":117,"./mr":118,"./mr.js":118,"./ms":119,"./ms-my":120,"./ms-my.js":120,"./ms.js":119,"./mt":121,"./mt.js":121,"./my":122,"./my.js":122,"./nb":123,"./nb.js":123,"./ne":124,"./ne.js":124,"./nl":125,"./nl-be":126,"./nl-be.js":126,"./nl.js":125,"./nn":127,"./nn.js":127,"./pa-in":128,"./pa-in.js":128,"./pl":129,"./pl.js":129,"./pt":130,"./pt-br":131,"./pt-br.js":131,"./pt.js":130,"./ro":132,"./ro.js":132,"./ru":133,"./ru.js":133,"./sd":134,"./sd.js":134,"./se":135,"./se.js":135,"./si":136,"./si.js":136,"./sk":137,"./sk.js":137,"./sl":138,"./sl.js":138,"./sq":139,"./sq.js":139,"./sr":140,"./sr-cyrl":141,"./sr-cyrl.js":141,"./sr.js":140,"./ss":142,"./ss.js":142,"./sv":143,"./sv.js":143,"./sw":144,"./sw.js":144,"./ta":145,"./ta.js":145,"./te":146,"./te.js":146,"./tet":147,"./tet.js":147,"./tg":148,"./tg.js":148,"./th":149,"./th.js":149,"./tl-ph":150,"./tl-ph.js":150,"./tlh":151,"./tlh.js":151,"./tr":152,"./tr.js":152,"./tzl":153,"./tzl.js":153,"./tzm":154,"./tzm-latn":155,"./tzm-latn.js":155,"./tzm.js":154,"./ug-cn":156,"./ug-cn.js":156,"./uk":157,"./uk.js":157,"./ur":158,"./ur.js":158,"./uz":159,"./uz-latn":160,"./uz-latn.js":160,"./uz.js":159,"./vi":161,"./vi.js":161,"./x-pseudo":162,"./x-pseudo.js":162,"./yo":163,"./yo.js":163,"./zh-cn":164,"./zh-cn.js":164,"./zh-hk":165,"./zh-hk.js":165,"./zh-tw":166,"./zh-tw.js":166};function n(e){var t=s(e);return r(t)}function s(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=s,e.exports=n,n.id=204},515:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),s=r(26),o=r.n(s),c=(r(194),r(25)),l=r(23),i=r(535),u=r(8),p=r.n(u),f=r(9),m=r.n(f),d=r(10),y=r.n(d),h=r(11),v=r.n(h),g=r(5),E=r.n(g),P=r(3),N=r.n(P),R=r(1),S=r(4),b=r.n(S);function T(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var j=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(T()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props.className;return n.a.createElement("div",{className:b()(e,"header")},n.a.createElement(c.b,{to:"/"},n.a.createElement("span",{className:"fas fa-home"})),n.a.createElement(c.b,{to:"/settings"},n.a.createElement("span",{className:"fas fa-cog"})))}}]),a}(a.PureComponent);N()(j,"propTypes",{className:R.PropTypes.string}),N()(j,"defaultProps",{className:""});var k=r(520),w=r(521),x=r(14),D=r.n(x),F=r(15),O=r.n(F),C=r(13),A=r.n(C),M=r(517),U=r(518),_=r(2),L=r.n(_),I=r(30),B=r.n(I),W="weatherKey",z="weatherUnits",K="routeStopTags",V="htmlClass",q=[W,z,K,V].reduce((function(e,t){return[].concat(B()(e),[t,"".concat("ngStorage-").concat(t)])}),[]),J=N()({},K,["14|5565","67|6208","27|3930","12|7552"]),H=function(){function e(){p()(this,e)}return m()(e,null,[{key:"get",value:function(e){return JSON.parse(window.localStorage.getItem(e)||window.localStorage.getItem("".concat("ngStorage-").concat(e)))||""}},{key:"set",value:function(e,t){window.localStorage.setItem(e,JSON.stringify(t)),window.dispatchEvent(new Event("storage"))}},{key:"setSampleData",value:function(e){this.set(e,J[e])}},{key:"dump",value:function(){q.forEach((function(e){return window.localStorage.removeItem(e)}))}},{key:"getBusStopsFromLocalStorage",value:function(){return this.get(K)||[]}},{key:"addBusStopToLocalStorage",value:function(e){var t=this.getBusStopsFromLocalStorage();this.set(K,B()(new Set([].concat(B()(t),[e]))))}},{key:"removeBusStopFromLocalStorage",value:function(e){var t=this.getBusStopsFromLocalStorage();this.set(K,t.filter((function(t){return t!==e})))}}]),e}(),G=r(28),X=r.n(G),Y=r(24),Q=r.n(Y),Z=r(37),$=r.n(Z),ee=r(185),te=r.n(ee),re="http://webservices.nextbus.com/service/publicXMLFeed",ae=function(e){return new Promise((function(t,r){navigator.geolocation.getCurrentPosition(t,r,e)}))},ne=function(){function e(){p()(this,e)}var t,r,a,n;return m()(e,null,[{key:"getPredictions",value:(n=O()(D.a.mark((function e(t){var r,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.a.get(re,{params:{command:"predictionsForMultiStops",a:"sf-muni",stops:t,useShortTitles:!0},paramsSerializer:function(e){return te.a.stringify(e,{arrayFormat:"repeat"})}});case 2:return r=e.sent,a=this.parsePredictionsXMLResponse(r.data),e.abrupt("return",new Promise((function(e,t){var r,n,s=null==a||null===(r=a.body)||void 0===r||null===(n=r.Error)||void 0===n?void 0:n.__text;s&&t(new Error(s)),e(a)})));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getRouteConfig",value:(a=O()(D.a.mark((function e(){var t,r,a=this;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.a.get(re,{params:{command:"routeConfig",a:"sf-muni",useShortTitles:!0}});case 2:return t=e.sent,r=this.parseRouteConfigXMLResponse(t.data),e.abrupt("return",new Promise((function(e,t){var n,s,o=null==r||null===(n=r.body)||void 0===n||null===(s=n.Error)||void 0===s?void 0:s.__text;o&&t(new Error(o)),e(a.mergeRouteData(r.body.route))})));case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getStopsNearMe",value:(r=O()(D.a.mark((function e(t){var r,a,n,s,o,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.a.all([ae(),this.getRouteConfig()]);case 2:return r=e.sent,a=X()(r,2),n=a[0],s=a[1],o=new google.maps.LatLng(n.coords.latitude,n.coords.longitude),c=[],s.forEach((function(e){e.direction.forEach((function(r){r.stop.forEach((function(a){var n=new google.maps.LatLng(a._lat,a._lon);google.maps.geometry.spherical.computeDistanceBetween(o,n)<=t&&c.push({tag:e._tag,title:e._title,directionName:r._name,directionTitle:r._title,latLng:n,stopId:a._stopId,stopTag:a._tag,stopTitle:a._title})}))}))})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"isValidStop",value:(t=O()(D.a.mark((function e(t){var r,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getPredictions([t]);case 3:return a=e.sent,e.abrupt("return",!!(null==a||null===(r=a.body)||void 0===r?void 0:r.predictions));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return t.apply(this,arguments)})},{key:"parsePredictionsXMLResponse",value:function(e){return new $.a({arrayAccessFormPaths:["body.predictions","body.predictions.direction.prediction"]}).xml2js(e)}},{key:"parseRouteConfigXMLResponse",value:function(e){return new $.a({arrayAccessFormPaths:["body.route"]}).xml2js(e)}},{key:"getRouteStopTag",value:function(e,t){return"".concat(e,"|").concat(t)}},{key:"splitRouteStopTag",value:function(e){return e.split("|")}}]),e}();N()(ne,"mergeRouteData",(function(e){return e.forEach((function(e){var t={};e.stop.forEach((function(e){t[e._tag]=e})),e.direction.forEach((function(e){e.stop.forEach((function(r,a){e.stop[a]=t[r._tag]}))}))})),e}));r(178);function se(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var oe=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(se()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.loading,a=e.small;return r?n.a.createElement("div",{className:b()(t,"spinner",{"spinner-small":a})},n.a.createElement("div",{className:"bounce1"}),n.a.createElement("div",{className:"bounce2"}),n.a.createElement("div",{className:"bounce3"})):null}}]),a}(a.PureComponent);function ce(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(oe,"propTypes",{className:R.PropTypes.string,loading:R.PropTypes.bool,small:R.PropTypes.bool}),N()(oe,"defaultProps",{className:"",loading:!1,small:!1});var le=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(ce()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){var e;p()(this,a);for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e=r.call.apply(r,[this].concat(n)),N()(A()(e),"getReadableTime",(function(){var t=e.props.lastUpdated.preciseDiff(L()());return t?"".concat(t," ago."):"Just now."})),N()(A()(e),"isOverdue",(function(){var t=e.props,r=t.lastUpdated,a=t.msUntilWarning;return L()().diff(r)>=a})),e}return m()(a,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){return e.forceUpdate()}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.lastUpdated,a=e.loading,s=this.isOverdue();return n.a.createElement("div",{className:b()(t,"time-since-last-updated")},n.a.createElement("span",{className:b()({overdue:s})},r&&this.getReadableTime()),n.a.createElement(oe,{className:"my-1 ml-auto",loading:a,small:!0}))}}]),a}(a.PureComponent);function ie(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(le,"propTypes",{className:R.PropTypes.string,lastUpdated:R.PropTypes.object,msUntilWarning:R.PropTypes.number,loading:R.PropTypes.bool}),N()(le,"defaultProps",{className:"",lastUpdated:null,msUntilWarning:6e4,loading:!1});var ue=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(ie()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.prediction,a=r.direction,s=r._dirTitleBecauseNoPredictions,o=r._stopTitle;return n.a.createElement("div",{className:b()(t)},n.a.createElement("div",{className:"route-title"},(null==a?void 0:a._title)||s),n.a.createElement("div",{className:"stop-title"},"@",o))}}]),a}(a.PureComponent);function pe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(ue,"propTypes",{className:R.PropTypes.string,prediction:R.PropTypes.shape({direction:R.PropTypes.shape({_title:R.PropTypes.string}),_stopTitle:R.PropTypes.string,_dirTitleBecauseNoPredictions:R.PropTypes.string})}),N()(ue,"defaultProps",{className:"",prediction:{}});var fe=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(pe()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.predictionTimes;return n.a.createElement("div",{className:b()(t,"prediction-times")},r.length?n.a.createElement(n.a.Fragment,null,r.slice(0,4).map((function(e,t){return n.a.createElement("span",{key:"".concat(e._tripTag)},n.a.createElement("span",{className:b()("prediction-time",{"not-affected-by-layover":!e._affectedByLayover,"next-time":0===t,"other-time":0!==t})},"0"===e._minutes?"Now":e._minutes),t!==r.length-1&&", ")}))):n.a.createElement("span",{className:"no-prediction-time"},"None"))}}]),a}(a.PureComponent);function me(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(fe,"propTypes",{className:R.PropTypes.string,predictionTimes:R.PropTypes.arrayOf(R.PropTypes.shape({_tripTag:R.PropTypes.string,_affectedByLayover:R.PropTypes.string,_minutes:R.PropTypes.string}))}),N()(fe,"defaultProps",{className:"",predictionTimes:[]});var de=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(me()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.predictions;return n.a.createElement("div",{className:b()(t)},r.map((function(e){var t=e._routeTag,r=e._stopTag,a=e.direction;return n.a.createElement(M.a,{className:"mb-2",key:"".concat(t,"-").concat(r)},n.a.createElement(U.a,{className:"d-flex align-items-center justify-content-between"},n.a.createElement("div",{className:"route-tag"},t),n.a.createElement("div",{className:"right-container"},n.a.createElement(fe,{predictionTimes:null==a?void 0:a.prediction}),n.a.createElement(ue,{prediction:e}))))})))}}]),a}(a.PureComponent);N()(de,"propTypes",{className:R.PropTypes.string,predictions:R.PropTypes.arrayOf(R.PropTypes.shape({_routeTag:R.PropTypes.string,_stopTag:R.PropTypes.string,direction:R.PropTypes.shape({prediction:R.PropTypes.arrayOf(R.PropTypes.shape({_tripTag:R.PropTypes.string,_affectedByLayover:R.PropTypes.string,_minutes:R.PropTypes.string}))})}))}),N()(de,"defaultProps",{className:"",predictions:[]});var ye=r(527),he=r(528),ve=r(529),ge=r(530),Ee=r(531),Pe=r(519),Ne=r(522),Re=r(523),Se=r(524),be=r(525);function Te(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var je=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(Te()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(e){var t;return p()(this,a),t=r.call(this,e),N()(A()(t),"onChange",(function(e,r){t.setState(N()({},r,e.target.value))})),N()(A()(t),"validateAndAddStop",function(){var e=O()(D.a.mark((function e(r){var a,n,s,o,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),a=t.props.onAddOrRemoveStop,n=t.state,s=n.routeTag,o=n.stopTag,c=ne.getRouteStopTag(s,o),t.setState({stopIsValid:void 0}),e.next=7,ne.isValidStop(c);case 7:if(!e.sent){e.next=12;break}return t.setState({stopIsValid:!0}),H.addBusStopToLocalStorage(c),a(),e.abrupt("return");case 12:t.setState({stopIsValid:!1});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.state={routeTag:"",stopTag:"",stopIsValid:void 0},t}return m()(a,[{key:"render",value:function(){var e=this,t=this.props.className,r=this.state,a=r.routeTag,s=r.stopTag,o=r.stopIsValid;return n.a.createElement(Pe.a,{onSubmit:this.validateAndAddStop,className:b()(t)},n.a.createElement(k.a,null,n.a.createElement(w.a,{xs:"6"},n.a.createElement(Ne.a,null,n.a.createElement(Re.a,{for:"manual-add-route-tag"},"Route Tag:"),n.a.createElement(Se.a,{type:"text",id:"manual-add-route-tag",className:b()({"is-valid":o,"is-invalid":!1===o}),onChange:function(t){return e.onChange(t,"routeTag")},placeholder:"12",value:a}))),n.a.createElement(w.a,{xs:"6"},n.a.createElement(Ne.a,null,n.a.createElement(Re.a,{for:"manual-add-route-stop"},"Stop Tag:"),n.a.createElement(Se.a,{type:"text",id:"manual-add-route-stop",className:b()({"is-valid":o,"is-invalid":!1===o}),onChange:function(t){return e.onChange(t,"stopTag")},placeholder:"5837",value:s})))),n.a.createElement("div",null,n.a.createElement(be.a,{color:"primary",type:"submit"},"Validate & Add Stop")))}}]),a}(a.PureComponent);N()(je,"propTypes",{className:R.PropTypes.string,onAddOrRemoveStop:R.PropTypes.func.isRequired}),N()(je,"defaultProps",{className:""});var ke=r(537),we=r(526);function xe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var De=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(xe()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(e){var t;return p()(this,a),t=r.call(this,e),N()(A()(t),"getNearbyStops",function(){var e=O()(D.a.mark((function e(r){var a,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.target.value){e.next=3;break}return e.abrupt("return");case 3:return t.setState({loading:!0}),e.prev=4,e.next=7,ne.getStopsNearMe(a);case 7:n=e.sent,t.setState({loading:!1,errMsg:void 0,nearbyStops:n}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.error(e.t0.message),t.setState({loading:!1,errMsg:e.t0.message});case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}()),N()(A()(t),"addStop",(function(e){var r=t.props.onAddOrRemoveStop;H.addBusStopToLocalStorage(e),r()})),t.state={loading:!1,errMsg:void 0,nearbyStops:[]},t}return m()(a,[{key:"render",value:function(){var e=this,t=this.props.className,r=this.state,a=r.loading,s=r.errMsg,o=r.nearbyStops;return n.a.createElement(n.a.Fragment,null,n.a.createElement(ke.a,{color:"danger",fade:!1},"Warning: This ","won't"," work if this app is hosted on http. See"," ",n.a.createElement("a",{href:"https://developers.google.com/web/updates/2016/04/geolocation-on-secure-contexts-only",target:"_blank",rel:"noopener noreferrer"},"Geolocation API Removed from Unsecured Origins in Chrome 50"),". However, hosting this app on https causes a Mixed Content issue (https site requesting ","NextBus's"," http-only traffic)."),n.a.createElement(Pe.a,{className:b()(t,"mb-2"),inline:!0},n.a.createElement(Re.a,{className:"mr-2"},"Find stops within"),n.a.createElement(Se.a,{type:"select",onChange:this.getNearbyStops},n.a.createElement("option",{value:""},"--Choose One--"),n.a.createElement("option",{value:"322"},"1/5 mile"),n.a.createElement("option",{value:"402"},"1/4 mile"),n.a.createElement("option",{value:"804"},"1/2 mile"))),!!o.length&&n.a.createElement(we.a,{striped:!0,hover:!0,className:"mt-4"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Route"),n.a.createElement("th",null,"Direction"),n.a.createElement("th",null,"Stop"))),n.a.createElement("tbody",null,o.map((function(t){var r=t.tag,a=t.stopTag,s=t.title,o=t.directionTitle,c=t.stopTitle,l=ne.getRouteStopTag(r,a);return n.a.createElement("tr",{className:"clickable",key:l,onClick:function(){return e.addStop(l)}},n.a.createElement("td",null,s),n.a.createElement("td",null,o),n.a.createElement("td",null,c))})))),a&&n.a.createElement(oe,{className:"my-2"}),s&&n.a.createElement("div",{className:"error-msg"},"Error: ",s))}}]),a}(a.PureComponent);function Fe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(De,"propTypes",{className:R.PropTypes.string,onAddOrRemoveStop:R.PropTypes.func.isRequired}),N()(De,"defaultProps",{className:""});var Oe=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(Fe()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(e){var t;return p()(this,a),t=r.call(this,e),N()(A()(t),"toggle",(function(e){t.state.activeTab!==e&&t.setState({activeTab:e})})),t.state={activeTab:"1"},t}return m()(a,[{key:"render",value:function(){var e=this,t=this.props,r=t.className,a=t.toggleAddStopForm,s=t.onAddOrRemoveStop,o=this.state.activeTab;return n.a.createElement("div",{className:b()(r,"add-form","mb-2")},n.a.createElement(ye.a,{tabs:!0},n.a.createElement(he.a,null,n.a.createElement(ve.a,{className:b()("clickable",{active:"1"===o}),onClick:function(){return e.toggle("1")}},"Geolocation")),n.a.createElement(he.a,null,n.a.createElement(ve.a,{className:b()("clickable",{active:"2"===o}),onClick:function(){return e.toggle("2")}},"Manual Input")),n.a.createElement("button",{type:"button",className:"btn close-form",onClick:a},n.a.createElement("span",{className:"fas fa-times"}))),n.a.createElement(ge.a,{activeTab:o},n.a.createElement(Ee.a,{tabId:"1"},n.a.createElement(De,{onAddOrRemoveStop:s})),n.a.createElement(Ee.a,{tabId:"2"},n.a.createElement(je,{onAddOrRemoveStop:s}))))}}]),a}(a.PureComponent);N()(Oe,"propTypes",{className:R.PropTypes.string,toggleAddStopForm:R.PropTypes.func.isRequired,onAddOrRemoveStop:R.PropTypes.func.isRequired}),N()(Oe,"defaultProps",{className:""});var Ce=r(22),Ae=r.n(Ce);function Me(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ue={className:"mr-1",size:"xs",color:"secondary",outline:!0},_e=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(Me()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.showBusRemove,a=e.toggleShowBusRemove,s=e.toggleAddStopForm,o=H.getBusStopsFromLocalStorage();return n.a.createElement("div",{className:b()(t)},!r&&n.a.createElement(be.a,Ae()({},Ue,{onClick:s}),n.a.createElement("span",{className:"fas fa-plus"})),!!o.length&&n.a.createElement(be.a,Ae()({},Ue,{onClick:a}),n.a.createElement("span",{className:"fas fa-pen"})))}}]),a}(a.PureComponent);function Le(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(_e,"propTypes",{className:R.PropTypes.string,showBusRemove:R.PropTypes.bool.isRequired,toggleShowBusRemove:R.PropTypes.func.isRequired,toggleAddStopForm:R.PropTypes.func.isRequired}),N()(_e,"defaultProps",{className:""});var Ie=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(Le()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){var e;p()(this,a);for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e=r.call.apply(r,[this].concat(n)),N()(A()(e),"removeStop",(function(t,r){var a=ne.getRouteStopTag(t,r),n=e.props.onAddOrRemoveStop;H.removeBusStopFromLocalStorage(a),n(),e.forceUpdate()})),e}return m()(a,[{key:"render",value:function(){var e=this,t=this.props.className,r=H.getBusStopsFromLocalStorage();return n.a.createElement("div",{className:b()(t)},r.map((function(t){var r=ne.splitRouteStopTag(t),a=X()(r,2),s=a[0],o=a[1];return n.a.createElement(M.a,{className:"mb-2",key:"".concat(s,"-").concat(o)},n.a.createElement(U.a,{className:"d-flex align-items-center justify-content-between"},n.a.createElement("div",{className:"route-tag"},s),n.a.createElement("div",{className:"right-container"},n.a.createElement(be.a,{color:"danger",className:"remove-stop",onClick:function(){return e.removeStop(s,o)},size:"lg"},"Remove Stop"))))})))}}]),a}(a.PureComponent);function Be(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(Ie,"propTypes",{className:R.PropTypes.string,onAddOrRemoveStop:R.PropTypes.func.isRequired});var We=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];return t.forEach((function(t){var a="".concat(t._routeTag,"|").concat(t._stopTag);r[e.indexOf(a)]=t})),r},ze=function(e){y()(s,e);var t,r,a=(t=s,function(){var e,r=E()(t);if(Be()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function s(e){var t;return p()(this,s),t=a.call(this,e),N()(A()(t),"toggleAddStopForm",(function(){var e=t.state.showAddStopForm;t.setState({showAddStopForm:!e})})),N()(A()(t),"onAddOrRemoveStop",O()(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return clearInterval(t.interval),e.next=3,t.updateBusPredictions();case 3:t.interval=setInterval(t.updateBusPredictions,1e4);case 4:case"end":return e.stop()}}),e)})))),N()(A()(t),"toggleShowBusRemove",(function(){var e=t.state.showBusRemove;t.setState({showBusRemove:!e})})),N()(A()(t),"updateBusPredictions",O()(D.a.mark((function e(){var r,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=H.getBusStopsFromLocalStorage()).length){e.next=3;break}return e.abrupt("return");case 3:return t.setState({loading:!0}),e.prev=4,e.next=7,ne.getPredictions(r);case 7:a=e.sent,t.setState({predictions:We(r,a.body.predictions),loading:!1,lastUpdated:L()(),errMsg:void 0}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.error(e.t0.message),t.setState({loading:!1,errMsg:e.t0.message,lastUpdated:L()()});case 15:case"end":return e.stop()}}),e,null,[[4,11]])})))),t.state={predictions:[],lastUpdated:void 0,showAddStopForm:!1,showBusRemove:!1,loading:!1,errMsg:void 0},t}return m()(s,[{key:"componentDidMount",value:(r=O()(D.a.mark((function e(){var t=this;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateBusPredictions();case 2:this.interval=setInterval((function(){return t.updateBusPredictions()}),1e4);case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props.className,t=this.state,r=t.predictions,a=t.lastUpdated,s=t.showAddStopForm,o=t.showBusRemove,c=t.loading,l=t.errMsg;return n.a.createElement("div",{className:b()(e,"bus")},l&&n.a.createElement("div",{className:"error-msg"},"Error: ",l),!l&&!r.length&&n.a.createElement(M.a,{className:"mb-2"},n.a.createElement(U.a,null,"No bus stops added.")),n.a.createElement("div",{className:"predictions"},o?n.a.createElement(Ie,{onAddOrRemoveStop:this.onAddOrRemoveStop}):n.a.createElement(de,{predictions:r})),s&&n.a.createElement(Oe,{toggleAddStopForm:this.toggleAddStopForm,onAddOrRemoveStop:this.onAddOrRemoveStop}),!s&&n.a.createElement("div",{className:"d-flex align-items-start justify-content-between"},n.a.createElement(_e,{toggleAddStopForm:this.toggleAddStopForm,showBusRemove:o,toggleShowBusRemove:this.toggleShowBusRemove}),n.a.createElement(le,{lastUpdated:a,msUntilWarning:2e4,loading:c})))}}]),s}(a.PureComponent);N()(ze,"propTypes",{className:R.PropTypes.string}),N()(ze,"defaultProps",{className:""});var Ke=r(532),Ve=r(186),qe=r.n(Ve),Je=function(){function e(){p()(this,e)}var t,r;return m()(e,null,[{key:"fetchWeatherData",value:(r=O()(D.a.mark((function e(t){var r,a,n,s,o;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.lat,a=t.long,n=t.key,s=t.units,e.next=3,Q.a.get(this.getUrl({lat:r,long:a,key:n,units:s}),{adapter:qe.a});case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"fetchAllLocationsWeatherData",value:(t=O()(D.a.mark((function e(t,r,a){var n,s,o=this;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.convertUnitsForDarkSky(a),e.next=3,Q.a.all(t.map((function(e){var t=e.lat,a=e.long;return o.fetchWeatherData({lat:t,long:a,key:r,units:n})})));case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e,this)}))),function(e,r,a){return t.apply(this,arguments)})}]),e}();function He(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(Je,"getUrl",(function(e){var t=e.base,r=void 0===t?"https://api.darksky.net/forecast":t,a=e.key,n=e.lat,s=e.long,o=e.exclude,c=void 0===o?"minutely,flags,currently":o,l=e.lang,i=void 0===l?"en":l,u=e.units,p=void 0===u?"auto":u;return"".concat(r,"/").concat(a,"/").concat(n,",").concat(s,"?exclude=").concat(c,"&lang=").concat(i,"&units=").concat(p)})),N()(Je,"isValidKey",function(){var e=O()(D.a.mark((function e(t){var r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je.fetchWeatherData({lat:38,long:-122,key:t});case 2:return r=e.sent,e.abrupt("return",!!(null==r?void 0:r.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N()(Je,"convertUnitsForDarkSky",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auto";switch(e){case"f":return"us";case"c":return"si";case"":case"auto":return"auto";default:throw new Error("Invalid Unit type: ".concat(e))}}));var Ge=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(He()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){var e;p()(this,a);for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e=r.call.apply(r,[this].concat(n)),N()(A()(e),"getFirstRainForecast",(function(){return e.props.hourlyForecasts.slice(0,23).find((function(e){return e.precipProbability>=.3}))||{}})),e}return m()(a,[{key:"render",value:function(){var e=this.props.className,t=this.getFirstRainForecast(),r=t.precipProbability,a=t.time;return n.a.createElement("div",{className:b()(e,"rain-chance")},r?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"umbrella bring-umbrella"}),n.a.createElement("span",{className:"pop text-info"},(100*r).toFixed(0),"%"),n.a.createElement("sup",{className:"at mx-1"},"@"),n.a.createElement("span",{className:"time"},L()(1e3*a).format("hA"))):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"umbrella no-umbrella"}),n.a.createElement("div",{className:"no-rain"},"No rain in 24hr.")),n.a.createElement("div",{className:"text-muted"},"Based on a ",30..toFixed(0),"% chance threshold."))}}]),a}(a.PureComponent);function Xe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(Ge,"propTypes",{className:R.PropTypes.string,hourlyForecasts:R.PropTypes.arrayOf(R.PropTypes.shape({precipProbability:R.PropTypes.number,time:R.PropTypes.number}))}),N()(Ge,"defaultProps",{className:"",hourlyForecasts:[]});var Ye={"clear-day":"clear","clear-night":"clear",cloudy:"cloudy",fog:"fog","partly-cloudy-day":"partlycloudy","partly-cloudy-night":"partlycloudy",rain:"rain",sleet:"sleet",snow:"snow",wind:"wind"},Qe=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(Xe()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e,t=this.props,r=t.className,a=t.icon;return a?n.a.createElement("img",{className:b()(r),src:(e=a,"./images/weather-icons/".concat(Ye[e]||"unknown",".svg")),alt:""}):null}}]),a}(a.PureComponent);function Ze(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(Qe,"propTypes",{className:R.PropTypes.string,icon:R.PropTypes.string}),N()(Qe,"defaultProps",{className:"",icon:""});var $e=function(e){return 9*e/5+32},et=function(e){return 5*(e-32)/9},tt=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(Ze()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(e){var t;return p()(this,a),t=r.call(this,e),N()(A()(t),"getAltHighLow",(function(){var e=A()(t),r=e.weatherUnits,a=e.props.todaysForecast,s=a.temperatureMin,o=a.temperatureMax;if(!r)return null;var c="f"===r?et:$e;return n.a.createElement("div",{className:"high-low-alt text-muted"},c(s).toFixed(0),"/",c(o).toFixed(0),"°","f"===r?"C":"F")})),t.weatherUnits=H.get(z),t}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.todaysForecast,a=r.icon,s=r.summary,o=r.temperatureMin,c=r.temperatureMax;return n.a.createElement("div",{className:b()(t,"forecast","mb-3","d-flex","align-items-center","justify-content-center")},n.a.createElement(Qe,{icon:a}),n.a.createElement("div",{className:"text-truncate"},n.a.createElement("div",{className:"conditions text-truncate"},s),n.a.createElement("div",{className:"high-low"},o.toFixed(0),n.a.createElement("span",{className:"text-muted px-1"},"/"),c.toFixed(0),"°"),this.getAltHighLow()))}}]),a}(a.PureComponent);function rt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(tt,"propTypes",{className:R.PropTypes.string,todaysForecast:R.PropTypes.shape({icon:R.PropTypes.string,summary:R.PropTypes.string,temperatureMin:R.PropTypes.number,temperatureMax:R.PropTypes.number})}),N()(tt,"defaultProps",{className:"",todaysForecast:{}});var at=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(rt()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.alerts;return r.length?n.a.createElement("div",{className:b()(t,"col-12 alerts")},n.a.createElement("ul",null,r.map((function(e){return n.a.createElement("li",{key:e.title},e.title)})))):null}}]),a}(a.PureComponent);function nt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(at,"propTypes",{className:R.PropTypes.string,alerts:R.PropTypes.arrayOf(R.PropTypes.shape({title:R.PropTypes.string}))}),N()(at,"defaultProps",{className:"",alerts:[]});var st=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(nt()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.dailyForecasts,a=e.hourlyForecasts,s=e.alerts;return n.a.createElement("div",{className:b()(t,"side-panel px-3")},n.a.createElement(tt,{todaysForecast:r[0]}),n.a.createElement(Ge,{hourlyForecasts:a}),n.a.createElement(at,{alerts:s}))}}]),a}(a.PureComponent);function ot(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(st,"propTypes",{className:R.PropTypes.string,dailyForecasts:R.PropTypes.array,hourlyForecasts:R.PropTypes.array,alerts:R.PropTypes.array}),N()(st,"defaultProps",{className:"",dailyForecasts:[],hourlyForecasts:[],alerts:[]});var ct=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(ot()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.hourlyForecasts;return n.a.createElement(we.a,{className:"mb-0"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Time"),n.a.createElement("th",null,"Condition"),n.a.createElement("th",{"data-toggle":"tooltip",title:"Temp/Feels Like"},"Temp/FL"),n.a.createElement("th",null,"UVI"),n.a.createElement("th",null,"POP"),n.a.createElement("th",null,"Humid"))),n.a.createElement("tbody",null,r.slice(0,12).map((function(e){var r=e.time,a=e.temperature,s=e.uvIndex,o=e.humidity,c=e.precipProbability,l=e.apparentTemperature,i=e.icon,u=e.summary;return n.a.createElement("tr",{key:"hourly-forecast-".concat(r)},n.a.createElement("td",null,L()(1e3*r).format("hA")),n.a.createElement("td",null,n.a.createElement(Qe,{icon:i})," ",u),n.a.createElement("td",null,a.toFixed(0),"/",l.toFixed(0),"°"),n.a.createElement("td",null,s),n.a.createElement("td",{className:b()(t,{"text-info":c>=.3})},(100*c).toFixed(0),"%"),n.a.createElement("td",null,(100*o).toFixed(0),"%"))}))))}}]),a}(a.PureComponent);function lt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(ct,"propTypes",{className:R.PropTypes.string,hourlyForecasts:R.PropTypes.arrayOf(R.PropTypes.shape({time:R.PropTypes.number,temperature:R.PropTypes.number,uvIndex:R.PropTypes.number,humidity:R.PropTypes.number,precipProbability:R.PropTypes.number,apparentTemperature:R.PropTypes.number,icon:R.PropTypes.string,summary:R.PropTypes.string}))}),N()(ct,"defaultProps",{className:"",hourlyForecasts:[]});var it=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(lt()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.dailyForecasts;return n.a.createElement(k.a,{className:b()(t,"slim-gutters","forecasts")},r.slice(1,4).map((function(e){var t=e.summary,r=e.temperatureMin,a=e.temperatureMax,s=e.time,o=e.icon;return n.a.createElement(w.a,{sm:"4",key:"daily-forecast-".concat(s)},n.a.createElement("div",{className:"p-3 forecast d-flex align-items-center justify-content-center"},n.a.createElement(Qe,{icon:o}),n.a.createElement("div",{className:"text-truncate"},n.a.createElement("div",{className:"conditions text-truncate"},t),n.a.createElement("div",{className:"high-low"},r.toFixed(0),n.a.createElement("span",{className:"text-muted px-1"},"/"),a.toFixed(0)),n.a.createElement("div",{className:"date"},L()(1e3*s).format("dddd, MMM D")))))})))}}]),a}(a.PureComponent);function ut(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(r),!0).forEach((function(t){N()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ut(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ft(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(it,"propTypes",{className:R.PropTypes.string,dailyForecasts:R.PropTypes.arrayOf(R.PropTypes.shape({icon:R.PropTypes.string,summary:R.PropTypes.string,temperatureMin:R.PropTypes.number,temperatureMax:R.PropTypes.number,time:R.PropTypes.number}))}),N()(it,"defaultProps",{className:"",dailyForecasts:[]});var mt=[{readable:"Bernal Heights",lat:37.7448205,long:-122.4100494}],dt=function(e){y()(s,e);var t,r,a=(t=s,function(){var e,r=E()(t);if(ft()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function s(e){var t;return p()(this,s),t=a.call(this,e),N()(A()(t),"updateWeatherLocations",O()(D.a.mark((function e(){var r,a,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=H.get(W),a=H.get(z),e.prev=2,e.next=5,Je.fetchAllLocationsWeatherData(mt,r,a);case 5:n=e.sent,t.setState({loading:!0}),t.setState({locations:n.map((function(e,t){var r=e.data,a=r.hourly,n=r.daily,s=r.alerts;return pt({dailyForecasts:n.data,hourlyForecasts:a.data,alerts:s},mt[t])})),lastUpdated:L()(),fetchError:!1,loading:!1}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0),t.setState({fetchError:!0,loading:!1,lastUpdated:L()()});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))),t.state={locations:[],fetchError:!1,lastUpdated:void 0,loading:!1},t}return m()(s,[{key:"componentDidMount",value:(r=O()(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateWeatherLocations();case 2:this.interval=setInterval(this.updateWeatherLocations,9e5);case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props.className,t=this.state,r=t.locations,a=t.lastUpdated,s=t.fetchError,o=t.loading;return n.a.createElement("div",{className:b()(e,"weather")},s&&n.a.createElement("div",{className:"error-msg"},n.a.createElement("span",{className:"fas fa-exclamation-circle mr-1"}),n.a.createElement("span",null,"Weather request failed. Make sure ","you've"," supplied an API Key in the"," ",n.a.createElement("a",{href:"#/settings"},"settings"),".")),r.map((function(e){var t=e.hourlyForecasts,r=e.dailyForecasts,a=e.alerts,s=e.readable,o=e.lat,c=e.long;return n.a.createElement(M.a,{className:"mb-2",key:"".concat(o,",").concat(c)},n.a.createElement("div",{className:"location-readable"},n.a.createElement("small",null,s)),n.a.createElement(U.a,null,n.a.createElement(k.a,{className:"slim-gutters"},n.a.createElement(w.a,{xs:"5"},n.a.createElement(st,{dailyForecasts:r,hourlyForecasts:t,alerts:a})),n.a.createElement(w.a,{xs:"7"},n.a.createElement(ct,{hourlyForecasts:t})))),n.a.createElement(Ke.a,{className:"bg-transparent py-0"},n.a.createElement(it,{dailyForecasts:r})))})),n.a.createElement("div",{className:"d-flex justify-content-end"},n.a.createElement(le,{lastUpdated:a,msUntilWarning:18e5,loading:o})))}}]),s}(a.PureComponent);function yt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(dt,"propTypes",{className:R.PropTypes.string}),N()(dt,"defaultProps",{className:""});var ht=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(yt()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){return e.forceUpdate()}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props.className,t=L()(),r=t.format("MMMM Do, YYYY"),a=t.format("h:mm");return n.a.createElement("div",{className:b()(e,"current-time","row","py-1","align-items-baseline")},n.a.createElement("div",{className:"time col-6"},a),n.a.createElement("div",{className:"date col-6"},r))}}]),a}(a.PureComponent);function vt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(ht,"propTypes",{className:R.PropTypes.string}),N()(ht,"defaultProps",{className:""});var gt=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(vt()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props.className;return n.a.createElement("div",{className:b()(e)},n.a.createElement(ht,null),n.a.createElement(k.a,{className:"slim-gutters"},n.a.createElement(w.a,{sm:"5",className:"mb-4"},n.a.createElement(ze,null)),n.a.createElement(w.a,{sm:"7",className:"mb-4"},n.a.createElement(dt,null))))}}]),a}(a.PureComponent);N()(gt,"propTypes",{className:R.PropTypes.string}),N()(gt,"defaultProps",{className:""});var Et=r(534),Pt=r(533);function Nt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Rt="dark-mode",St="light-mode",bt=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(Nt()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(e){var t;return p()(this,a),t=r.call(this,e),N()(A()(t),"setMode",(function(e){document.documentElement.className=e,H.set(V,e),t.forceUpdate()})),N()(A()(t),"isDarkModeSelected",(function(){return document.documentElement.className===Rt})),t.setMode=t.setMode.bind(A()(t)),t}return m()(a,[{key:"render",value:function(){var e=this,t=this.props.className,r=this.isDarkModeSelected();return n.a.createElement(n.a.Fragment,null,n.a.createElement(Re.a,{className:"mr-2"},"Theme:"),n.a.createElement(Pt.a,{className:b()(t)},n.a.createElement(be.a,{onClick:function(){return e.setMode(Rt)},color:r?"primary":"secondary"},"Dark"),n.a.createElement(be.a,{onClick:function(){return e.setMode(St)},color:r?"secondary":"primary"},"Light")))}}]),a}(a.PureComponent);N()(bt,"propTypes",{className:R.PropTypes.string}),N()(bt,"defaultProps",{className:""});var Tt=r(536),jt=r(189);function kt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var wt=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(kt()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(e){var t;return p()(this,a),t=r.call(this,e),N()(A()(t),"rerender",(function(){return t.forceUpdate()})),N()(A()(t),"getLocalStorageData",(function(e){return H.get(e)})),N()(A()(t),"toggleShow",(function(){var e=t.state.show;t.setState({show:!e})})),t.state={show:!1},t}return m()(a,[{key:"componentDidMount",value:function(){window.addEventListener("storage",this.rerender)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("storage",this.rerender)}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.localStorageKey,a=this.state.show,s=JSON.stringify(this.getLocalStorageData(r));return n.a.createElement("div",{className:b()(t)},n.a.createElement("p",null,n.a.createElement(be.a,{color:"primary",onClick:this.toggleShow},a?"Hide":"Show"," LocalStorage Data")),n.a.createElement("p",{className:"small"},"JSON representation of the stored data."),a&&n.a.createElement(Tt.a,{language:"json",style:jt.monokai,className:"my-3"},s))}}]),a}(a.PureComponent);function xt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(wt,"propTypes",{className:R.PropTypes.string,localStorageKey:R.PropTypes.oneOf(q).isRequired}),N()(wt,"defaultProps",{className:""});var Dt=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(xt()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){var e;p()(this,a);for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e=r.call.apply(r,[this].concat(n)),N()(A()(e),"setSampleData",(function(){var t=e.props.localStorageKey;H.setSampleData(t)})),e}return m()(a,[{key:"render",value:function(){var e=this.props.className;return n.a.createElement("div",{className:b()(e)},n.a.createElement("p",null,n.a.createElement(be.a,{color:"primary",onClick:this.setSampleData},"Set Sample LocalStorage Data")),n.a.createElement("p",{className:"small"},"Replace stored data with sample data."))}}]),a}(a.PureComponent);function Ft(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(Dt,"propTypes",{className:R.PropTypes.string,localStorageKey:R.PropTypes.oneOf(Object.keys(J)).isRequired}),N()(Dt,"defaultProps",{className:""});var Ot=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(Ft()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(e){var t;return p()(this,a),t=r.call(this,e),N()(A()(t),"getInitialState",(function(){return{weatherKeyIsValid:void 0,weatherKeyValue:H.get(W),weatherUnits:H.get(z)}})),N()(A()(t),"onWeatherKeyChange",(function(e){t.setState({weatherKeyValue:e.target.value})})),N()(A()(t),"validateAndSetKey",function(){var e=O()(D.a.mark((function e(r){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),a=t.state.weatherKeyValue,e.prev=2,e.next=5,Je.isValidKey(a);case 5:if(!e.sent){e.next=9;break}return t.setState({weatherKeyIsValid:!0}),H.set(W,a),e.abrupt("return");case 9:t.setState({weatherKeyIsValid:!1}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),t.setState({weatherKeyIsValid:!1});case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}()),N()(A()(t),"setWeatherUnits",(function(e){t.setState({weatherUnits:e}),H.set(z,e)})),N()(A()(t),"dumpLocalStorageAndResetState",(function(){t.setState(t.getInitialState()),H.dump()})),t.state=t.getInitialState(),t}return m()(a,[{key:"render",value:function(){var e=this,t=this.props.className,r=this.state,a=r.weatherKeyIsValid,s=r.weatherKeyValue,o=r.weatherUnits;return n.a.createElement("div",{className:b()(t)},n.a.createElement("h1",null,"Settings"),n.a.createElement(k.a,null,n.a.createElement(w.a,{xs:"6"},n.a.createElement(M.a,{className:"mb-4"},n.a.createElement(Et.a,null,n.a.createElement("h3",{className:"m-0"},"Global")),n.a.createElement(U.a,null,n.a.createElement(bt,null),n.a.createElement("hr",null),n.a.createElement("p",null,n.a.createElement(be.a,{color:"danger",onClick:this.dumpLocalStorageAndResetState},"Dump All Local Storage")),n.a.createElement("p",{className:"small"},"This will remove stored bus stops, your DarkSky key, and the weather units."))))),n.a.createElement(k.a,null,n.a.createElement(w.a,{xs:"6"},n.a.createElement(M.a,{className:"mb-4"},n.a.createElement(Et.a,null,n.a.createElement("h3",{className:"m-0"},"Bus")),n.a.createElement(U.a,null,n.a.createElement(wt,{localStorageKey:K}),n.a.createElement("hr",null),n.a.createElement(Dt,{localStorageKey:K})))),n.a.createElement(w.a,{xs:"6"},n.a.createElement(M.a,{className:"mb-4"},n.a.createElement(Et.a,null,n.a.createElement("h3",{className:"m-0"},"Weather")),n.a.createElement(U.a,null,n.a.createElement(Pe.a,{onSubmit:this.validateAndSetKey},n.a.createElement(Ne.a,null,n.a.createElement(Re.a,{for:"weather-key"},"DarkSky API Key:"),n.a.createElement(Se.a,{type:"text",id:"weather-key",className:b()({"is-valid":a,"is-invalid":!1===a}),onChange:this.onWeatherKeyChange,value:s})),n.a.createElement(be.a,{color:"primary",type:"submit"},"Validate & Store Key")),n.a.createElement("hr",null),n.a.createElement(Ne.a,null,n.a.createElement(Re.a,{className:"mr-2"},"Weather Units:"),n.a.createElement(Pt.a,null,n.a.createElement(be.a,{color:""===o?"primary":"secondary",onClick:function(){return e.setWeatherUnits("")}},"Auto"),n.a.createElement(be.a,{color:"f"===o?"primary":"secondary",onClick:function(){return e.setWeatherUnits("f")}},"F"),n.a.createElement(be.a,{color:"c"===o?"primary":"secondary",onClick:function(){return e.setWeatherUnits("c")}},"C"))))))))}}]),a}(a.PureComponent);function Ct(){return n.a.createElement(c.a,null,n.a.createElement(i.a,null,n.a.createElement(j,null),n.a.createElement(l.c,null,n.a.createElement(l.a,{path:"/settings"},n.a.createElement(Ot,null)),n.a.createElement(l.a,{path:"/"},n.a.createElement(gt,null)))))}N()(Ot,"propTypes",{className:R.PropTypes.string}),N()(Ot,"defaultProps",{className:""});o.a.render(n.a.createElement(Ct,null),document.getElementById("react-app"))}});
//# sourceMappingURL=app.b996d80b.js.map