!function(e){function t(t){for(var n,c,s=t[0],i=t[1],l=t[2],p=0,f=[];p<s.length;p++)c=s[p],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&f.push(a[c][0]),a[c]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(u&&u(t);f.length;)f.shift()();return o.push.apply(o,l||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,s=1;s<r.length;s++){var i=r[s];0!==a[i]&&(n=!1)}n&&(o.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},a={0:0},o=[];function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var s=window.webpackJsonp=window.webpackJsonp||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=i;o.push([378,1]),r()}({378:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(52),c=r.n(o),s=(r(64),r(26)),i=r(18),l=r(398),u=r(6),p=r.n(u),f=r(7),m=r.n(f),d=r(9),y=r.n(d),h=r(10),v=r.n(h),g=r(4),E=r.n(g),P=r(2),R=r.n(P),N=r(1),S=r(3),T=r.n(S);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E()(e);if(t){var a=E()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v()(this,r)}}var w=function(e){y()(r,e);var t=b(r);function r(){return p()(this,r),t.apply(this,arguments)}return m()(r,[{key:"render",value:function(){var e=this.props.className;return a.a.createElement("div",{className:T()(e,"header")},a.a.createElement(s.b,{to:"/"},a.a.createElement("span",{className:"fas fa-home"})),a.a.createElement(s.b,{to:"/settings"},a.a.createElement("span",{className:"fas fa-cog"})))}}]),r}(n.PureComponent);R()(w,"propTypes",{className:N.PropTypes.string}),R()(w,"defaultProps",{className:""});var k=r(383),x=r(384),D=r(13),F=r.n(D),O=r(17),C=r.n(O),A=r(12),M=r.n(A),L=r(380),U=r(381),_=r(32),I=r.n(_),B="weatherKey",j="weatherUnits",W="routeStopTags",K="htmlClass",V=[B,j,W,K].reduce((function(e,t){return[].concat(I()(e),[t,"".concat("ngStorage-").concat(t)])}),[]),q=R()({},W,["14|5565","67|6208","27|3930","12|7552"]),J=function(){function e(){p()(this,e)}return m()(e,null,[{key:"get",value:function(e){return JSON.parse(window.localStorage.getItem(e)||window.localStorage.getItem("".concat("ngStorage-").concat(e)))||""}},{key:"set",value:function(e,t){window.localStorage.setItem(e,JSON.stringify(t)),window.dispatchEvent(new Event("storage"))}},{key:"setSampleData",value:function(e){this.set(e,q[e])}},{key:"dump",value:function(){V.forEach((function(e){return window.localStorage.removeItem(e)}))}},{key:"getBusStopsFromLocalStorage",value:function(){return this.get(W)||[]}},{key:"addBusStopToLocalStorage",value:function(e){var t=this.getBusStopsFromLocalStorage();this.set(W,I()(new Set([].concat(I()(t),[e]))))}},{key:"removeBusStopFromLocalStorage",value:function(e){var t=this.getBusStopsFromLocalStorage();this.set(W,t.filter((function(t){return t!==e})))}}]),e}(),H=r(29),X=r.n(H),z=r(25),G=r.n(z),Q=r(38),Y=r.n(Q),Z=r(54),$=r.n(Z),ee="https://nextbusxmlfeed.kevincfunk.workers.dev",te=function(e){return new Promise((function(t,r){navigator.geolocation.getCurrentPosition(t,r,e)}))},re=function(){function e(){p()(this,e)}var t,r,n,a;return m()(e,null,[{key:"getPredictions",value:(a=C()(F.a.mark((function e(t){var r,n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.get(ee,{params:{command:"predictionsForMultiStops",a:"sf-muni",stops:t,useShortTitles:!0},paramsSerializer:function(e){return $.a.stringify(e,{arrayFormat:"repeat"})}});case 2:return r=e.sent,n=this.parsePredictionsXMLResponse(r.data),e.abrupt("return",new Promise((function(e,t){var r,a,o=null==n||null===(r=n.body)||void 0===r||null===(a=r.Error)||void 0===a?void 0:a.__text;o&&t(new Error(o)),e(n)})));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"getRouteConfig",value:(n=C()(F.a.mark((function e(){var t,r,n=this;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.get(ee,{params:{command:"routeConfig",a:"sf-muni",useShortTitles:!0}});case 2:return t=e.sent,r=this.parseRouteConfigXMLResponse(t.data),e.abrupt("return",new Promise((function(e,t){var a,o,c=null==r||null===(a=r.body)||void 0===a||null===(o=a.Error)||void 0===o?void 0:o.__text;c&&t(new Error(c)),e(n.mergeRouteData(r.body.route))})));case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getStopsNearMe",value:(r=C()(F.a.mark((function e(t){var r,n,a,o,c,s;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.all([te(),this.getRouteConfig()]);case 2:return r=e.sent,n=X()(r,2),a=n[0],o=n[1],c=new google.maps.LatLng(a.coords.latitude,a.coords.longitude),s=[],o.forEach((function(e){e.direction.forEach((function(r){r.stop.forEach((function(n){var a=new google.maps.LatLng(n._lat,n._lon);google.maps.geometry.spherical.computeDistanceBetween(c,a)<=t&&s.push({tag:e._tag,title:e._title,directionName:r._name,directionTitle:r._title,latLng:a,stopId:n._stopId,stopTag:n._tag,stopTitle:n._title})}))}))})),e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"isValidStop",value:(t=C()(F.a.mark((function e(t){var r,n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getPredictions([t]);case 3:return n=e.sent,e.abrupt("return",!!(null==n||null===(r=n.body)||void 0===r?void 0:r.predictions));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return t.apply(this,arguments)})},{key:"parsePredictionsXMLResponse",value:function(e){return new Y.a({arrayAccessFormPaths:["body.predictions","body.predictions.direction.prediction"]}).xml2js(e)}},{key:"parseRouteConfigXMLResponse",value:function(e){return new Y.a({arrayAccessFormPaths:["body.route"]}).xml2js(e)}},{key:"getRouteStopTag",value:function(e,t){return"".concat(e,"|").concat(t)}},{key:"splitRouteStopTag",value:function(e){return e.split("|")}}]),e}();R()(re,"mergeRouteData",(function(e){return e.forEach((function(e){var t={};e.stop.forEach((function(e){t[e._tag]=e})),e.direction.forEach((function(e){e.stop.forEach((function(r,n){e.stop[n]=t[r._tag]}))}))})),e}));var ne=r(400),ae=r(55);function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E()(e);if(t){var a=E()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v()(this,r)}}var ce=function(e){y()(r,e);var t=oe(r);function r(){return p()(this,r),t.apply(this,arguments)}return m()(r,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.loading,n=e.small;return r?a.a.createElement("div",{className:T()(t,"spinner",{"spinner-small":n})},a.a.createElement("div",{className:"bounce1"}),a.a.createElement("div",{className:"bounce2"}),a.a.createElement("div",{className:"bounce3"})):null}}]),r}(n.PureComponent);function se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E()(e);if(t){var a=E()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v()(this,r)}}R()(ce,"propTypes",{className:N.PropTypes.string,loading:N.PropTypes.bool,small:N.PropTypes.bool}),R()(ce,"defaultProps",{className:"",loading:!1,small:!1});var ie=function(e){y()(r,e);var t=se(r);function r(){var e;p()(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),R()(M()(e),"getReadableTime",(function(){var t=e.props.lastUpdated,r=Object(ne.a)(t,new Date,{roundingMethod:"round"});return"0 seconds"===r?"Just now.":"".concat(r," ago.")})),R()(M()(e),"isOverdue",(function(){var t=e.props,r=t.lastUpdated,n=t.msUntilWarning;return!!r&&Object(ae.a)(new Date,r)>=n})),e}return m()(r,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){return e.forceUpdate()}),250)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.lastUpdated,n=e.loading,o=this.isOverdue();return a.a.createElement("div",{className:T()(t,"time-since-last-updated")},a.a.createElement("span",{className:T()({overdue:o})},r&&this.getReadableTime()),a.a.createElement(ce,{className:"my-1 ml-auto",loading:n,small:!0}))}}]),r}(n.PureComponent);function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E()(e);if(t){var a=E()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v()(this,r)}}R()(ie,"propTypes",{className:N.PropTypes.string,lastUpdated:N.PropTypes.object,msUntilWarning:N.PropTypes.number,loading:N.PropTypes.bool}),R()(ie,"defaultProps",{className:"",lastUpdated:null,msUntilWarning:6e4,loading:!1});var ue=function(e){y()(r,e);var t=le(r);function r(){return p()(this,r),t.apply(this,arguments)}return m()(r,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.children;return r?a.a.createElement("div",{className:T()(t,"error-message")},a.a.createElement("span",{className:"fas fa-exclamation-circle mr-1"}),a.a.createElement("span",null,r)):null}}]),r}(n.PureComponent);function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E()(e);if(t){var a=E()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v()(this,r)}}R()(ue,"propTypes",{className:N.PropTypes.string,children:N.PropTypes.node}),R()(ue,"defaultProps",{className:""});var fe=function(e){y()(r,e);var t=pe(r);function r(){return p()(this,r),t.apply(this,arguments)}return m()(r,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.prediction,n=r.direction,o=r._dirTitleBecauseNoPredictions,c=r._stopTitle;return a.a.createElement("div",{className:T()(t)},a.a.createElement("div",{className:"font-weight-bold"},(null==n?void 0:n._title)||o),a.a.createElement("div",null,"@",c))}}]),r}(n.PureComponent);function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E()(e);if(t){var a=E()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v()(this,r)}}R()(fe,"propTypes",{className:N.PropTypes.string,prediction:N.PropTypes.shape({direction:N.PropTypes.shape({_title:N.PropTypes.string}),_stopTitle:N.PropTypes.string,_dirTitleBecauseNoPredictions:N.PropTypes.string})}),R()(fe,"defaultProps",{className:"",prediction:{}});var de=function(e){y()(r,e);var t=me(r);function r(){return p()(this,r),t.apply(this,arguments)}return m()(r,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.predictionTimes;return a.a.createElement("div",{className:T()(t,"prediction-times")},r.length?a.a.createElement(a.a.Fragment,null,r.slice(0,4).map((function(e,t){return a.a.createElement("span",{key:"".concat(e._tripTag)},a.a.createElement("span",{className:T()("prediction-time",{"not-affected-by-layover":!e._affectedByLayover,"next-time":0===t,"other-time":0!==t})},"0"===e._minutes?"Now":e._minutes),t!==r.length-1&&", ")}))):a.a.createElement("span",{className:"no-prediction-time"},"None"))}}]),r}(n.PureComponent);function ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E()(e);if(t){var a=E()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v()(this,r)}}R()(de,"propTypes",{className:N.PropTypes.string,predictionTimes:N.PropTypes.arrayOf(N.PropTypes.shape({_tripTag:N.PropTypes.string,_affectedByLayover:N.PropTypes.string,_minutes:N.PropTypes.string}))}),R()(de,"defaultProps",{className:"",predictionTimes:[]});var he=function(e){y()(r,e);var t=ye(r);function r(){return p()(this,r),t.apply(this,arguments)}return m()(r,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.routeTag,n=e.children;return a.a.createElement(L.a,{className:T()(t,"mb-2")},a.a.createElement(U.a,{className:"d-flex align-items-center justify-content-between"},a.a.createElement("div",{className:"route-tag"},r),a.a.createElement("div",{className:"route-tag-details"},n)))}}]),r}(n.PureComponent);function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E()(e);if(t){var a=E()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v()(this,r)}}R()(he,"propTypes",{className:N.PropTypes.string,routeTag:N.PropTypes.string.isRequired,children:N.PropTypes.node.isRequired}),R()(he,"defaultProps",{className:""});var ge=function(e){y()(r,e);var t=ve(r);function r(){return p()(this,r),t.apply(this,arguments)}return m()(r,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.predictions;return a.a.createElement("div",{className:T()(t)},r.map((function(e){var t=e._routeTag,r=e._stopTag,n=e.direction;return a.a.createElement(he,{routeTag:t,key:"".concat(t,"-").concat(r)},a.a.createElement(de,{predictionTimes:null==n?void 0:n.prediction}),a.a.createElement(fe,{prediction:e}))})))}}]),r}(n.PureComponent);R()(ge,"propTypes",{className:N.PropTypes.string,predictions:N.PropTypes.arrayOf(N.PropTypes.shape({_routeTag:N.PropTypes.string,_stopTag:N.PropTypes.string,direction:N.PropTypes.shape({prediction:N.PropTypes.arrayOf(N.PropTypes.shape({_tripTag:N.PropTypes.string,_affectedByLayover:N.PropTypes.string,_minutes:N.PropTypes.string}))})}))}),R()(ge,"defaultProps",{className:"",predictions:[]});var Ee=r(390),Pe=r(391),Re=r(392),Ne=r(393),Se=r(394),Te=r(382),be=r(385),we=r(386),ke=r(387),xe=r(388);function De(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E()(e);if(t){var a=E()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v()(this,r)}}var Fe=function(e){y()(r,e);var t=De(r);function r(e){var n;return p()(this,r),n=t.call(this,e),R()(M()(n),"onChange",(function(e,t){n.setState(R()({},t,e.target.value))})),R()(M()(n),"validateAndAddStop",function(){var e=C()(F.a.mark((function e(t){var r,a,o,c,s;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=n.props.onAddOrRemoveStop,a=n.state,o=a.routeTag,c=a.stopTag,s=re.getRouteStopTag(o,c),n.setState({stopIsValid:void 0}),e.next=7,re.isValidStop(s);case 7:if(!e.sent){e.next=12;break}return n.setState({stopIsValid:!0}),J.addBusStopToLocalStorage(s),r(),e.abrupt("return");case 12:n.setState({stopIsValid:!1});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.state={routeTag:"",stopTag:"",stopIsValid:void 0},n}return m()(r,[{key:"render",value:function(){var e=this,t=this.props.className,r=this.state,n=r.routeTag,o=r.stopTag,c=r.stopIsValid;return a.a.createElement(Te.a,{onSubmit:this.validateAndAddStop,className:T()(t)},a.a.createElement(k.a,null,a.a.createElement(x.a,{xs:"6"},a.a.createElement(be.a,null,a.a.createElement(we.a,{for:"manual-add-route-tag"},"Route Tag:"),a.a.createElement(ke.a,{type:"text",id:"manual-add-route-tag",className:T()({"is-valid":c,"is-invalid":!1===c}),onChange:function(t){return e.onChange(t,"routeTag")},placeholder:"12",value:n}))),a.a.createElement(x.a,{xs:"6"},a.a.createElement(be.a,null,a.a.createElement(we.a,{for:"manual-add-route-stop"},"Stop Tag:"),a.a.createElement(ke.a,{type:"text",id:"manual-add-route-stop",className:T()({"is-valid":c,"is-invalid":!1===c}),onChange:function(t){return e.onChange(t,"stopTag")},placeholder:"5837",value:o})))),a.a.createElement("div",null,a.a.createElement(xe.a,{color:"primary",type:"submit"},"Validate & Add Stop")))}}]),r}(n.PureComponent);R()(Fe,"propTypes",{className:N.PropTypes.string,onAddOrRemoveStop:N.PropTypes.func.isRequired}),R()(Fe,"defaultProps",{className:""});var Oe=r(389);function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E()(e);if(t){var a=E()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v()(this,r)}}var Ae=function(e){y()(r,e);var t=Ce(r);function r(e){var n;return p()(this,r),n=t.call(this,e),R()(M()(n),"getNearbyStops",function(){var e=C()(F.a.mark((function e(t){var r,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.target.value){e.next=3;break}return e.abrupt("return");case 3:return n.setState({loading:!0}),e.prev=4,e.next=7,re.getStopsNearMe(r);case 7:a=e.sent,n.setState({loading:!1,errMsg:void 0,nearbyStops:a}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.error(e.t0.message),n.setState({loading:!1,errMsg:e.t0.message});case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}()),R()(M()(n),"addStop",(function(e){var t=n.props.onAddOrRemoveStop;J.addBusStopToLocalStorage(e),t()})),n.state={loading:!1,errMsg:void 0,nearbyStops:[]},n}return m()(r,[{key:"render",value:function(){var e=this,t=this.props.className,r=this.state,n=r.loading,o=r.errMsg,c=r.nearbyStops;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Te.a,{className:T()(t,"mb-2"),inline:!0},a.a.createElement(we.a,{className:"mr-2"},"Find stops within"),a.a.createElement(ke.a,{type:"select",onChange:this.getNearbyStops},a.a.createElement("option",{value:""},"--Choose One--"),a.a.createElement("option",{value:"322"},"1/5 mile"),a.a.createElement("option",{value:"402"},"1/4 mile"),a.a.createElement("option",{value:"804"},"1/2 mile")),a.a.createElement(ce,{className:"ml-3",loading:n})),a.a.createElement(ue,null,o),!!c.length&&a.a.createElement(Oe.a,{striped:!0,hover:!0,className:"mt-4"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Route"),a.a.createElement("th",null,"Direction"),a.a.createElement("th",null,"Stop"))),a.a.createElement("tbody",null,c.map((function(t){var r=t.tag,n=t.stopTag,o=t.title,c=t.directionTitle,s=t.stopTitle,i=re.getRouteStopTag(r,n);return a.a.createElement("tr",{className:"clickable",key:i,onClick:function(){return e.addStop(i)}},a.a.createElement("td",null,o),a.a.createElement("td",null,c),a.a.createElement("td",null,s))})))))}}]),r}(n.PureComponent);function Me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E()(e);if(t){var a=E()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v()(this,r)}}R()(Ae,"propTypes",{className:N.PropTypes.string,onAddOrRemoveStop:N.PropTypes.func.isRequired}),R()(Ae,"defaultProps",{className:""});var Le=function(e){y()(r,e);var t=Me(r);function r(e){var n;return p()(this,r),n=t.call(this,e),R()(M()(n),"toggle",(function(e){n.state.activeTab!==e&&n.setState({activeTab:e})})),n.state={activeTab:"1"},n}return m()(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.className,n=t.toggleAddStopForm,o=t.onAddOrRemoveStop,c=this.state.activeTab;return a.a.createElement("div",{className:T()(r,"add-form","mb-2")},a.a.createElement(Ee.a,{tabs:!0},a.a.createElement(Pe.a,null,a.a.createElement(Re.a,{className:T()("clickable",{active:"1"===c}),onClick:function(){return e.toggle("1")}},"Geolocation")),a.a.createElement(Pe.a,null,a.a.createElement(Re.a,{className:T()("clickable",{active:"2"===c}),onClick:function(){return e.toggle("2")}},"Manual Input")),a.a.createElement("button",{type:"button",className:"btn close-form",onClick:n},a.a.createElement("span",{className:"fas fa-times"}))),a.a.createElement(Ne.a,{activeTab:c},a.a.createElement(Se.a,{tabId:"1"},a.a.createElement(Ae,{onAddOrRemoveStop:o})),a.a.createElement(Se.a,{tabId:"2"},a.a.createElement(Fe,{onAddOrRemoveStop:o}))))}}]),r}(n.PureComponent);R()(Le,"propTypes",{className:N.PropTypes.string,toggleAddStopForm:N.PropTypes.func.isRequired,onAddOrRemoveStop:N.PropTypes.func.isRequired}),R()(Le,"defaultProps",{className:""});var Ue=r(24),_e=r.n(Ue);function Ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E()(e);if(t){var a=E()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v()(this,r)}}var Be={className:"mr-1",size:"xs",color:"secondary",outline:!0},je=function(e){y()(r,e);var t=Ie(r);function r(){return p()(this,r),t.apply(this,arguments)}return m()(r,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.showBusRemove,n=e.toggleShowBusRemove,o=e.toggleAddStopForm,c=J.getBusStopsFromLocalStorage();return a.a.createElement("div",{className:T()(t,"mb-2")},!r&&a.a.createElement(xe.a,_e()({},Be,{onClick:o}),a.a.createElement("span",{className:"fas fa-plus"})),!!c.length&&a.a.createElement(xe.a,_e()({},Be,{onClick:n}),a.a.createElement("span",{className:"fas fa-pen"})))}}]),r}(n.PureComponent);function We(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E()(e);if(t){var a=E()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v()(this,r)}}R()(je,"propTypes",{className:N.PropTypes.string,showBusRemove:N.PropTypes.bool.isRequired,toggleShowBusRemove:N.PropTypes.func.isRequired,toggleAddStopForm:N.PropTypes.func.isRequired}),R()(je,"defaultProps",{className:""});var Ke=function(e){y()(r,e);var t=We(r);function r(){var e;p()(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),R()(M()(e),"removeStop",(function(t,r){var n=re.getRouteStopTag(t,r),a=e.props.onAddOrRemoveStop;J.removeBusStopFromLocalStorage(n),a(),e.forceUpdate()})),e}return m()(r,[{key:"render",value:function(){var e=this,t=this.props.className,r=J.getBusStopsFromLocalStorage();return a.a.createElement("div",{className:T()(t)},r.map((function(t){var r=re.splitRouteStopTag(t),n=X()(r,2),o=n[0],c=n[1];return a.a.createElement(he,{routeTag:o,key:t},a.a.createElement(xe.a,{color:"danger",size:"lg",onClick:function(){return e.removeStop(o,c)}},"Remove Stop"))})))}}]),r}(n.PureComponent);function Ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E()(e);if(t){var a=E()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v()(this,r)}}R()(Ke,"propTypes",{className:N.PropTypes.string,onAddOrRemoveStop:N.PropTypes.func.isRequired});var qe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];return t.forEach((function(t){var n="".concat(t._routeTag,"|").concat(t._stopTag);r[e.indexOf(n)]=t})),r},Je=function(e){y()(n,e);var t,r=Ve(n);function n(e){var t;return p()(this,n),t=r.call(this,e),R()(M()(t),"toggleAddStopForm",(function(){var e=t.state.showAddStopForm;t.setState({showAddStopForm:!e})})),R()(M()(t),"onAddOrRemoveStop",C()(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return clearInterval(t.interval),e.next=3,t.updateBusPredictions();case 3:t.interval=setInterval(t.updateBusPredictions,1e4);case 4:case"end":return e.stop()}}),e)})))),R()(M()(t),"toggleShowBusRemove",(function(){var e=t.state.showBusRemove;t.setState({showBusRemove:!e})})),R()(M()(t),"updateBusPredictions",C()(F.a.mark((function e(){var r,n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=J.getBusStopsFromLocalStorage()).length){e.next=3;break}return e.abrupt("return");case 3:return t.setState({loading:!0}),e.prev=4,e.next=7,re.getPredictions(r);case 7:n=e.sent,t.setState({predictions:qe(r,n.body.predictions),loading:!1,lastUpdated:new Date,errMsg:void 0}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.error(e.t0.message),t.setState({loading:!1,errMsg:e.t0.message});case 15:case"end":return e.stop()}}),e,null,[[4,11]])})))),t.state={predictions:[],lastUpdated:void 0,showAddStopForm:!1,showBusRemove:!1,loading:!1,errMsg:void 0},t}return m()(n,[{key:"componentDidMount",value:(t=C()(F.a.mark((function e(){var t=this;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateBusPredictions();case 2:this.interval=setInterval((function(){return t.updateBusPredictions()}),1e4);case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props.className,t=this.state,r=t.predictions,n=t.lastUpdated,o=t.showAddStopForm,c=t.showBusRemove,s=t.loading,i=t.errMsg;return a.a.createElement("div",{className:T()(e,"bus")},!i&&!r.length&&a.a.createElement(L.a,{className:"mb-2"},a.a.createElement(U.a,null,"No bus stops added.")),c?a.a.createElement(Ke,{onAddOrRemoveStop:this.onAddOrRemoveStop}):a.a.createElement(ge,{predictions:r}),o&&a.a.createElement(Le,{toggleAddStopForm:this.toggleAddStopForm,onAddOrRemoveStop:this.onAddOrRemoveStop}),!o&&a.a.createElement("div",{className:"d-flex align-items-start justify-content-between"},a.a.createElement(je,{toggleAddStopForm:this.toggleAddStopForm,showBusRemove:c,toggleShowBusRemove:this.toggleShowBusRemove}),a.a.createElement(ie,{lastUpdated:n,msUntilWarning:2e4,loading:s})),a.a.createElement(ue,null,i))}}]),n}(n.PureComponent);R()(Je,"propTypes",{className:N.PropTypes.string}),R()(Je,"defaultProps",{className:""});var He=r(395),Xe=r(396),ze=r(56),Ge=r.n(ze),Qe=function(){function e(){p()(this,e)}var t,r;return m()(e,null,[{key:"fetchWeatherData",value:(r=C()(F.a.mark((function e(t){var r,n,a,o,c;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.lat,n=t.long,a=t.key,o=t.units,e.next=3,G.a.get(this.getUrl({lat:r,long:n,key:a,units:o}),{adapter:Ge.a});case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"fetchAllLocationsWeatherData",value:(t=C()(F.a.mark((function e(t,r,n){var a,o,c=this;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.convertUnitsForDarkSky(n),e.next=3,G.a.all(t.map((function(e){var t=e.lat,n=e.long;return c.fetchWeatherData({lat:t,long:n,key:r,units:a})})));case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})}]),e}();R()(Qe,"getUrl",(function(e){var t=e.base,r=void 0===t?"https://api.darksky.net/forecast":t,n=e.key,a=e.lat,o=e.long,c=e.exclude,s=void 0===c?"minutely,flags,currently":c,i=e.lang,l=void 0===i?"en":i,u=e.units,p=void 0===u?"auto":u;return"".concat(r,"/").concat(n,"/").concat(a,",").concat(o,"?exclude=").concat(s,"&lang=").concat(l,"&units=").concat(p)})),R()(Qe,"isValidKey",function(){var e=C()(F.a.mark((function e(t){var r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe.fetchWeatherData({lat:38,long:-122,key:t});case 2:return r=e.sent,e.abrupt("return",!!(null==r?void 0:r.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),R()(Qe,"convertUnitsForDarkSky",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auto";switch(e){case"f":return"us";case"c":return"si";case"":case"auto":return"auto";default:throw new Error("Invalid Unit type: ".concat(e))}}));var Ye=r(399);function Ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E()(e);if(t){var a=E()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v()(this,r)}}var $e=function(e){y()(r,e);var t=Ze(r);function r(){var e;p()(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),R()(M()(e),"getFirstRainForecast",(function(){return e.props.hourlyForecasts.slice(0,23).find((function(e){return e.precipProbability>=.3}))||{}})),e}return m()(r,[{key:"render",value:function(){var e=this.props.className,t=this.getFirstRainForecast(),r=t.precipProbability,n=t.time;return a.a.createElement("div",{className:T()(e,"rain-chance","mb-3")},r?a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"umbrella bring-umbrella"}),a.a.createElement("span",{className:"pop text-info"},(100*r).toFixed(0),"%"),a.a.createElement("sup",{className:"at mx-1"},"@"),a.a.createElement("span",{className:"time"},Object(Ye.a)(new Date(1e3*n),"ha"))):a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"umbrella no-umbrella"}),a.a.createElement("div",{className:"no-rain"},"No rain in 24hr.")),a.a.createElement("div",{className:"text-muted"},"Based on a ",30..toFixed(0),"% chance threshold."))}}]),r}(n.PureComponent);function et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E()(e);if(t){var a=E()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v()(this,r)}}R()($e,"propTypes",{className:N.PropTypes.string,hourlyForecasts:N.PropTypes.arrayOf(N.PropTypes.shape({precipProbability:N.PropTypes.number,time:N.PropTypes.number}))}),R()($e,"defaultProps",{className:"",hourlyForecasts:[]});var tt={"clear-day":"clear","clear-night":"clear",cloudy:"cloudy",fog:"fog","partly-cloudy-day":"partlycloudy","partly-cloudy-night":"partlycloudy",rain:"rain",sleet:"sleet",snow:"snow",wind:"wind"},rt=function(e){y()(r,e);var t=et(r);function r(){return p()(this,r),t.apply(this,arguments)}return m()(r,[{key:"render",value:function(){var e,t=this.props,r=t.className,n=t.icon;return n?a.a.createElement("img",{className:T()(r),src:(e=n,"./images/weather-icons/".concat(tt[e]||"unknown",".svg")),alt:""}):null}}]),r}(n.PureComponent);function nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E()(e);if(t){var a=E()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v()(this,r)}}R()(rt,"propTypes",{className:N.PropTypes.string,icon:N.PropTypes.string}),R()(rt,"defaultProps",{className:"",icon:""});var at=function(e){return 9*e/5+32},ot=function(e){return 5*(e-32)/9},ct=function(e){y()(r,e);var t=nt(r);function r(e){var n;return p()(this,r),n=t.call(this,e),R()(M()(n),"getAltHighLow",(function(){var e=M()(n),t=e.weatherUnits,r=e.props.todaysForecast,o=r.temperatureMin,c=r.temperatureMax;if(!t)return null;var s="f"===t?ot:at;return a.a.createElement("div",{className:"high-low-alt text-muted"},s(o).toFixed(0),"/",s(c).toFixed(0),"°","f"===t?"C":"F")})),n.weatherUnits=J.get(j),n}return m()(r,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.todaysForecast,n=r.icon,o=r.summary,c=r.temperatureMin,s=r.temperatureMax;return a.a.createElement("div",{className:T()(t,"forecast","mb-3","d-flex","align-items-center","justify-content-center")},a.a.createElement(rt,{icon:n}),a.a.createElement("div",{className:"text-truncate"},a.a.createElement("div",{className:"conditions text-truncate"},o),a.a.createElement("div",{className:"high-low"},c.toFixed(0),a.a.createElement("span",{className:"text-muted px-1"},"/"),s.toFixed(0),"°"),this.getAltHighLow()))}}]),r}(n.PureComponent);function st(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E()(e);if(t){var a=E()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v()(this,r)}}R()(ct,"propTypes",{className:N.PropTypes.string,todaysForecast:N.PropTypes.shape({icon:N.PropTypes.string,summary:N.PropTypes.string,temperatureMin:N.PropTypes.number,temperatureMax:N.PropTypes.number})}),R()(ct,"defaultProps",{className:"",todaysForecast:{}});var it=function(e){y()(r,e);var t=st(r);function r(){return p()(this,r),t.apply(this,arguments)}return m()(r,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.alerts;return r.length?a.a.createElement("div",{className:T()(t,"alerts")},a.a.createElement("ul",null,r.map((function(e){return a.a.createElement("li",{key:e.title},e.title)})))):null}}]),r}(n.PureComponent);function lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E()(e);if(t){var a=E()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v()(this,r)}}R()(it,"propTypes",{className:N.PropTypes.string,alerts:N.PropTypes.arrayOf(N.PropTypes.shape({title:N.PropTypes.string}))}),R()(it,"defaultProps",{className:"",alerts:[]});var ut=function(e){y()(r,e);var t=lt(r);function r(){return p()(this,r),t.apply(this,arguments)}return m()(r,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.dailyForecasts,n=e.hourlyForecasts,o=e.alerts;return a.a.createElement("div",{className:T()(t,"side-panel px-3")},a.a.createElement(ct,{todaysForecast:r[0]}),a.a.createElement($e,{hourlyForecasts:n}),a.a.createElement(it,{alerts:o}))}}]),r}(n.PureComponent);function pt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E()(e);if(t){var a=E()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v()(this,r)}}R()(ut,"propTypes",{className:N.PropTypes.string,dailyForecasts:N.PropTypes.array,hourlyForecasts:N.PropTypes.array,alerts:N.PropTypes.array}),R()(ut,"defaultProps",{className:"",dailyForecasts:[],hourlyForecasts:[],alerts:[]});var ft=function(e){y()(r,e);var t=pt(r);function r(){return p()(this,r),t.apply(this,arguments)}return m()(r,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.hourlyForecasts;return a.a.createElement(Oe.a,{className:"mb-0"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Time"),a.a.createElement("th",null,"Condition"),a.a.createElement("th",{"data-toggle":"tooltip",title:"Temp/Feels Like"},"Temp/FL"),a.a.createElement("th",null,"UVI"),a.a.createElement("th",null,"POP"),a.a.createElement("th",null,"Humid"))),a.a.createElement("tbody",null,r.slice(0,12).map((function(e){var r=e.time,n=e.temperature,o=e.uvIndex,c=e.humidity,s=e.precipProbability,i=e.apparentTemperature,l=e.icon,u=e.summary;return a.a.createElement("tr",{key:"hourly-forecast-".concat(r)},a.a.createElement("td",null,Object(Ye.a)(new Date(1e3*r),"ha")),a.a.createElement("td",null,a.a.createElement(rt,{icon:l})," ",u),a.a.createElement("td",null,n.toFixed(0),"/",i.toFixed(0),"°"),a.a.createElement("td",null,o),a.a.createElement("td",{className:T()(t,{"text-info":s>=.3})},(100*s).toFixed(0),"%"),a.a.createElement("td",null,(100*c).toFixed(0),"%"))}))))}}]),r}(n.PureComponent);function mt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E()(e);if(t){var a=E()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v()(this,r)}}R()(ft,"propTypes",{className:N.PropTypes.string,hourlyForecasts:N.PropTypes.arrayOf(N.PropTypes.shape({time:N.PropTypes.number,temperature:N.PropTypes.number,uvIndex:N.PropTypes.number,humidity:N.PropTypes.number,precipProbability:N.PropTypes.number,apparentTemperature:N.PropTypes.number,icon:N.PropTypes.string,summary:N.PropTypes.string}))}),R()(ft,"defaultProps",{className:"",hourlyForecasts:[]});var dt=function(e){y()(r,e);var t=mt(r);function r(){return p()(this,r),t.apply(this,arguments)}return m()(r,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.dailyForecasts;return a.a.createElement(k.a,{className:T()(t,"slim-gutters","forecasts")},r.slice(1,4).map((function(e){var t=e.summary,r=e.temperatureMin,n=e.temperatureMax,o=e.time,c=e.icon;return a.a.createElement(x.a,{sm:"4",key:"daily-forecast-".concat(o)},a.a.createElement("div",{className:"p-3 forecast d-flex align-items-center justify-content-center"},a.a.createElement(rt,{icon:c}),a.a.createElement("div",{className:"text-truncate"},a.a.createElement("div",{className:"conditions text-truncate"},t),a.a.createElement("div",{className:"high-low"},r.toFixed(0),a.a.createElement("span",{className:"text-muted px-1"},"/"),n.toFixed(0)),a.a.createElement("div",{className:"date"},Object(Ye.a)(new Date(1e3*o),"EEEE, LLL d")))))})))}}]),r}(n.PureComponent);function yt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ht(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(r),!0).forEach((function(t){R()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E()(e);if(t){var a=E()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v()(this,r)}}R()(dt,"propTypes",{className:N.PropTypes.string,dailyForecasts:N.PropTypes.arrayOf(N.PropTypes.shape({icon:N.PropTypes.string,summary:N.PropTypes.string,temperatureMin:N.PropTypes.number,temperatureMax:N.PropTypes.number,time:N.PropTypes.number}))}),R()(dt,"defaultProps",{className:"",dailyForecasts:[]});var gt=[{readable:"Bernal Heights",lat:37.7448205,long:-122.4100494}],Et=function(e){y()(n,e);var t,r=vt(n);function n(e){var t;return p()(this,n),t=r.call(this,e),R()(M()(t),"updateWeatherLocations",C()(F.a.mark((function e(){var r,n,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=J.get(B),n=J.get(j),e.prev=2,e.next=5,Qe.fetchAllLocationsWeatherData(gt,r,n);case 5:a=e.sent,t.setState({loading:!0}),t.setState({locations:a.map((function(e,t){var r=e.data,n=r.hourly,a=r.daily,o=r.alerts;return ht({dailyForecasts:a.data,hourlyForecasts:n.data,alerts:o},gt[t])})),lastUpdated:new Date,fetchError:!1,loading:!1}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0),t.setState({fetchError:!0,loading:!1});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))),t.state={locations:[],fetchError:!1,lastUpdated:void 0,loading:!1},t}return m()(n,[{key:"componentDidMount",value:(t=C()(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateWeatherLocations();case 2:this.interval=setInterval(this.updateWeatherLocations,9e5);case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props.className,t=this.state,r=t.locations,n=t.lastUpdated,o=t.fetchError,c=t.loading;return a.a.createElement("div",{className:T()(e,"weather")},o&&a.a.createElement(ue,null,"Weather request failed. Make sure ","you've"," supplied an API Key in the"," ",a.a.createElement("a",{href:"#/settings"},"settings"),"."),r.map((function(e){var t=e.hourlyForecasts,r=e.dailyForecasts,n=e.alerts,o=e.readable,c=e.lat,s=e.long;return a.a.createElement(L.a,{className:"mb-2",key:"".concat(c,",").concat(s)},a.a.createElement(He.a,{className:"text-center py-1 text-uppercase"},o),a.a.createElement(U.a,null,a.a.createElement(k.a,{className:"slim-gutters"},a.a.createElement(x.a,{md:"5"},a.a.createElement(ut,{dailyForecasts:r,hourlyForecasts:t,alerts:n})),a.a.createElement(x.a,{md:"7"},a.a.createElement(ft,{hourlyForecasts:t})))),a.a.createElement(Xe.a,{className:"bg-transparent py-0"},a.a.createElement(dt,{dailyForecasts:r})))})),a.a.createElement("div",{className:"d-flex justify-content-end"},a.a.createElement(ie,{lastUpdated:n,msUntilWarning:18e5,loading:c})))}}]),n}(n.PureComponent);function Pt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E()(e);if(t){var a=E()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v()(this,r)}}R()(Et,"propTypes",{className:N.PropTypes.string}),R()(Et,"defaultProps",{className:""});var Rt=function(e){y()(r,e);var t=Pt(r);function r(){return p()(this,r),t.apply(this,arguments)}return m()(r,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){return e.forceUpdate()}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props.className,t=new Date,r=Object(Ye.a)(t,"MMMM do, yyy"),n=Object(Ye.a)(t,"h:mm");return a.a.createElement(k.a,{className:T()(e,"current-time","py-3","py-md-1","align-items-baseline")},a.a.createElement(x.a,{xs:"6",className:"time"},n),a.a.createElement(x.a,{xs:"6",className:"date"},r))}}]),r}(n.PureComponent);function Nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E()(e);if(t){var a=E()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v()(this,r)}}R()(Rt,"propTypes",{className:N.PropTypes.string}),R()(Rt,"defaultProps",{className:""});var St=function(e){y()(r,e);var t=Nt(r);function r(){return p()(this,r),t.apply(this,arguments)}return m()(r,[{key:"render",value:function(){var e=this.props.className;return a.a.createElement("div",{className:T()(e)},a.a.createElement(Rt,null),a.a.createElement(k.a,{className:"slim-gutters"},a.a.createElement(x.a,{lg:"5",className:"mb-4"},a.a.createElement(Je,null)),a.a.createElement(x.a,{lg:"7",className:"mb-4"},a.a.createElement(Et,null))))}}]),r}(n.PureComponent);R()(St,"propTypes",{className:N.PropTypes.string}),R()(St,"defaultProps",{className:""});var Tt=r(397);function bt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E()(e);if(t){var a=E()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v()(this,r)}}var wt="dark-mode",kt="light-mode",xt=function(e){y()(r,e);var t=bt(r);function r(e){var n;return p()(this,r),n=t.call(this,e),R()(M()(n),"setMode",(function(e){document.documentElement.className=e,J.set(K,e),n.forceUpdate()})),R()(M()(n),"isDarkModeSelected",(function(){return document.documentElement.className===wt})),n.setMode=n.setMode.bind(M()(n)),n}return m()(r,[{key:"render",value:function(){var e=this,t=this.props.className,r=this.isDarkModeSelected();return a.a.createElement(a.a.Fragment,null,a.a.createElement(we.a,{className:"mr-2"},"Theme:"),a.a.createElement(Tt.a,{className:T()(t)},a.a.createElement(xe.a,{onClick:function(){return e.setMode(wt)},color:r?"primary":"secondary"},"Dark"),a.a.createElement(xe.a,{onClick:function(){return e.setMode(kt)},color:r?"secondary":"primary"},"Light")))}}]),r}(n.PureComponent);R()(xt,"propTypes",{className:N.PropTypes.string}),R()(xt,"defaultProps",{className:""});var Dt=r(401),Ft=r(59);function Ot(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E()(e);if(t){var a=E()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v()(this,r)}}var Ct=function(e){y()(r,e);var t=Ot(r);function r(e){var n;return p()(this,r),n=t.call(this,e),R()(M()(n),"rerender",(function(){return n.forceUpdate()})),R()(M()(n),"getLocalStorageData",(function(e){return J.get(e)})),R()(M()(n),"toggleShow",(function(){var e=n.state.show;n.setState({show:!e})})),n.state={show:!1},n}return m()(r,[{key:"componentDidMount",value:function(){window.addEventListener("storage",this.rerender)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("storage",this.rerender)}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.localStorageKey,n=this.state.show,o=JSON.stringify(this.getLocalStorageData(r));return a.a.createElement("div",{className:T()(t)},a.a.createElement("p",null,a.a.createElement(xe.a,{color:"primary",onClick:this.toggleShow},n?"Hide":"Show"," LocalStorage Data")),a.a.createElement("p",{className:"small"},"JSON representation of the stored data."),n&&a.a.createElement(Dt.a,{language:"json",style:Ft.monokai,className:"my-3"},o))}}]),r}(n.PureComponent);function At(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E()(e);if(t){var a=E()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v()(this,r)}}R()(Ct,"propTypes",{className:N.PropTypes.string,localStorageKey:N.PropTypes.oneOf(V).isRequired}),R()(Ct,"defaultProps",{className:""});var Mt=function(e){y()(r,e);var t=At(r);function r(){var e;p()(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),R()(M()(e),"setSampleData",(function(){var t=e.props.localStorageKey;J.setSampleData(t)})),e}return m()(r,[{key:"render",value:function(){var e=this.props.className;return a.a.createElement("div",{className:T()(e)},a.a.createElement("p",null,a.a.createElement(xe.a,{color:"primary",onClick:this.setSampleData},"Set Sample LocalStorage Data")),a.a.createElement("p",{className:"small"},"Replace stored data with sample data."))}}]),r}(n.PureComponent);function Lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E()(e);if(t){var a=E()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v()(this,r)}}R()(Mt,"propTypes",{className:N.PropTypes.string,localStorageKey:N.PropTypes.oneOf(Object.keys(q)).isRequired}),R()(Mt,"defaultProps",{className:""});var Ut=function(e){y()(r,e);var t=Lt(r);function r(e){var n;return p()(this,r),n=t.call(this,e),R()(M()(n),"getInitialState",(function(){return{weatherKeyIsValid:void 0,weatherKeyValue:J.get(B),weatherUnits:J.get(j)}})),R()(M()(n),"onWeatherKeyChange",(function(e){n.setState({weatherKeyValue:e.target.value})})),R()(M()(n),"validateAndSetKey",function(){var e=C()(F.a.mark((function e(t){var r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=n.state.weatherKeyValue,e.prev=2,e.next=5,Qe.isValidKey(r);case 5:if(!e.sent){e.next=9;break}return n.setState({weatherKeyIsValid:!0}),J.set(B,r),e.abrupt("return");case 9:n.setState({weatherKeyIsValid:!1}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.setState({weatherKeyIsValid:!1});case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}()),R()(M()(n),"setWeatherUnits",(function(e){n.setState({weatherUnits:e}),J.set(j,e)})),R()(M()(n),"dumpLocalStorageAndResetState",(function(){n.setState(n.getInitialState()),J.dump()})),n.state=n.getInitialState(),n}return m()(r,[{key:"render",value:function(){var e=this,t=this.props.className,r=this.state,n=r.weatherKeyIsValid,o=r.weatherKeyValue,c=r.weatherUnits;return a.a.createElement("div",{className:T()(t)},a.a.createElement("h1",null,"Settings"),a.a.createElement(k.a,null,a.a.createElement(x.a,{xs:"6"},a.a.createElement(L.a,{className:"mb-4"},a.a.createElement(He.a,null,a.a.createElement("h3",{className:"m-0"},"Global")),a.a.createElement(U.a,null,a.a.createElement(xt,null),a.a.createElement("hr",null),a.a.createElement("p",null,a.a.createElement(xe.a,{color:"danger",onClick:this.dumpLocalStorageAndResetState},"Dump All Local Storage")),a.a.createElement("p",{className:"small"},"This will remove stored bus stops, your DarkSky key, and the weather units."))))),a.a.createElement(k.a,null,a.a.createElement(x.a,{xs:"6"},a.a.createElement(L.a,{className:"mb-4"},a.a.createElement(He.a,null,a.a.createElement("h3",{className:"m-0"},"Bus")),a.a.createElement(U.a,null,a.a.createElement(Ct,{localStorageKey:W}),a.a.createElement("hr",null),a.a.createElement(Mt,{localStorageKey:W})))),a.a.createElement(x.a,{xs:"6"},a.a.createElement(L.a,{className:"mb-4"},a.a.createElement(He.a,null,a.a.createElement("h3",{className:"m-0"},"Weather")),a.a.createElement(U.a,null,a.a.createElement(Te.a,{onSubmit:this.validateAndSetKey},a.a.createElement(be.a,null,a.a.createElement(we.a,{for:"weather-key"},"DarkSky API Key:"),a.a.createElement(ke.a,{type:"text",id:"weather-key",className:T()({"is-valid":n,"is-invalid":!1===n}),onChange:this.onWeatherKeyChange,value:o})),a.a.createElement(xe.a,{color:"primary",type:"submit"},"Validate & Store Key")),a.a.createElement("hr",null),a.a.createElement(be.a,null,a.a.createElement(we.a,{className:"mr-2"},"Weather Units:"),a.a.createElement(Tt.a,null,a.a.createElement(xe.a,{color:""===c?"primary":"secondary",onClick:function(){return e.setWeatherUnits("")}},"Auto"),a.a.createElement(xe.a,{color:"f"===c?"primary":"secondary",onClick:function(){return e.setWeatherUnits("f")}},"F"),a.a.createElement(xe.a,{color:"c"===c?"primary":"secondary",onClick:function(){return e.setWeatherUnits("c")}},"C"))))))))}}]),r}(n.PureComponent);function _t(){return a.a.createElement(s.a,null,a.a.createElement(l.a,null,a.a.createElement(w,null),a.a.createElement(i.c,null,a.a.createElement(i.a,{path:"/settings"},a.a.createElement(Ut,null)),a.a.createElement(i.a,{path:"/"},a.a.createElement(St,null)))))}R()(Ut,"propTypes",{className:N.PropTypes.string}),R()(Ut,"defaultProps",{className:""});c.a.render(a.a.createElement(_t,null),document.getElementById("react-app"))},64:function(e,t,r){}});
//# sourceMappingURL=app.a3a137fa.js.map