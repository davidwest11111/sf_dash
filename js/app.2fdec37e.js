!function(e){function t(t){for(var a,o,c=t[0],l=t[1],i=t[2],p=0,f=[];p<c.length;p++)o=c[p],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&f.push(n[o][0]),n[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(u&&u(t);f.length;)f.shift()();return s.push.apply(s,i||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,c=1;c<r.length;c++){var l=r[c];0!==n[l]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},n={0:0},s=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var i=0;i<c.length;i++)t(c[i]);var u=l;s.push([515,1]),r()}({194:function(e,t,r){},204:function(e,t,r){var a={"./af":39,"./af.js":39,"./ar":40,"./ar-dz":41,"./ar-dz.js":41,"./ar-kw":42,"./ar-kw.js":42,"./ar-ly":43,"./ar-ly.js":43,"./ar-ma":44,"./ar-ma.js":44,"./ar-sa":45,"./ar-sa.js":45,"./ar-tn":46,"./ar-tn.js":46,"./ar.js":40,"./az":47,"./az.js":47,"./be":48,"./be.js":48,"./bg":49,"./bg.js":49,"./bm":50,"./bm.js":50,"./bn":51,"./bn.js":51,"./bo":52,"./bo.js":52,"./br":53,"./br.js":53,"./bs":54,"./bs.js":54,"./ca":55,"./ca.js":55,"./cs":56,"./cs.js":56,"./cv":57,"./cv.js":57,"./cy":58,"./cy.js":58,"./da":59,"./da.js":59,"./de":60,"./de-at":61,"./de-at.js":61,"./de-ch":62,"./de-ch.js":62,"./de.js":60,"./dv":63,"./dv.js":63,"./el":64,"./el.js":64,"./en-SG":65,"./en-SG.js":65,"./en-au":66,"./en-au.js":66,"./en-ca":67,"./en-ca.js":67,"./en-gb":68,"./en-gb.js":68,"./en-ie":69,"./en-ie.js":69,"./en-il":70,"./en-il.js":70,"./en-nz":71,"./en-nz.js":71,"./eo":72,"./eo.js":72,"./es":73,"./es-do":74,"./es-do.js":74,"./es-us":75,"./es-us.js":75,"./es.js":73,"./et":76,"./et.js":76,"./eu":77,"./eu.js":77,"./fa":78,"./fa.js":78,"./fi":79,"./fi.js":79,"./fo":80,"./fo.js":80,"./fr":81,"./fr-ca":82,"./fr-ca.js":82,"./fr-ch":83,"./fr-ch.js":83,"./fr.js":81,"./fy":84,"./fy.js":84,"./ga":85,"./ga.js":85,"./gd":86,"./gd.js":86,"./gl":87,"./gl.js":87,"./gom-latn":88,"./gom-latn.js":88,"./gu":89,"./gu.js":89,"./he":90,"./he.js":90,"./hi":91,"./hi.js":91,"./hr":92,"./hr.js":92,"./hu":93,"./hu.js":93,"./hy-am":94,"./hy-am.js":94,"./id":95,"./id.js":95,"./is":96,"./is.js":96,"./it":97,"./it-ch":98,"./it-ch.js":98,"./it.js":97,"./ja":99,"./ja.js":99,"./jv":100,"./jv.js":100,"./ka":101,"./ka.js":101,"./kk":102,"./kk.js":102,"./km":103,"./km.js":103,"./kn":104,"./kn.js":104,"./ko":105,"./ko.js":105,"./ku":106,"./ku.js":106,"./ky":107,"./ky.js":107,"./lb":108,"./lb.js":108,"./lo":109,"./lo.js":109,"./lt":110,"./lt.js":110,"./lv":111,"./lv.js":111,"./me":112,"./me.js":112,"./mi":113,"./mi.js":113,"./mk":114,"./mk.js":114,"./ml":115,"./ml.js":115,"./mn":116,"./mn.js":116,"./mr":117,"./mr.js":117,"./ms":118,"./ms-my":119,"./ms-my.js":119,"./ms.js":118,"./mt":120,"./mt.js":120,"./my":121,"./my.js":121,"./nb":122,"./nb.js":122,"./ne":123,"./ne.js":123,"./nl":124,"./nl-be":125,"./nl-be.js":125,"./nl.js":124,"./nn":126,"./nn.js":126,"./pa-in":127,"./pa-in.js":127,"./pl":128,"./pl.js":128,"./pt":129,"./pt-br":130,"./pt-br.js":130,"./pt.js":129,"./ro":131,"./ro.js":131,"./ru":132,"./ru.js":132,"./sd":133,"./sd.js":133,"./se":134,"./se.js":134,"./si":135,"./si.js":135,"./sk":136,"./sk.js":136,"./sl":137,"./sl.js":137,"./sq":138,"./sq.js":138,"./sr":139,"./sr-cyrl":140,"./sr-cyrl.js":140,"./sr.js":139,"./ss":141,"./ss.js":141,"./sv":142,"./sv.js":142,"./sw":143,"./sw.js":143,"./ta":144,"./ta.js":144,"./te":145,"./te.js":145,"./tet":146,"./tet.js":146,"./tg":147,"./tg.js":147,"./th":148,"./th.js":148,"./tl-ph":149,"./tl-ph.js":149,"./tlh":150,"./tlh.js":150,"./tr":151,"./tr.js":151,"./tzl":152,"./tzl.js":152,"./tzm":153,"./tzm-latn":154,"./tzm-latn.js":154,"./tzm.js":153,"./ug-cn":155,"./ug-cn.js":155,"./uk":156,"./uk.js":156,"./ur":157,"./ur.js":157,"./uz":158,"./uz-latn":159,"./uz-latn.js":159,"./uz.js":158,"./vi":160,"./vi.js":160,"./x-pseudo":161,"./x-pseudo.js":161,"./yo":162,"./yo.js":162,"./zh-cn":163,"./zh-cn.js":163,"./zh-hk":164,"./zh-hk.js":164,"./zh-tw":165,"./zh-tw.js":165};function n(e){var t=s(e);return r(t)}function s(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=s,e.exports=n,n.id=204},515:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),s=r(26),o=r.n(s),c=(r(194),r(25)),l=r(23),i=r(535),u=r(8),p=r.n(u),f=r(9),m=r.n(f),d=r(10),y=r.n(d),h=r(11),v=r.n(h),g=r(6),E=r.n(g),P=r(3),N=r.n(P),R=r(1),b=r(4),T=r.n(b);function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var j=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(S()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props.className;return n.a.createElement("div",{className:T()(e,"header")},n.a.createElement(c.b,{to:"/"},n.a.createElement("span",{className:"fas fa-home"})),n.a.createElement(c.b,{to:"/settings"},n.a.createElement("span",{className:"fas fa-cog"})))}}]),a}(a.PureComponent);N()(j,"propTypes",{className:R.PropTypes.string}),N()(j,"defaultProps",{className:""});var k=r(521),w=r(522),x=r(14),D=r.n(x),F=r(15),O=r.n(F),C=r(13),A=r.n(C),M=r(517),U=r(518),_=r(2),I=r.n(_),L=r(29),B=r.n(L),W="weatherKey",K="weatherUnits",z="stopRouteTags",V="htmlClass",q=[W,K,z,V].reduce((function(e,t){return[].concat(B()(e),[t,"".concat("ngStorage-").concat(t)])}),[]),J=N()({},z,["14|5565","67|6208","27|3930","12|7552"]),G=function(){function e(){p()(this,e)}return m()(e,null,[{key:"get",value:function(e){return JSON.parse(window.localStorage.getItem(e)||window.localStorage.getItem("".concat("ngStorage-").concat(e)))||""}},{key:"set",value:function(e,t){window.localStorage.setItem(e,JSON.stringify(t)),window.dispatchEvent(new Event("storage"))}},{key:"setSampleData",value:function(e){this.set(e,J[e])}},{key:"dump",value:function(){q.forEach((function(e){return window.localStorage.removeItem(e)}))}},{key:"addBusStopToLocalStorage",value:function(e){var t=this.get(z)||[];this.set(z,B()(new Set([].concat(B()(t),[e]))))}},{key:"removeBusStopFromLocalStorage",value:function(e){var t=this.get(z)||[];this.set(z,t.filter((function(t){return t!==e})))}}]),e}(),H=r(184),X=r.n(H),Y=r(24),Q=r.n(Y),Z=r(36),$=r.n(Z),ee=r(185),te=r.n(ee),re="http://webservices.nextbus.com/service/publicXMLFeed",ae=function(e){return new Promise((function(t,r){navigator.geolocation.getCurrentPosition(t,r,e)}))},ne=function(){function e(){p()(this,e)}var t,r,a,n;return m()(e,null,[{key:"getPredictions",value:(n=O()(D.a.mark((function e(t){var r,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.a.get(re,{params:{command:"predictionsForMultiStops",a:"sf-muni",stops:t,useShortTitles:!0},paramsSerializer:function(e){return te.a.stringify(e,{arrayFormat:"repeat"})}});case 2:return r=e.sent,a=this.parsePredictionsXMLResponse(r.data),e.abrupt("return",new Promise((function(e,t){var r,n,s=null==a||null===(r=a.body)||void 0===r||null===(n=r.Error)||void 0===n?void 0:n.__text;s&&t(new Error(s)),e(a)})));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getRouteConfig",value:(a=O()(D.a.mark((function e(){var t,r,a=this;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.a.get(re,{params:{command:"routeConfig",a:"sf-muni",useShortTitles:!0}});case 2:return t=e.sent,r=this.parseRouteConfigXMLResponse(t.data),e.abrupt("return",new Promise((function(e,t){var n,s,o=null==r||null===(n=r.body)||void 0===n||null===(s=n.Error)||void 0===s?void 0:s.__text;o&&t(new Error(o)),e(a.mergeRouteData(r.body.route))})));case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getStopsNearMe",value:(r=O()(D.a.mark((function e(t){var r,a,n,s,o,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.a.all([ae(),this.getRouteConfig()]);case 2:return r=e.sent,a=X()(r,2),n=a[0],s=a[1],o=new google.maps.LatLng(n.coords.latitude,n.coords.longitude),c=[],s.forEach((function(e){e.direction.forEach((function(r){r.stop.forEach((function(a){var n=new google.maps.LatLng(a._lat,a._lon);google.maps.geometry.spherical.computeDistanceBetween(o,n)<=t&&c.push({tag:e._tag,title:e._title,directionName:r._name,directionTitle:r._title,latLng:n,stopId:a._stopId,stopTag:a._tag,stopTitle:a._title})}))}))})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"isValidStop",value:(t=O()(D.a.mark((function e(t){var r,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getPredictions([t]);case 3:return a=e.sent,e.abrupt("return",!!(null==a||null===(r=a.body)||void 0===r?void 0:r.predictions));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return t.apply(this,arguments)})},{key:"parsePredictionsXMLResponse",value:function(e){return new $.a({arrayAccessFormPaths:["body.predictions","body.predictions.direction.prediction"]}).xml2js(e)}},{key:"parseRouteConfigXMLResponse",value:function(e){return new $.a({arrayAccessFormPaths:["body.route"]}).xml2js(e)}},{key:"getRouteStopTag",value:function(e,t){return"".concat(e,"|").concat(t)}}]),e}();N()(ne,"mergeRouteData",(function(e){return e.forEach((function(e){var t={};e.stop.forEach((function(e){t[e._tag]=e})),e.direction.forEach((function(e){e.stop.forEach((function(r,a){e.stop[a]=t[r._tag]}))}))})),e}));r(177);function se(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var oe=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(se()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.loading,a=e.small;return r?n.a.createElement("div",{className:T()(t,"spinner",{"spinner-small":a})},n.a.createElement("div",{className:"bounce1"}),n.a.createElement("div",{className:"bounce2"}),n.a.createElement("div",{className:"bounce3"})):null}}]),a}(a.PureComponent);function ce(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(oe,"propTypes",{className:R.PropTypes.string,loading:R.PropTypes.bool,small:R.PropTypes.bool}),N()(oe,"defaultProps",{className:"",loading:!1,small:!1});var le=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(ce()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){var e;p()(this,a);for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e=r.call.apply(r,[this].concat(n)),N()(A()(e),"getReadableTime",(function(){var t=e.props.lastUpdated.preciseDiff(I()());return t?"".concat(t," ago."):"Just now."})),N()(A()(e),"isOverdue",(function(){var t=e.props,r=t.lastUpdated,a=t.msUntilWarning;return I()().diff(r)>=a})),e}return m()(a,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){return e.forceUpdate()}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.lastUpdated,a=e.loading,s=this.isOverdue();return n.a.createElement("div",{className:T()(t,"time-since-last-updated")},n.a.createElement("span",{className:T()({overdue:s})},r&&this.getReadableTime()),n.a.createElement(oe,{className:"my-1 ml-auto",loading:a,small:!0}))}}]),a}(a.PureComponent);N()(le,"propTypes",{className:R.PropTypes.string,lastUpdated:R.PropTypes.object,msUntilWarning:R.PropTypes.number,loading:R.PropTypes.bool}),N()(le,"defaultProps",{className:"",lastUpdated:null,msUntilWarning:6e4,loading:!1});var ie=r(519);function ue(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var pe=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(ue()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.prediction,a=r.direction,s=r._dirTitleBecauseNoPredictions,o=r._stopTitle;return n.a.createElement("div",{className:T()(t)},n.a.createElement("div",{className:"route-title"},(null==a?void 0:a._title)||s),n.a.createElement("div",{className:"stop-title"},"@",o))}}]),a}(a.PureComponent);function fe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(pe,"propTypes",{className:R.PropTypes.string,prediction:R.PropTypes.shape({direction:R.PropTypes.shape({_title:R.PropTypes.string}),_stopTitle:R.PropTypes.string,_dirTitleBecauseNoPredictions:R.PropTypes.string})}),N()(pe,"defaultProps",{className:"",prediction:{}});var me=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(fe()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.predictionTimes;return n.a.createElement("div",{className:T()(t,"prediction-times")},r.length?n.a.createElement(n.a.Fragment,null,r.slice(0,4).map((function(e,t){return n.a.createElement("span",{key:"".concat(e._tripTag)},n.a.createElement("span",{className:T()("prediction-time",{"not-affected-by-layover":!e._affectedByLayover,"next-time":0===t,"other-time":0!==t})},"0"===e._minutes?"Now":e._minutes),t!==r.length-1&&", ")}))):n.a.createElement("span",{className:"no-prediction-time"},"None"))}}]),a}(a.PureComponent);function de(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(me,"propTypes",{className:R.PropTypes.string,predictionTimes:R.PropTypes.arrayOf(R.PropTypes.shape({_tripTag:R.PropTypes.string,_affectedByLayover:R.PropTypes.string,_minutes:R.PropTypes.string}))}),N()(me,"defaultProps",{className:"",predictionTimes:[]});var ye=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(de()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){var e;p()(this,a);for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e=r.call.apply(r,[this].concat(n)),N()(A()(e),"removeStop",(function(t,r){var a=ne.getRouteStopTag(t,r),n=e.props.onAddOrRemoveStop;G.removeBusStopFromLocalStorage(a),n()})),e}return m()(a,[{key:"render",value:function(){var e=this,t=this.props,r=t.className,a=t.predictions,s=t.showBusRemove;return n.a.createElement("div",{className:T()(r,"predictions")},a.map((function(t){var r=t._routeTag,a=t._stopTag,o=t.direction;return n.a.createElement(M.a,{className:"mb-2",key:"".concat(r,"-").concat(a)},n.a.createElement(U.a,{className:"d-flex align-items-center justify-content-between"},n.a.createElement("div",{className:"route-tag"},r),n.a.createElement("div",{className:"right-container"},s?n.a.createElement(ie.a,{color:"danger",className:"remove-stop",onClick:function(){return e.removeStop(r,a)}},"Remove Stop"):n.a.createElement(me,{predictionTimes:null==o?void 0:o.prediction}),n.a.createElement(pe,{prediction:t}))))})))}}]),a}(a.PureComponent);N()(ye,"propTypes",{className:R.PropTypes.string,predictions:R.PropTypes.arrayOf(R.PropTypes.shape({_routeTag:R.PropTypes.string,_stopTag:R.PropTypes.string,direction:R.PropTypes.shape({prediction:R.PropTypes.arrayOf(R.PropTypes.shape({_tripTag:R.PropTypes.string,_affectedByLayover:R.PropTypes.string,_minutes:R.PropTypes.string}))})})),showBusRemove:R.PropTypes.bool.isRequired,onAddOrRemoveStop:R.PropTypes.func.isRequired}),N()(ye,"defaultProps",{className:"",predictions:[]});var he=r(527),ve=r(528),ge=r(529),Ee=r(530),Pe=r(531),Ne=r(520),Re=r(523),be=r(524),Te=r(525);function Se(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var je=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(Se()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(e){var t;return p()(this,a),t=r.call(this,e),N()(A()(t),"onChange",(function(e,r){t.setState(N()({},r,e.target.value))})),N()(A()(t),"validateAndAddStop",function(){var e=O()(D.a.mark((function e(r){var a,n,s,o,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),a=t.props.onAddOrRemoveStop,n=t.state,s=n.routeTag,o=n.stopTag,c=ne.getRouteStopTag(s,o),t.setState({stopIsValid:void 0}),e.next=7,ne.isValidStop(c);case 7:if(!e.sent){e.next=12;break}return t.setState({stopIsValid:!0}),G.addBusStopToLocalStorage(c),a(),e.abrupt("return");case 12:t.setState({stopIsValid:!1});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.state={routeTag:"",stopTag:"",stopIsValid:void 0},t}return m()(a,[{key:"render",value:function(){var e=this,t=this.props.className,r=this.state,a=r.routeTag,s=r.stopTag,o=r.stopIsValid;return n.a.createElement(Ne.a,{onSubmit:this.validateAndAddStop,className:T()(t)},n.a.createElement(k.a,null,n.a.createElement(w.a,{xs:"6"},n.a.createElement(Re.a,null,n.a.createElement(be.a,{for:"manual-add-route-tag"},"Route Tag:"),n.a.createElement(Te.a,{type:"text",id:"manual-add-route-tag",className:T()({"is-valid":o,"is-invalid":!1===o}),onChange:function(t){return e.onChange(t,"routeTag")},placeholder:"12",value:a}))),n.a.createElement(w.a,{xs:"6"},n.a.createElement(Re.a,null,n.a.createElement(be.a,{for:"manual-add-route-stop"},"Stop Tag:"),n.a.createElement(Te.a,{type:"text",id:"manual-add-route-stop",className:T()({"is-valid":o,"is-invalid":!1===o}),onChange:function(t){return e.onChange(t,"stopTag")},placeholder:"5837",value:s})))),n.a.createElement("div",null,n.a.createElement(ie.a,{color:"primary",type:"submit"},"Validate & Add Stop")))}}]),a}(a.PureComponent);N()(je,"propTypes",{className:R.PropTypes.string,onAddOrRemoveStop:R.PropTypes.func.isRequired}),N()(je,"defaultProps",{className:""});var ke=r(537),we=r(526);function xe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var De=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(xe()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(e){var t;return p()(this,a),t=r.call(this,e),N()(A()(t),"getNearbyStops",function(){var e=O()(D.a.mark((function e(r){var a,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.target.value){e.next=3;break}return e.abrupt("return");case 3:return t.setState({loading:!0}),e.prev=4,e.next=7,ne.getStopsNearMe(a);case 7:n=e.sent,t.setState({nearbyStops:n,loading:!1}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.error(e.t0.message),t.setState({loading:!1,errMsg:e.t0.message});case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}()),N()(A()(t),"addStop",(function(e){var r=t.props.onAddOrRemoveStop;G.addBusStopToLocalStorage(e),r()})),t.state={loading:!1,errMsg:void 0,nearbyStops:[]},t}return m()(a,[{key:"render",value:function(){var e=this,t=this.props.className,r=this.state,a=r.loading,s=r.errMsg,o=r.nearbyStops;return n.a.createElement(n.a.Fragment,null,n.a.createElement(ke.a,{color:"danger",fade:!1},"Warning: This probably ","won't"," work. See"," ",n.a.createElement("a",{href:"https://developers.google.com/web/updates/2016/04/geolocation-on-secure-contexts-only",target:"_blank",rel:"noopener noreferrer"},"Geolocation API Removed from Unsecured Origins in Chrome 50"),"."),n.a.createElement(Ne.a,{className:T()(t,"mb-2"),inline:!0},n.a.createElement(be.a,{className:"mr-2"},"Find stops within"),n.a.createElement(Te.a,{type:"select",onChange:this.getNearbyStops},n.a.createElement("option",{value:""},"--Choose One--"),n.a.createElement("option",{value:"322"},"1/5 mile"),n.a.createElement("option",{value:"402"},"1/4 mile"),n.a.createElement("option",{value:"804"},"1/2 mile"))),!!o.length&&n.a.createElement(we.a,{striped:!0,hover:!0,className:"mt-4"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Route"),n.a.createElement("th",null,"Direction"),n.a.createElement("th",null,"Stop"))),n.a.createElement("tbody",null,o.map((function(t){var r=t.tag,a=t.stopTag,s=t.title,o=t.directionTitle,c=t.stopTitle,l=ne.getRouteStopTag(r,a);return n.a.createElement("tr",{className:"clickable",key:l,onClick:function(){return e.addStop(l)}},n.a.createElement("td",null,s),n.a.createElement("td",null,o),n.a.createElement("td",null,c))})))),a&&n.a.createElement(oe,{className:"my-2"}),s&&n.a.createElement("div",{className:"error-msg"},"Error: ",s))}}]),a}(a.PureComponent);function Fe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(De,"propTypes",{className:R.PropTypes.string,onAddOrRemoveStop:R.PropTypes.func.isRequired}),N()(De,"defaultProps",{className:""});var Oe=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(Fe()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(e){var t;return p()(this,a),t=r.call(this,e),N()(A()(t),"toggle",(function(e){t.state.activeTab!==e&&t.setState({activeTab:e})})),t.state={activeTab:"1"},t}return m()(a,[{key:"render",value:function(){var e=this,t=this.props,r=t.className,a=t.toggleAddStopForm,s=t.onAddOrRemoveStop,o=this.state.activeTab;return n.a.createElement("div",{className:T()(r,"add-form","mb-2")},n.a.createElement(he.a,{tabs:!0},n.a.createElement(ve.a,null,n.a.createElement(ge.a,{className:T()("clickable",{active:"1"===o}),onClick:function(){return e.toggle("1")}},"Geolocation")),n.a.createElement(ve.a,null,n.a.createElement(ge.a,{className:T()("clickable",{active:"2"===o}),onClick:function(){return e.toggle("2")}},"Manual Input")),n.a.createElement("button",{type:"button",className:"btn close-form",onClick:a},n.a.createElement("span",{className:"fas fa-times"}))),n.a.createElement(Ee.a,{activeTab:o},n.a.createElement(Pe.a,{tabId:"1"},n.a.createElement(De,{onAddOrRemoveStop:s})),n.a.createElement(Pe.a,{tabId:"2"},n.a.createElement(je,{onAddOrRemoveStop:s}))))}}]),a}(a.PureComponent);N()(Oe,"propTypes",{className:R.PropTypes.string,toggleAddStopForm:R.PropTypes.func.isRequired,onAddOrRemoveStop:R.PropTypes.func.isRequired}),N()(Oe,"defaultProps",{className:""});var Ce=r(22),Ae=r.n(Ce);function Me(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ue={className:"mr-1",size:"xs",color:"secondary",outline:!0},_e=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(Me()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.showBusRemove,a=e.toggleShowBusRemove,s=e.predictions,o=e.toggleAddStopForm;return n.a.createElement("div",{className:T()(t)},!r&&n.a.createElement(ie.a,Ae()({},Ue,{onClick:o}),n.a.createElement("span",{className:"fas fa-plus"})),!!s.length&&n.a.createElement(ie.a,Ae()({},Ue,{onClick:a}),n.a.createElement("span",{className:"fas fa-pen"})))}}]),a}(a.PureComponent);function Ie(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(_e,"propTypes",{className:R.PropTypes.string,showBusRemove:R.PropTypes.bool.isRequired,toggleShowBusRemove:R.PropTypes.func.isRequired,predictions:R.PropTypes.array,toggleAddStopForm:R.PropTypes.func.isRequired}),N()(_e,"defaultProps",{className:"",predictions:[]});var Le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];return t.forEach((function(t){var a="".concat(t._routeTag,"|").concat(t._stopTag);r[e.indexOf(a)]=t})),r},Be=function(e){y()(o,e);var t,r,a,s=(t=o,function(){var e,r=E()(t);if(Ie()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function o(e){var t;return p()(this,o),t=s.call(this,e),N()(A()(t),"toggleAddStopForm",(function(){var e=t.state.showAddStopForm;t.setState({showAddStopForm:!e})})),N()(A()(t),"onAddOrRemoveStop",O()(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return clearInterval(t.interval),e.next=3,t.updateBusPredictions();case 3:t.interval=setInterval(t.updateBusPredictions,1e4);case 4:case"end":return e.stop()}}),e)})))),N()(A()(t),"toggleShowBusRemove",(function(){var e=t.state.showBusRemove;t.setState({showBusRemove:!e})})),t.state={predictions:[],lastUpdated:void 0,showAddStopForm:!1,showBusRemove:!1,loading:!1,errMsg:void 0},t}return m()(o,[{key:"componentDidMount",value:(a=O()(D.a.mark((function e(){var t=this;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateBusPredictions();case 2:this.interval=setInterval((function(){return t.updateBusPredictions()}),1e4);case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"updateBusPredictions",value:(r=O()(D.a.mark((function e(){var t,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=G.get(z)).length){e.next=3;break}return e.abrupt("return");case 3:return this.setState({loading:!0}),e.prev=4,e.next=7,ne.getPredictions(t);case 7:r=e.sent,this.setState({predictions:Le(t,r.body.predictions),loading:!1,lastUpdated:I()()}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.error(e.t0.message),this.setState({loading:!1,errMsg:e.t0.message,lastUpdated:I()()});case 15:case"end":return e.stop()}}),e,this,[[4,11]])}))),function(){return r.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.className,t=this.state,r=t.predictions,a=t.lastUpdated,s=t.showAddStopForm,o=t.showBusRemove,c=t.loading,l=t.errMsg;return n.a.createElement("div",{className:T()(e,"bus")},l&&n.a.createElement("div",{className:"error-msg"},"Error: ",l),!l&&!r.length&&n.a.createElement(M.a,{className:"mb-2"},n.a.createElement(U.a,null,"No bus stops added.")),n.a.createElement(ye,{predictions:r,showBusRemove:o,onAddOrRemoveStop:this.onAddOrRemoveStop}),s&&n.a.createElement(Oe,{toggleAddStopForm:this.toggleAddStopForm,onAddOrRemoveStop:this.onAddOrRemoveStop}),!s&&n.a.createElement("div",{className:"d-flex align-items-start justify-content-between"},n.a.createElement(_e,{predictions:r,toggleAddStopForm:this.toggleAddStopForm,showBusRemove:o,toggleShowBusRemove:this.toggleShowBusRemove}),n.a.createElement(le,{lastUpdated:a,msUntilWarning:2e4,loading:c})))}}]),o}(a.PureComponent);N()(Be,"propTypes",{className:R.PropTypes.string}),N()(Be,"defaultProps",{className:""});var We=r(532),Ke=r(186),ze=r.n(Ke),Ve=function(){function e(){p()(this,e)}var t,r;return m()(e,null,[{key:"fetchWeatherData",value:(r=O()(D.a.mark((function e(t){var r,a,n,s,o;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.lat,a=t.long,n=t.key,s=t.units,e.next=3,Q.a.get(this.getUrl({lat:r,long:a,key:n,units:s}),{adapter:ze.a});case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"fetchAllLocationsWeatherData",value:(t=O()(D.a.mark((function e(t,r,a){var n,s,o=this;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.convertUnitsForDarkSky(a),e.next=3,Q.a.all(t.map((function(e){var t=e.lat,a=e.long;return o.fetchWeatherData({lat:t,long:a,key:r,units:n})})));case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e,this)}))),function(e,r,a){return t.apply(this,arguments)})}]),e}();function qe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(Ve,"getUrl",(function(e){var t=e.base,r=void 0===t?"https://api.darksky.net/forecast":t,a=e.key,n=e.lat,s=e.long,o=e.exclude,c=void 0===o?"minutely,flags,currently":o,l=e.lang,i=void 0===l?"en":l,u=e.units,p=void 0===u?"auto":u;return"".concat(r,"/").concat(a,"/").concat(n,",").concat(s,"?exclude=").concat(c,"&lang=").concat(i,"&units=").concat(p)})),N()(Ve,"isValidKey",function(){var e=O()(D.a.mark((function e(t){var r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.fetchWeatherData({lat:38,long:-122,key:t});case 2:return r=e.sent,e.abrupt("return",!!(null==r?void 0:r.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N()(Ve,"convertUnitsForDarkSky",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auto";switch(e){case"f":return"us";case"c":return"si";case"":case"auto":return"auto";default:throw new Error("Invalid Unit type: ".concat(e))}}));var Je=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(qe()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){var e;p()(this,a);for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e=r.call.apply(r,[this].concat(n)),N()(A()(e),"getFirstRainForecast",(function(){return e.props.hourlyForecasts.slice(0,23).find((function(e){return e.precipProbability>=.3}))||{}})),e}return m()(a,[{key:"render",value:function(){var e=this.props.className,t=this.getFirstRainForecast(),r=t.precipProbability,a=t.time;return n.a.createElement("div",{className:T()(e,"rain-chance")},r?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"umbrella bring-umbrella"}),n.a.createElement("span",{className:"pop text-info"},(100*r).toFixed(0),"%"),n.a.createElement("sup",{className:"at mx-1"},"@"),n.a.createElement("span",{className:"time"},I()(1e3*a).format("hA"))):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"umbrella no-umbrella"}),n.a.createElement("div",{className:"no-rain"},"No rain in 24hr.")),n.a.createElement("div",{className:"text-muted"},"Based on a ",30..toFixed(0),"% chance threshold."))}}]),a}(a.PureComponent);function Ge(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(Je,"propTypes",{className:R.PropTypes.string,hourlyForecasts:R.PropTypes.arrayOf(R.PropTypes.shape({precipProbability:R.PropTypes.number,time:R.PropTypes.number}))}),N()(Je,"defaultProps",{className:"",hourlyForecasts:[]});var He={"clear-day":"clear","clear-night":"clear",cloudy:"cloudy",fog:"fog","partly-cloudy-day":"partlycloudy","partly-cloudy-night":"partlycloudy",rain:"rain",sleet:"sleet",snow:"snow",wind:"wind"},Xe=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(Ge()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e,t=this.props,r=t.className,a=t.icon;return a?n.a.createElement("img",{className:T()(r),src:(e=a,"/images/weather-icons/".concat(He[e]||"unknown",".svg")),alt:""}):null}}]),a}(a.PureComponent);function Ye(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(Xe,"propTypes",{className:R.PropTypes.string,icon:R.PropTypes.string}),N()(Xe,"defaultProps",{className:"",icon:""});var Qe=function(e){return 9*e/5+32},Ze=function(e){return 5*(e-32)/9},$e=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(Ye()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(e){var t;return p()(this,a),t=r.call(this,e),N()(A()(t),"getAltHighLow",(function(){var e=A()(t),r=e.weatherUnits,a=e.props.todaysForecast,s=a.temperatureMin,o=a.temperatureMax;if(!r)return null;var c="f"===r?Ze:Qe;return n.a.createElement("div",{className:"high-low-alt text-muted"},c(s).toFixed(0),"/",c(o).toFixed(0),"°","f"===r?"C":"F")})),t.weatherUnits=G.get(K),t}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.todaysForecast,a=r.icon,s=r.summary,o=r.temperatureMin,c=r.temperatureMax;return n.a.createElement("div",{className:T()(t,"forecast","mb-3","d-flex","align-items-center","justify-content-center")},n.a.createElement(Xe,{icon:a}),n.a.createElement("div",{className:"text-truncate"},n.a.createElement("div",{className:"conditions text-truncate"},s),n.a.createElement("div",{className:"high-low"},o.toFixed(0),n.a.createElement("span",{className:"text-muted px-1"},"/"),c.toFixed(0),"°"),this.getAltHighLow()))}}]),a}(a.PureComponent);function et(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()($e,"propTypes",{className:R.PropTypes.string,todaysForecast:R.PropTypes.shape({icon:R.PropTypes.string,summary:R.PropTypes.string,temperatureMin:R.PropTypes.number,temperatureMax:R.PropTypes.number})}),N()($e,"defaultProps",{className:"",todaysForecast:{}});var tt=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(et()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.alerts;return r.length?n.a.createElement("div",{className:T()(t,"col-12 alerts")},n.a.createElement("ul",null,r.map((function(e){return n.a.createElement("li",{key:e.title},e.title)})))):null}}]),a}(a.PureComponent);function rt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(tt,"propTypes",{className:R.PropTypes.string,alerts:R.PropTypes.arrayOf(R.PropTypes.shape({title:R.PropTypes.string}))}),N()(tt,"defaultProps",{className:"",alerts:[]});var at=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(rt()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.dailyForecasts,a=e.hourlyForecasts,s=e.alerts;return n.a.createElement("div",{className:T()(t,"side-panel px-3")},n.a.createElement($e,{todaysForecast:r[0]}),n.a.createElement(Je,{hourlyForecasts:a}),n.a.createElement(tt,{alerts:s}))}}]),a}(a.PureComponent);function nt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(at,"propTypes",{className:R.PropTypes.string,dailyForecasts:R.PropTypes.array,hourlyForecasts:R.PropTypes.array,alerts:R.PropTypes.array}),N()(at,"defaultProps",{className:"",dailyForecasts:[],hourlyForecasts:[],alerts:[]});var st=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(nt()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.hourlyForecasts;return n.a.createElement(we.a,{className:"mb-0"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Time"),n.a.createElement("th",null,"Condition"),n.a.createElement("th",{"data-toggle":"tooltip",title:"Temp/Feels Like"},"Temp/FL"),n.a.createElement("th",null,"UVI"),n.a.createElement("th",null,"POP"),n.a.createElement("th",null,"Humid"))),n.a.createElement("tbody",null,r.slice(0,12).map((function(e){var r=e.time,a=e.temperature,s=e.uvIndex,o=e.humidity,c=e.precipProbability,l=e.apparentTemperature,i=e.icon,u=e.summary;return n.a.createElement("tr",{key:"hourly-forecast-".concat(r)},n.a.createElement("td",null,I()(1e3*r).format("hA")),n.a.createElement("td",null,n.a.createElement(Xe,{icon:i})," ",u),n.a.createElement("td",null,a.toFixed(0),"/",l.toFixed(0),"°"),n.a.createElement("td",null,s),n.a.createElement("td",{className:T()(t,{"text-info":c>=.3})},(100*c).toFixed(0),"%"),n.a.createElement("td",null,(100*o).toFixed(0),"%"))}))))}}]),a}(a.PureComponent);function ot(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(st,"propTypes",{className:R.PropTypes.string,hourlyForecasts:R.PropTypes.arrayOf(R.PropTypes.shape({time:R.PropTypes.number,temperature:R.PropTypes.number,uvIndex:R.PropTypes.number,humidity:R.PropTypes.number,precipProbability:R.PropTypes.number,apparentTemperature:R.PropTypes.number,icon:R.PropTypes.string,summary:R.PropTypes.string}))}),N()(st,"defaultProps",{className:"",hourlyForecasts:[]});var ct=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(ot()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.dailyForecasts;return n.a.createElement(k.a,{className:T()(t,"slim-gutters","forecasts")},r.slice(1,4).map((function(e){var t=e.summary,r=e.temperatureMin,a=e.temperatureMax,s=e.time,o=e.icon;return n.a.createElement(w.a,{sm:"4",key:"daily-forecast-".concat(s)},n.a.createElement("div",{className:"p-3 forecast d-flex align-items-center justify-content-center"},n.a.createElement(Xe,{icon:o}),n.a.createElement("div",{className:"text-truncate"},n.a.createElement("div",{className:"conditions text-truncate"},t),n.a.createElement("div",{className:"high-low"},r.toFixed(0),n.a.createElement("span",{className:"text-muted px-1"},"/"),a.toFixed(0)),n.a.createElement("div",{className:"date"},I()(1e3*s).format("dddd, MMM D")))))})))}}]),a}(a.PureComponent);function lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function it(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(r),!0).forEach((function(t){N()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ut(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(ct,"propTypes",{className:R.PropTypes.string,dailyForecasts:R.PropTypes.arrayOf(R.PropTypes.shape({icon:R.PropTypes.string,summary:R.PropTypes.string,temperatureMin:R.PropTypes.number,temperatureMax:R.PropTypes.number,time:R.PropTypes.number}))}),N()(ct,"defaultProps",{className:"",dailyForecasts:[]});var pt=[{readable:"Bernal Heights",lat:37.7448205,long:-122.4100494}],ft=function(e){y()(s,e);var t,r,a=(t=s,function(){var e,r=E()(t);if(ut()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function s(e){var t;return p()(this,s),t=a.call(this,e),N()(A()(t),"updateWeatherLocations",O()(D.a.mark((function e(){var r,a,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=G.get(W),a=G.get(K),e.prev=2,e.next=5,Ve.fetchAllLocationsWeatherData(pt,r,a);case 5:n=e.sent,t.setState({loading:!0}),t.setState({locations:n.map((function(e,t){var r=e.data,a=r.hourly,n=r.daily,s=r.alerts;return it({dailyForecasts:n.data,hourlyForecasts:a.data,alerts:s},pt[t])})),lastUpdated:I()(),loading:!1}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0),t.setState({fetchError:!0,loading:!1,lastUpdated:I()()});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))),t.state={locations:[],fetchError:!1,lastUpdated:void 0,loading:!1},t}return m()(s,[{key:"componentDidMount",value:(r=O()(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateWeatherLocations();case 2:this.interval=setInterval(this.updateWeatherLocations,9e5);case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props.className,t=this.state,r=t.locations,a=t.lastUpdated,s=t.fetchError,o=t.loading;return n.a.createElement("div",{className:T()(e,"weather")},s&&n.a.createElement("div",{className:"error-msg"},n.a.createElement("span",{className:"fas fa-exclamation-circle mr-1"}),n.a.createElement("span",null,"Weather request failed. Make sure ","you've"," supplied an API Key in the"," ",n.a.createElement("a",{href:"#/settings"},"settings"),".")),r.map((function(e){var t=e.hourlyForecasts,r=e.dailyForecasts,a=e.alerts,s=e.readable,o=e.lat,c=e.long;return n.a.createElement(M.a,{className:"mb-2",key:"".concat(o,",").concat(c)},n.a.createElement("div",{className:"location-readable"},n.a.createElement("small",null,s)),n.a.createElement(U.a,null,n.a.createElement(k.a,{className:"slim-gutters"},n.a.createElement(w.a,{xs:"5"},n.a.createElement(at,{dailyForecasts:r,hourlyForecasts:t,alerts:a})),n.a.createElement(w.a,{xs:"7"},n.a.createElement(st,{hourlyForecasts:t})))),n.a.createElement(We.a,{className:"bg-transparent py-0"},n.a.createElement(ct,{dailyForecasts:r})))})),n.a.createElement("div",{className:"d-flex justify-content-end"},n.a.createElement(le,{lastUpdated:a,msUntilWarning:18e5,loading:o})))}}]),s}(a.PureComponent);function mt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(ft,"propTypes",{className:R.PropTypes.string}),N()(ft,"defaultProps",{className:""});var dt=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(mt()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){return e.forceUpdate()}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props.className,t=I()(),r=t.format("MMMM Do, YYYY"),a=t.format("h:mm");return n.a.createElement("div",{className:T()(e,"current-time","row","py-1","align-items-baseline")},n.a.createElement("div",{className:"time col-6"},a),n.a.createElement("div",{className:"date col-6"},r))}}]),a}(a.PureComponent);function yt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(dt,"propTypes",{className:R.PropTypes.string}),N()(dt,"defaultProps",{className:""});var ht=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(yt()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){return p()(this,a),r.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var e=this.props.className;return n.a.createElement("div",{className:T()(e)},n.a.createElement(dt,null),n.a.createElement(k.a,{className:"slim-gutters"},n.a.createElement(w.a,{sm:"5",className:"mb-4"},n.a.createElement(Be,null)),n.a.createElement(w.a,{sm:"7",className:"mb-4"},n.a.createElement(ft,null))))}}]),a}(a.PureComponent);N()(ht,"propTypes",{className:R.PropTypes.string}),N()(ht,"defaultProps",{className:""});var vt=r(534),gt=r(533);function Et(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Pt="dark-mode",Nt="light-mode",Rt=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(Et()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(e){var t;return p()(this,a),t=r.call(this,e),N()(A()(t),"setMode",(function(e){document.documentElement.className=e,G.set(V,e),t.forceUpdate()})),N()(A()(t),"isDarkModeSelected",(function(){return document.documentElement.className===Pt})),t.setMode=t.setMode.bind(A()(t)),t}return m()(a,[{key:"render",value:function(){var e=this,t=this.props.className,r=this.isDarkModeSelected();return n.a.createElement(n.a.Fragment,null,n.a.createElement(be.a,{className:"mr-2"},"Theme:"),n.a.createElement(gt.a,{className:T()(t)},n.a.createElement(ie.a,{onClick:function(){return e.setMode(Pt)},color:r?"primary":"secondary"},"Dark"),n.a.createElement(ie.a,{onClick:function(){return e.setMode(Nt)},color:r?"secondary":"primary"},"Light")))}}]),a}(a.PureComponent);N()(Rt,"propTypes",{className:R.PropTypes.string}),N()(Rt,"defaultProps",{className:""});var bt=r(536),Tt=r(189);function St(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var jt=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(St()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(e){var t;return p()(this,a),t=r.call(this,e),N()(A()(t),"rerender",(function(){return t.forceUpdate()})),N()(A()(t),"getLocalStorageData",(function(e){return G.get(e)})),N()(A()(t),"toggleShow",(function(){var e=t.state.show;t.setState({show:!e})})),t.state={show:!1},t}return m()(a,[{key:"componentDidMount",value:function(){window.addEventListener("storage",this.rerender)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("storage",this.rerender)}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.localStorageKey,a=this.state.show,s=JSON.stringify(this.getLocalStorageData(r));return n.a.createElement("div",{className:T()(t)},n.a.createElement("p",null,n.a.createElement(ie.a,{color:"primary",onClick:this.toggleShow},a?"Hide":"Show"," LocalStorage Data")),n.a.createElement("p",{className:"small"},"JSON representation of the stored data."),a&&n.a.createElement(bt.a,{language:"json",style:Tt.monokai,className:"my-3"},s))}}]),a}(a.PureComponent);function kt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(jt,"propTypes",{className:R.PropTypes.string,localStorageKey:R.PropTypes.oneOf(q).isRequired}),N()(jt,"defaultProps",{className:""});var wt=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(kt()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(){var e;p()(this,a);for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e=r.call.apply(r,[this].concat(n)),N()(A()(e),"setSampleData",(function(){var t=e.props.localStorageKey;G.setSampleData(t)})),e}return m()(a,[{key:"render",value:function(){var e=this.props.className;return n.a.createElement("div",{className:T()(e)},n.a.createElement("p",null,n.a.createElement(ie.a,{color:"primary",onClick:this.setSampleData},"Set Sample LocalStorage Data")),n.a.createElement("p",{className:"small"},"Replace stored data with sample data."))}}]),a}(a.PureComponent);function xt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}N()(wt,"propTypes",{className:R.PropTypes.string,localStorageKey:R.PropTypes.oneOf(Object.keys(J)).isRequired}),N()(wt,"defaultProps",{className:""});var Dt=function(e){y()(a,e);var t,r=(t=a,function(){var e,r=E()(t);if(xt()){var a=E()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return v()(this,e)});function a(e){var t;return p()(this,a),t=r.call(this,e),N()(A()(t),"getInitialState",(function(){return{weatherKeyIsValid:void 0,weatherKeyValue:G.get(W),weatherUnits:G.get(K)}})),N()(A()(t),"onWeatherKeyChange",(function(e){t.setState({weatherKeyValue:e.target.value})})),N()(A()(t),"validateAndSetKey",function(){var e=O()(D.a.mark((function e(r){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),a=t.state.weatherKeyValue,e.prev=2,e.next=5,Ve.isValidKey(a);case 5:if(!e.sent){e.next=9;break}return t.setState({weatherKeyIsValid:!0}),G.set(W,a),e.abrupt("return");case 9:t.setState({weatherKeyIsValid:!1}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),t.setState({weatherKeyIsValid:!1});case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}()),N()(A()(t),"setWeatherUnits",(function(e){t.setState({weatherUnits:e}),G.set(K,e)})),N()(A()(t),"dumpLocalStorageAndResetState",(function(){t.setState(t.getInitialState()),G.dump()})),t.state=t.getInitialState(),t}return m()(a,[{key:"render",value:function(){var e=this,t=this.props.className,r=this.state,a=r.weatherKeyIsValid,s=r.weatherKeyValue,o=r.weatherUnits;return n.a.createElement("div",{className:T()(t)},n.a.createElement("h1",null,"Settings"),n.a.createElement(k.a,null,n.a.createElement(w.a,{xs:"6"},n.a.createElement(M.a,{className:"mb-4"},n.a.createElement(vt.a,null,n.a.createElement("h3",{className:"m-0"},"Global")),n.a.createElement(U.a,null,n.a.createElement(Rt,null),n.a.createElement("hr",null),n.a.createElement("p",null,n.a.createElement(ie.a,{color:"danger",onClick:this.dumpLocalStorageAndResetState},"Dump All Local Storage")),n.a.createElement("p",{className:"small"},"This will remove stored bus stops, your DarkSky key, and the weather units."))))),n.a.createElement(k.a,null,n.a.createElement(w.a,{xs:"6"},n.a.createElement(M.a,{className:"mb-4"},n.a.createElement(vt.a,null,n.a.createElement("h3",{className:"m-0"},"Bus")),n.a.createElement(U.a,null,n.a.createElement(jt,{localStorageKey:z}),n.a.createElement("hr",null),n.a.createElement(wt,{localStorageKey:z})))),n.a.createElement(w.a,{xs:"6"},n.a.createElement(M.a,{className:"mb-4"},n.a.createElement(vt.a,null,n.a.createElement("h3",{className:"m-0"},"Weather")),n.a.createElement(U.a,null,n.a.createElement(Ne.a,{onSubmit:this.validateAndSetKey},n.a.createElement(Re.a,null,n.a.createElement(be.a,{for:"weather-key"},"DarkSky API Key:"),n.a.createElement(Te.a,{type:"text",id:"weather-key",className:T()({"is-valid":a,"is-invalid":!1===a}),onChange:this.onWeatherKeyChange,value:s})),n.a.createElement(ie.a,{color:"primary",type:"submit"},"Validate & Store Key")),n.a.createElement("hr",null),n.a.createElement(Re.a,null,n.a.createElement(be.a,{className:"mr-2"},"Weather Units:"),n.a.createElement(gt.a,null,n.a.createElement(ie.a,{color:""===o?"primary":"secondary",onClick:function(){return e.setWeatherUnits("")}},"Auto"),n.a.createElement(ie.a,{color:"f"===o?"primary":"secondary",onClick:function(){return e.setWeatherUnits("f")}},"F"),n.a.createElement(ie.a,{color:"c"===o?"primary":"secondary",onClick:function(){return e.setWeatherUnits("c")}},"C"))))))))}}]),a}(a.PureComponent);function Ft(){return n.a.createElement(c.a,null,n.a.createElement(i.a,null,n.a.createElement(j,null),n.a.createElement(l.c,null,n.a.createElement(l.a,{path:"/settings"},n.a.createElement(Dt,null)),n.a.createElement(l.a,{path:"/"},n.a.createElement(ht,null)))))}N()(Dt,"propTypes",{className:R.PropTypes.string}),N()(Dt,"defaultProps",{className:""});o.a.render(n.a.createElement(Ft,null),document.getElementById("react-app"))}});
//# sourceMappingURL=app.2fdec37e.js.map